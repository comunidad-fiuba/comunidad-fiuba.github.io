/*! For license information please see main.f46dd8a1.js.LICENSE.txt */
!function(){var e={463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,j=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case E:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function $(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Se(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==_e||null!==Ie)&&(Ae(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,je=null,Fe=!1,Ue=null,Ve={onError:function(e){Me=!0,je=e}};function Be(e,t,n,r,i,a,o,s,u){Me=!1,je=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ft(s):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,It,Et,St=!1,Tt=[],Ct=null,At=null,Nt=null,Pt=new Map,Dt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){St=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==At&&Ft(At)&&(At=null),null!==Nt&&Ft(Nt)&&(Nt=null),Pt.forEach(Ut),Dt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Pt.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)jt(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=j({},cn,{view:0,detail:0}),hn=an(fn),dn=j({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(j({},dn,{dataTransfer:0})),mn=an(j({},fn,{relatedTarget:0})),yn=an(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(j({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return In}var Sn=j({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(j({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(j({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=j({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Pn),Rn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,jn=l&&(!On||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Wn=null;function Qn(e){Fr(e,0)}function Yn(e){if(W(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(l){var $n;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Wn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Gn(t,Wn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Ir={};function Er(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return _r[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Ar=Er("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Nr.set(e,t),u(t,[e])}for(var Rr=0;Rr<Pr.length;Rr++){var Or=Pr[Rr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Sr,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=je;Me=!1,je=null,Fe||(Fe=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;jr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;jr(i,s,c),a=u}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Gt;break;case 4:i=Kt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var s=Nr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case Sr:case Tr:case Cr:u=yn;break;case Ar:u=Nn;break;case"scroll":u=hn;break;case"wheel":u=Dn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=De(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Xn;else if(Hn(s))if(Jn)m=or;else{m=ir;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?bi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(jn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Kr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=$t=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=De(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=De(n,a))&&o.unshift(Gr(n,u,s)):i||null!=(u=De(n,a))&&o.push(Gr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Ei(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Si(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ai=Ii(!1),Ni=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ei(Ai),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return j({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ci.current,Si(Ci,e),Si(Ai,Ai.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Ci),Si(Ci,e)):Ei(Ai),Si(Ai,n)}var Fi=null,Ui=!1,Vi=!1;function Bi(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),We(Ze,zi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Hi=0,Gi=null,Ki=0,Wi=[],Qi=0,Yi=null,Xi=1,Ji="";function $i(e,t){qi[Hi++]=Ki,qi[Hi++]=Gi,Gi=e,Ki=t}function Zi(e,t,n){Wi[Qi++]=Xi,Wi[Qi++]=Ji,Wi[Qi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Xi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Hi],qi[Hi]=null,Ki=qi[--Hi],qi[Hi]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,Ji=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ya.current;Ei(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Au)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ja(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var f=i.baseState;for(o=0,l=c=u=null,s=a;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=j({},f,h);break e;case 2:Na=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=f):l=l.next=d,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);ju|=o,e.lanes=o,e.memoizedState=f}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Di(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Di(t)?Ni:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),ja(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,s[v],u);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===s.length)return n(i,f),ia&&$i(i,v),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&$i(i,v),c}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&$i(i,v),c}function m(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&$i(i,m),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=h(i,g.value,c))&&(s=o(g,s,m),null===f?l=g:f.sibling=g,f=g);return ia&&$i(i,m),l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=o(g,s,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&$i(i,m),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Mc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Lc(o.type,o.key,o.props,null,r.mode,u)).ref=Ka(r,a,o),u.return=r,r=u)}return s(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,u)).return=r,r=a}return s(r);case D:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return m(r,a,o,u);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Xa=Ya(!0),Ja=Ya(!1),$a={},Za=Ii($a),eo=Ii($a),to=Ii($a);function no(e){if(e===$a)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,$a),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Si(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var so=Ii(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cs,e=n(r,i)}while(ko)}if(fo.current=os,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=h,s=r):c=c.next=h,vo.lanes|=f,ju|=f}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,ju|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Do(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Ho(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Nu)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&jo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&jo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function jo(e){var t=Aa(e,1);null!==t&&rc(t,e,1,-1)}function Fo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ho(e,t){return zo(2048,8,e,t)}function Go(e,t){return zo(4,2,e,t)}function Ko(e,t){return zo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Wo.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,ju|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),as(n,t,r)}}function ns(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ea,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},ss={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Fo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Nu)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Nu.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ea,useCallback:Xo,useContext:Ea,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ko,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){return $o(To(),mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ea,useCallback:Xo,useContext:Ea,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ko,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:$o(t,mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gu||(Gu=!0,Ku=r),hs(0,t)},n}function vs(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Wu?Wu=new Set([this]):Wu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Xa(t,e.child,n,r)}function xs(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function _s(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Is(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Gs(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Is(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ou,Ru),Ru|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ou,Ru),Ru|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Ou,Ru),Ru|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Ou,Ru),Ru|=r;return ws(e,t,i,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Di(n)?Ni:Ci.current;return a=Pi(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function Cs(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Hs(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Pi(t,c=Di(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Ha(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,ja(t,r,o,i),u=t.memoizedState,s!==r||h!==u||Ai.current||Na?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Na||za(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ma(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ea(u):u=Pi(t,u=Di(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&Ha(t,o,r,u),Na=!1,h=t.memoizedState,o.state=h,ja(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||Ai.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||za(t,n,c,r,h,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,a,i)}function As(e,t,n,r,i,a){Ss(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),Gs(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ps(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Ds,Rs,Os,Ls,Ms={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=jc(u,i,0,null),e=Mc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Ms,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Vs(e,t,s,r=fs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Ms,o);if(0===(1&t.mode))return Vs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Vs(e,t,s,r=fs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Nu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),rc(r,e,i,-1))}return mc(),Vs(e,t,s,r=fs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=Xi,Wi[Qi++]=Ji,Wi[Qi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),t=Us(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Oc(r,s):(s=Mc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?js(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,i}return e=(s=e.child).sibling,i=Oc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vs(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function zs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zs(t,!0,n,null,a);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ju|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ws(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(t),null;case 1:case 17:return Di(t.type)&&Ri(),Ws(t),null;case 3:return r=t.stateNode,io(),Ei(Ai),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Rs(e,t),Ws(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ws(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[di]=r,Ds(e,t,!1,!1),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ws(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ws(t),null;case 13:if(Ei(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ws(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ws(t),null);case 4:return io(),Rs(e,t),null===e&&zr(t.stateNode.containerInfo),Ws(t),null;case 10:return xa(t.type._context),Ws(t),null;case 19:if(Ei(so),null===(o=t.memoizedState))return Ws(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ks(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ks(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qu&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Ws(t),null}else 2*Je()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=so.current,Si(so,r?1&n|2:1&n),t):(Ws(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ru)&&(Ws(t),6&t.subtreeFlags&&(t.flags|=8192)):Ws(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ai),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(so),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ds=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rs=function(){},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,Js=!1,$s="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(t,n,a)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var fu=null,hu=!1;function du(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Js||eu(n,t);case 6:var r=fu,i=hu;fu=null,du(e,t,n),hu=i,null!==(fu=r)&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fu.removeChild(n.stateNode));break;case 18:null!==fu&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),zt(e)):ui(fu,n.stateNode));break;case 4:r=fu,i=hu,fu=n.stateNode.containerInfo,hu=!0,du(e,t,n),fu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tu(n,t,o),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!Js&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,du(e,t,n),Js=r):du(e,t,n);break;default:du(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:fu=u.stateNode,hu=!1;break e;case 3:case 4:fu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===fu)throw Error(a(160));pu(o,s,i),fu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),gu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(m){Ec(e,e.return,m)}try{ru(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:mu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(mu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&J(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(u){case"input":$(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(mu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(mu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:mu(t,e),gu(e);break;case 13:mu(t,e),gu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zu=Je())),4&r&&vu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(l=Js)||f,mu(t,e),Js=l):mu(t,e),gu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zs=e,f=e.child;null!==f;){for(h=Zs=f;null!==Zs;){switch(p=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){xu(h);continue}}null!==p?(p.return=d,Zs=p):xu(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mu(t,e),gu(e),4&r&&vu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),lu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(a(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ku(e,t,n){Zs=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xs;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Js;s=Xs;var c=Js;if(Xs=o,(Js=u)&&!c)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?_u(i):null!==u?(u.return=o,Zs=u):_u(i);for(;null!==a;)Zs=a,bu(a,t,n),a=a.sibling;Zs=i,Xs=s,Js=c}wu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):wu(e)}}function wu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Js||512&t.flags&&au(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function xu(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function _u(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){Ec(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Ec(t,i,u)}}var a=t.return;try{au(t)}catch(u){Ec(t,a,u)}break;case 5:var o=t.return;try{au(t)}catch(u){Ec(t,o,u)}}}catch(u){Ec(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Iu,Eu=Math.ceil,Su=b.ReactCurrentDispatcher,Tu=b.ReactCurrentOwner,Cu=b.ReactCurrentBatchConfig,Au=0,Nu=null,Pu=null,Du=0,Ru=0,Ou=Ii(0),Lu=0,Mu=null,ju=0,Fu=0,Uu=0,Vu=null,Bu=null,zu=0,qu=1/0,Hu=null,Gu=!1,Ku=null,Wu=null,Qu=!1,Yu=null,Xu=0,Ju=0,$u=null,Zu=-1,ec=0;function tc(){return 0!==(6&Au)?Je():-1!==Zu?Zu:Zu=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Au)&&0!==Du?Du&-Du:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<Ju)throw Ju=0,$u=null,Error(a(185));yt(e,n,r),0!==(2&Au)&&e===Nu||(e===Nu&&(0===(2&Au)&&(Fu|=n),4===Lu&&uc(e,Du)),ic(e,r),1===n&&0===Au&&0===(1&t.mode)&&(qu=Je()+500,Ui&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Nu?Du:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&Au)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zu=-1,ec=0,0!==(6&Au))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Nu?Du:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Au;Au|=2;var o=vc();for(Nu===e&&Du===t||(Hu=null,qu=Je()+500,dc(e,t));;)try{kc();break}catch(u){pc(e,u)}wa(),Su.current=o,Au=i,null!==Pu?t=0:(Nu=null,Du=0,t=Lu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Mu,dc(e,0),uc(e,r),ic(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Mu,dc(e,0),uc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,Bu,Hu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=zu+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Bu,Hu),t);break}xc(e,Bu,Hu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Bu,Hu),r);break}xc(e,Bu,Hu);break;default:throw Error(a(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bu,Bu=n,null!==t&&sc(t)),e}function sc(e){null===Bu?Bu=e:Bu.push.apply(Bu,e)}function uc(e,t){for(t&=~Uu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Au))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Mu,dc(e,0),uc(e,t),ic(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bu,Hu),ic(e,Je()),null}function lc(e,t){var n=Au;Au|=1;try{return e(t)}finally{0===(Au=n)&&(qu=Je()+500,Ui&&zi())}}function fc(e){null!==Yu&&0===Yu.tag&&0===(6&Au)&&_c();var t=Au;Au|=1;var n=Cu.transition,r=kt;try{if(Cu.transition=null,kt=1,e)return e()}finally{kt=r,Cu.transition=n,0===(6&(Au=t))&&zi()}}function hc(){Ru=Ou.current,Ei(Ou)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pu)for(n=Pu.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ei(Ai),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(so);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Nu=e,Pu=e=Oc(e.current,null),Du=Ru=t,Lu=0,Mu=null,Uu=Fu=ju=0,Bu=Vu=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function pc(e,t){for(;;){var n=Pu;try{if(wa(),fo.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Tu.current=null,null===n||null===n.return){Lu=1,Mu=t,Pu=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Du,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=ys(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ms(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Lu&&(Lu=2),null===Vu?Vu=[o]:Vu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,c,t));break e;case 1:u=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Wu||!Wu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function vc(){var e=Su.current;return Su.current=os,null===e?os:e}function mc(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Nu||0===(268435455&ju)&&0===(268435455&Fu)||uc(Nu,Du)}function yc(e,t){var n=Au;Au|=2;var r=vc();for(Nu===e&&Du===t||(Hu=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Au=n,Su.current=r,null!==Pu)throw Error(a(261));return Nu=null,Du=0,Lu}function gc(){for(;null!==Pu;)bc(Pu)}function kc(){for(;null!==Pu&&!Ye();)bc(Pu)}function bc(e){var t=Iu(e.alternate,e,Ru);e.memoizedProps=e.pendingProps,null===t?wc(e):Pu=t,Tu.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Ru)))return void(Pu=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Pu=n);if(null===e)return Lu=6,void(Pu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Lu&&(Lu=5)}function xc(e,t,n){var r=kt,i=Cu.transition;try{Cu.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Yu);if(0!==(6&Au))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Nu&&(Pu=Nu=null,Du=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qu||(Qu=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cu.transition,Cu.transition=null;var s=kt;kt=1;var u=Au;Au|=4,Tu.current=null,function(e,t){if(ei=Ht,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++f===r&&(c=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=nu,nu=!1}(e,n),yu(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,ku(n,e,i),Xe(),Au=u,kt=s,Cu.transition=o}else e.current=n;if(Qu&&(Qu=!1,Yu=e,Xu=i),o=e.pendingLanes,0===o&&(Wu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gu)throw Gu=!1,e=Ku,Ku=null,e;0!==(1&Xu)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===$u?Ju++:(Ju=0,$u=e):Ju=0,zi()}(e,t,n,r)}finally{Cu.transition=i,kt=r}return null}function _c(){if(null!==Yu){var e=bt(Xu),t=Cu.transition,n=kt;try{if(Cu.transition=null,kt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,Xu=0,0!==(6&Au))throw Error(a(331));var i=Au;for(Au|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Zs=l;null!==Zs;){var f=Zs;switch(f.tag){case 0:case 11:case 15:ru(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zs=h;else for(;null!==Zs;){var d=(f=Zs).sibling,p=f.return;if(ou(f),f===l){Zs=null;break}if(null!==d){d.return=p,Zs=d;break}Zs=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zs=g;break e}Zs=o.return}}var k=e.current;for(Zs=k;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=k;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(x){Ec(u,u.return,x)}if(u===s){Zs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Zs=w;break e}Zs=u.return}}if(Au=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Cu.transition=t}}return!1}function Ic(e,t,n){e=Oa(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wu||!Wu.has(r))){t=Oa(t,e=vs(t,e=ls(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Du&n)===n&&(4===Lu||3===Lu&&(130023424&Du)===Du&&500>Je()-zu?dc(e,0):Uu|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Aa(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return We(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Pc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Rc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Mc(n.children,i,o,t);case I:s=8,i|=8;break;case E:return(e=Dc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case A:return(e=Dc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Dc(19,n,t,i)).elementType=N,e.lanes=o,e;case R:return jc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case T:s=9;break e;case C:s=11;break e;case P:s=14;break e;case D:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,s,u){return e=new Vc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,s,u){return(e=Bc(n,r,!0,e,0,a,0,s,u)).context=zc(null),n=e.current,(a=Ra(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Hc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Iu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Si(so,1&so.current),null!==(e=Gs(e,t,n))?e.sibling:null);Si(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Gs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=As(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=_s(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Ns(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),ja(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ss(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Si(ya,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ai.current){t=Gs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),_a(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_s(e,t,r,i=ma(r.type,i),n);case 15:return Is(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Hs(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),qa(t,r,i),Ga(t,r,i,n),As(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Gc(o);s.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Gc(u);s.call(e)}}var u=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Hc(t,u,n,r)})),u}(n,t,e,i,r);return Gc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Hc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Je()),0===(6&Au)&&(qu=Je()+500,zi()))}break;case 13:fc((function(){var t=Aa(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Aa(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),$(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ae=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Se,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},48:function(e,t,n){var r;e.exports=(r=n(791),function(){var e={703:function(e,t,n){"use strict";var r=n(414);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},697:function(e,t,n){e.exports=n(703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},98:function(e){"use strict";e.exports=r}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return function(){"use strict";n.r(i),n.d(i,{default:function(){return x}});var e=n(98),t=n.n(e),r=n(697),a=n.n(r);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}var s=function(e){var n=e.pageClassName,r=e.pageLinkClassName,i=e.page,a=e.selected,s=e.activeClassName,u=e.activeLinkClassName,c=e.getEventListener,l=e.pageSelectedHandler,f=e.href,h=e.extraAriaContext,d=e.pageLabelBuilder,p=e.rel,v=e.ariaLabel||"Page "+i+(h?" "+h:""),m=null;return a&&(m="page",v=e.ariaLabel||"Page "+i+" is your current page",n=void 0!==n?n+" "+s:s,void 0!==r?void 0!==u&&(r=r+" "+u):r=u),t().createElement("li",{className:n},t().createElement("a",o({rel:p,role:f?void 0:"button",className:r,href:f,tabIndex:a?"-1":"0","aria-label":v,"aria-current":m,onKeyPress:l},c(l)),d(i)))};s.propTypes={pageSelectedHandler:a().func.isRequired,selected:a().bool.isRequired,pageClassName:a().string,pageLinkClassName:a().string,activeClassName:a().string,activeLinkClassName:a().string,extraAriaContext:a().string,href:a().string,ariaLabel:a().string,page:a().number.isRequired,getEventListener:a().func.isRequired,pageLabelBuilder:a().func.isRequired,rel:a().string};var u=s;function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}var l=function(e){var n=e.breakLabel,r=e.breakClassName,i=e.breakLinkClassName,a=e.breakHandler,o=e.getEventListener,s=r||"break";return t().createElement("li",{className:s},t().createElement("a",c({className:i,role:"button",tabIndex:"0",onKeyPress:a},o(a)),n))};l.propTypes={breakLabel:a().oneOfType([a().string,a().node]),breakClassName:a().string,breakLinkClassName:a().string,breakHandler:a().func.isRequired,getEventListener:a().func.isRequired};var f=l;function h(e){return null!=e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:""}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function y(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(s,e);var n,r,i,a,o=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(i);if(a){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function s(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),b(g(n=o.call(this,e)),"handlePreviousPage",(function(e){var t=n.state.selected;n.handleClick(e,null,t>0?t-1:void 0,{isPrevious:!0})})),b(g(n),"handleNextPage",(function(e){var t=n.state.selected,r=n.props.pageCount;n.handleClick(e,null,t<r-1?t+1:void 0,{isNext:!0})})),b(g(n),"handlePageSelected",(function(e,t){if(n.state.selected===e)return n.callActiveCallback(e),void n.handleClick(t,null,void 0,{isActive:!0});n.handleClick(t,null,e)})),b(g(n),"handlePageChange",(function(e){n.state.selected!==e&&(n.setState({selected:e}),n.callCallback(e))})),b(g(n),"getEventListener",(function(e){return b({},n.props.eventListener,e)})),b(g(n),"handleClick",(function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.isPrevious,o=void 0!==a&&a,s=i.isNext,u=void 0!==s&&s,c=i.isBreak,l=void 0!==c&&c,f=i.isActive,h=void 0!==f&&f;e.preventDefault?e.preventDefault():e.returnValue=!1;var d=n.state.selected,p=n.props.onClick,v=r;if(p){var m=p({index:t,selected:d,nextSelectedPage:r,event:e,isPrevious:o,isNext:u,isBreak:l,isActive:h});if(!1===m)return;Number.isInteger(m)&&(v=m)}void 0!==v&&n.handlePageChange(v)})),b(g(n),"handleBreakClick",(function(e,t){var r=n.state.selected;n.handleClick(t,e,r<e?n.getForwardJump():n.getBackwardJump(),{isBreak:!0})})),b(g(n),"callCallback",(function(e){void 0!==n.props.onPageChange&&"function"==typeof n.props.onPageChange&&n.props.onPageChange({selected:e})})),b(g(n),"callActiveCallback",(function(e){void 0!==n.props.onPageActive&&"function"==typeof n.props.onPageActive&&n.props.onPageActive({selected:e})})),b(g(n),"getElementPageRel",(function(e){var t=n.state.selected,r=n.props,i=r.nextPageRel,a=r.prevPageRel,o=r.selectedPageRel;return t-1===e?a:t===e?o:t+1===e?i:void 0})),b(g(n),"pagination",(function(){var e=[],r=n.props,i=r.pageRangeDisplayed,a=r.pageCount,o=r.marginPagesDisplayed,s=r.breakLabel,u=r.breakClassName,c=r.breakLinkClassName,l=n.state.selected;if(a<=i)for(var h=0;h<a;h++)e.push(n.getPageElement(h));else{var d=i/2,p=i-d;l>a-i/2?d=i-(p=a-l):l<i/2&&(p=i-(d=l));var v,m,y=function(e){return n.getPageElement(e)},g=[];for(v=0;v<a;v++){var k=v+1;k<=o||k>a-o||v>=l-d&&v<=l+(0===l&&i>1?p-1:p)?g.push({type:"page",index:v,display:y(v)}):s&&g.length>0&&g[g.length-1].display!==m&&(i>0||o>0)&&(m=t().createElement(f,{key:v,breakLabel:s,breakClassName:u,breakLinkClassName:c,breakHandler:n.handleBreakClick.bind(null,v),getEventListener:n.getEventListener}),g.push({type:"break",index:v,display:m}))}g.forEach((function(t,n){var r=t;"break"===t.type&&g[n-1]&&"page"===g[n-1].type&&g[n+1]&&"page"===g[n+1].type&&g[n+1].index-g[n-1].index<=2&&(r={type:"page",index:t.index,display:y(t.index)}),e.push(r.display)}))}return e})),void 0!==e.initialPage&&void 0!==e.forcePage&&console.warn("(react-paginate): Both initialPage (".concat(e.initialPage,") and forcePage (").concat(e.forcePage,") props are provided, which is discouraged.")+" Use exclusively forcePage prop for a controlled component.\nSee https://reactjs.org/docs/forms.html#controlled-components"),r=e.initialPage?e.initialPage:e.forcePage?e.forcePage:0,n.state={selected:r},n}return n=s,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.initialPage,n=e.disableInitialCallback,r=e.extraAriaContext,i=e.pageCount,a=e.forcePage;void 0===t||n||this.callCallback(t),r&&console.warn("DEPRECATED (react-paginate): The extraAriaContext prop is deprecated. You should now use the ariaLabelBuilder instead."),Number.isInteger(i)||console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(i,"). Did you forget a Math.ceil()?")),void 0!==t&&t>i-1&&console.warn("(react-paginate): The initialPage prop provided is greater than the maximum page index from pageCount prop (".concat(t," > ").concat(i-1,").")),void 0!==a&&a>i-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(a," > ").concat(i-1,")."))}},{key:"componentDidUpdate",value:function(e){void 0!==this.props.forcePage&&this.props.forcePage!==e.forcePage&&(this.props.forcePage>this.props.pageCount-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(this.props.forcePage," > ").concat(this.props.pageCount-1,").")),this.setState({selected:this.props.forcePage})),Number.isInteger(e.pageCount)&&!Number.isInteger(this.props.pageCount)&&console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(this.props.pageCount,"). Did you forget a Math.ceil()?"))}},{key:"getForwardJump",value:function(){var e=this.state.selected,t=this.props,n=t.pageCount,r=e+t.pageRangeDisplayed;return r>=n?n-1:r}},{key:"getBackwardJump",value:function(){var e=this.state.selected-this.props.pageRangeDisplayed;return e<0?0:e}},{key:"getElementHref",value:function(e){var t=this.props,n=t.hrefBuilder,r=t.pageCount,i=t.hrefAllControls;if(n)return i||e>=0&&e<r?n(e+1,r,this.state.selected):void 0}},{key:"ariaLabelBuilder",value:function(e){var t=e===this.state.selected;if(this.props.ariaLabelBuilder&&e>=0&&e<this.props.pageCount){var n=this.props.ariaLabelBuilder(e+1,t);return this.props.extraAriaContext&&!t&&(n=n+" "+this.props.extraAriaContext),n}}},{key:"getPageElement",value:function(e){var n=this.state.selected,r=this.props,i=r.pageClassName,a=r.pageLinkClassName,o=r.activeClassName,s=r.activeLinkClassName,c=r.extraAriaContext,l=r.pageLabelBuilder;return t().createElement(u,{key:e,pageSelectedHandler:this.handlePageSelected.bind(null,e),selected:n===e,rel:this.getElementPageRel(e),pageClassName:i,pageLinkClassName:a,activeClassName:o,activeLinkClassName:s,extraAriaContext:c,href:this.getElementHref(e),ariaLabel:this.ariaLabelBuilder(e),page:e+1,pageLabelBuilder:l,getEventListener:this.getEventListener})}},{key:"render",value:function(){var e=this.props.renderOnZeroPageCount;if(0===this.props.pageCount&&void 0!==e)return e?e(this.props):e;var n=this.props,r=n.disabledClassName,i=n.disabledLinkClassName,a=n.pageCount,o=n.className,s=n.containerClassName,u=n.previousLabel,c=n.previousClassName,l=n.previousLinkClassName,f=n.previousAriaLabel,d=n.prevRel,v=n.nextLabel,m=n.nextClassName,y=n.nextLinkClassName,g=n.nextAriaLabel,k=n.nextRel,b=this.state.selected,w=0===b,x=b===a-1,_="".concat(h(c)).concat(w?" ".concat(h(r)):""),I="".concat(h(m)).concat(x?" ".concat(h(r)):""),E="".concat(h(l)).concat(w?" ".concat(h(i)):""),S="".concat(h(y)).concat(x?" ".concat(h(i)):""),T=w?"true":"false",C=x?"true":"false";return t().createElement("ul",{className:o||s,role:"navigation","aria-label":"Pagination"},t().createElement("li",{className:_},t().createElement("a",p({className:E,href:this.getElementHref(b-1),tabIndex:w?"-1":"0",role:"button",onKeyPress:this.handlePreviousPage,"aria-disabled":T,"aria-label":f,rel:d},this.getEventListener(this.handlePreviousPage)),u)),this.pagination(),t().createElement("li",{className:I},t().createElement("a",p({className:S,href:this.getElementHref(b+1),tabIndex:x?"-1":"0",role:"button",onKeyPress:this.handleNextPage,"aria-disabled":C,"aria-label":g,rel:k},this.getEventListener(this.handleNextPage)),v)))}}])&&v(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),s}(e.Component);b(w,"propTypes",{pageCount:a().number.isRequired,pageRangeDisplayed:a().number,marginPagesDisplayed:a().number,previousLabel:a().node,previousAriaLabel:a().string,prevPageRel:a().string,prevRel:a().string,nextLabel:a().node,nextAriaLabel:a().string,nextPageRel:a().string,nextRel:a().string,breakLabel:a().oneOfType([a().string,a().node]),hrefBuilder:a().func,hrefAllControls:a().bool,onPageChange:a().func,onPageActive:a().func,onClick:a().func,initialPage:a().number,forcePage:a().number,disableInitialCallback:a().bool,containerClassName:a().string,className:a().string,pageClassName:a().string,pageLinkClassName:a().string,pageLabelBuilder:a().func,activeClassName:a().string,activeLinkClassName:a().string,previousClassName:a().string,nextClassName:a().string,previousLinkClassName:a().string,nextLinkClassName:a().string,disabledClassName:a().string,disabledLinkClassName:a().string,breakClassName:a().string,breakLinkClassName:a().string,extraAriaContext:a().string,ariaLabelBuilder:a().func,eventListener:a().string,renderOnZeroPageCount:a().func,selectedPageRel:a().string}),b(w,"defaultProps",{pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousLabel:"Previous",previousClassName:"previous",previousAriaLabel:"Previous page",prevPageRel:"prev",prevRel:"prev",nextLabel:"Next",nextClassName:"next",nextAriaLabel:"Next page",nextPageRel:"next",nextRel:"next",breakLabel:"...",disabledClassName:"disabled",disableInitialCallback:!1,pageLabelBuilder:function(e){return e},eventListener:"onClick",renderOnZeroPageCount:void 0,selectedPageRel:"canonical",hrefAllControls:!1});var x=w}(),i}())},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+C(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(s=e[c],c);u+=A(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=A(s=s.value,t,i,l=a+C(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,R(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var u=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,E=null,S=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function N(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?_():(I=!1,E=null)}}else I=!1}if("function"===typeof k)_=function(){k(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,D=P.port2;P.port1.onmessage=N,_=function(){D.postMessage(null)}}else _=function(){y(N,0)};function R(e){E=e,I||(I=!0,_())}function O(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,O(w,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,R(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return z},SDK_VERSION:function(){return nt},_DEFAULT_ENTRY_NAME:function(){return qe},_addComponent:function(){return We},_addOrOverwriteComponent:function(){return Qe},_apps:function(){return Ge},_clearComponents:function(){return $e},_components:function(){return Ke},_getProvider:function(){return Xe},_registerComponent:function(){return Ye},_removeServiceInstance:function(){return Je},deleteApp:function(){return ot},getApp:function(){return it},getApps:function(){return at},initializeApp:function(){return rt},onLog:function(){return ct},registerVersion:function(){return ut},setLogLevel:function(){return lt}});var t=n(791),r=n.t(t,2),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||s(e,t)||u()}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}function h(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function v(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function x(e){var t=w();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}(this,n)}}function _(e,t,n){return _=w()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},_.apply(null,arguments)}function I(e){var t="function"===typeof Map?new Map:void 0;return I=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _(e,arguments,b(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},I(e)}var E=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},S={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(E(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new T;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},T=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return v(n)}(I(Error)),C=function(e){return function(e){var t=E(e);return S.encodeByteArray(t,!0)}(e).replace(/\./g,"")},A=function(e){try{return S.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function N(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=N(e[n],t[n]));return e}var P=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},D=function(){try{return P()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DRIVE_POST:"https://script.google.com/macros/s/AKfycbzmEdEii_ZDulRHpzP0O6KIiZ3i36iwchg3UIrwcMyBxxgGegG-QIfcz8YaCct_ZUkj/exec",REACT_APP_LIKE:"https://cofi.saludturnos.com/like",REACT_APP_POST:"https://cofi.saludturnos.com/post",REACT_APP_POSTS:"https://cofi.saludturnos.com/posts",REACT_APP_POST_DELETE:"https://cofi.saludturnos.com/postDelete",REACT_APP_PUSHER_APP_CLUSTER:"sa1",REACT_APP_PUSHER_APP_KEY:"abbe6a2231dc2dd25217",REACT_APP_USER:"https://cofi.saludturnos.com/user",REACT_APP_USERNAME:"https://cofi.saludturnos.com/username",REACT_APP_USER_DATA:"https://cofi.saludturnos.com/userData/"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&A(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},R=function(){var e;return null===(e=D())||void 0===e?void 0:e.config},O=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return v(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function L(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function M(){var e,t=null===(e=D())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function j(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function F(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function U(){var e=L();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function V(){try{return"object"===typeof indexedDB}catch(e){return!1}}var B="FirebaseError",z=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name=B,Object.setPrototypeOf(y(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(y(a),q.prototype.create),a}return v(n)}(I(Error)),q=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return v(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(H,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new z(n,a,t)}}]),e}();var H=/\{\$([^}]+)}/g;function G(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function K(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(W(s)&&W(u)){if(!K(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function W(e){return null!==e&&"object"===typeof e}function Q(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Y(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function X(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function J(e,t){var n=new $(e,t);return n.subscribe.bind(n)}var $=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return v(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=m(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Z),void 0===r.error&&(r.error=Z),void 0===r.complete&&(r.complete=Z);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Z(){}function ee(e){return e&&e._delegate?e._delegate:e}function te(){te=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(A){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new S(i||[]);return r(o,"_invoke",{value:x(e,n,s)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=v.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,s){var u=f(e[r],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==l(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),u(k,s,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function ne(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function re(e){return function(e){if(Array.isArray(e))return o(e)}(e)||ne(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ie(a,r,i,o,s,"next",e)}function s(e){ie(a,r,i,o,s,"throw",e)}o(void 0)}))}}var oe=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return v(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),se="[DEFAULT]",ue=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return v(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new O;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:se})}catch(u){}var t,n=m(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(re(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),re(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=m(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=c(i.value,2),u=s[0],l=s[1];r===this.normalizeInstanceIdentifier(u)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(lm){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===se?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(lm){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;return this.component?this.component.multipleInstances?e:se:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ce,le,fe=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return v(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ue(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),he=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(le||(le={}));var de={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},pe=le.INFO,ve=(h(ce={},le.DEBUG,"log"),h(ce,le.VERBOSE,"log"),h(ce,le.INFO,"info"),h(ce,le.WARN,"warn"),h(ce,le.ERROR,"error"),ce),me=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ve[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ye=function(){function e(t){d(this,e),this.name=t,this._logLevel=pe,this._logHandler=me,this._userLogHandler=null,he.push(this)}return v(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in le))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?de[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,le.DEBUG].concat(t)),this._logHandler.apply(this,[this,le.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,le.VERBOSE].concat(t)),this._logHandler.apply(this,[this,le.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,le.INFO].concat(t)),this._logHandler.apply(this,[this,le.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,le.WARN].concat(t)),this._logHandler.apply(this,[this,le.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,le.ERROR].concat(t)),this._logHandler.apply(this,[this,le.ERROR].concat(t))}}]),e}();function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be,we,xe=function(e,t){return t.some((function(t){return e instanceof t}))};var _e=new WeakMap,Ie=new WeakMap,Ee=new WeakMap,Se=new WeakMap,Te=new WeakMap;var Ce={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ie.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ee.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pe(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ae(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(we||(we=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(De(this),n),Pe(_e.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Pe(e.apply(De(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[De(this),t].concat(r));return Ee.set(a,t.sort?t.sort():[t]),Pe(a)}}function Ne(e){return"function"===typeof e?Ae(e):(e instanceof IDBTransaction&&function(e){if(!Ie.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ie.set(e,t)}}(e),xe(e,be||(be=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ce):e)}function Pe(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Pe(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&_e.set(t,e)})).catch((function(){})),Te.set(t,e),t}(e);if(Se.has(e))return Se.get(e);var t=Ne(e);return t!==e&&(Se.set(e,t),Te.set(t,e)),t}var De=function(e){return Te.get(e)};var Re,Oe,Le=["get","getKey","getAll","getAllKeys","count"],Me=["put","add","delete","clear"],je=new Map;function Fe(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(je.get(t))return je.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Me.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Le.includes(n))){var a=function(){var e=ae(te().mark((function e(t){var a,o,s,u,c,l,f=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=f.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=f[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return je.set(t,a),a}}}Ce=function(e){return ke(ke({},e),{},{get:function(t,n,r){return Fe(t,n)||e.get(t,n,r)},has:function(t,n){return!!Fe(t,n)||e.has(t,n)}})}(Ce);var Ue=function(){function e(t){d(this,e),this.container=t}return v(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ve="@firebase/app",Be="0.9.5",ze=new ye("@firebase/app"),qe="[DEFAULT]",He=(h(Re={},Ve,"fire-core"),h(Re,"@firebase/app-compat","fire-core-compat"),h(Re,"@firebase/analytics","fire-analytics"),h(Re,"@firebase/analytics-compat","fire-analytics-compat"),h(Re,"@firebase/app-check","fire-app-check"),h(Re,"@firebase/app-check-compat","fire-app-check-compat"),h(Re,"@firebase/auth","fire-auth"),h(Re,"@firebase/auth-compat","fire-auth-compat"),h(Re,"@firebase/database","fire-rtdb"),h(Re,"@firebase/database-compat","fire-rtdb-compat"),h(Re,"@firebase/functions","fire-fn"),h(Re,"@firebase/functions-compat","fire-fn-compat"),h(Re,"@firebase/installations","fire-iid"),h(Re,"@firebase/installations-compat","fire-iid-compat"),h(Re,"@firebase/messaging","fire-fcm"),h(Re,"@firebase/messaging-compat","fire-fcm-compat"),h(Re,"@firebase/performance","fire-perf"),h(Re,"@firebase/performance-compat","fire-perf-compat"),h(Re,"@firebase/remote-config","fire-rc"),h(Re,"@firebase/remote-config-compat","fire-rc-compat"),h(Re,"@firebase/storage","fire-gcs"),h(Re,"@firebase/storage-compat","fire-gcs-compat"),h(Re,"@firebase/firestore","fire-fst"),h(Re,"@firebase/firestore-compat","fire-fst-compat"),h(Re,"fire-js","fire-js"),h(Re,"firebase","fire-js-all"),Re),Ge=new Map,Ke=new Map;function We(e,t){try{e.container.addComponent(t)}catch(n){ze.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Qe(e,t){e.container.addOrOverwriteComponent(t)}function Ye(e){var t=e.name;if(Ke.has(t))return ze.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ke.set(t,e);var n,r=m(Ge.values());try{for(r.s();!(n=r.n()).done;){We(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Xe(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Je(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qe;Xe(e,t).clearInstance(n)}function $e(){Ke.clear()}var Ze=(h(Oe={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),h(Oe,"bad-app-name","Illegal App name: '{$appName}"),h(Oe,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),h(Oe,"app-deleted","Firebase App named '{$appName}' already deleted"),h(Oe,"no-options","Need to provide options, when not being deployed to hosting via source."),h(Oe,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),h(Oe,"invalid-log-argument","First argument to `onLog` must be null or a function."),h(Oe,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),h(Oe,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),h(Oe,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),h(Oe,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Oe),et=new q("app","Firebase",Ze),tt=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oe("app",(function(){return i}),"PUBLIC"))}return v(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw et.create("app-deleted",{appName:this._name})}}]),e}(),nt="9.18.0";function rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:qe,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw et.create("bad-app-name",{appName:String(i)});if(n||(n=R()),!n)throw et.create("no-options");var a=Ge.get(i);if(a){if(K(n,a.options)&&K(r,a.config))return a;throw et.create("duplicate-app",{appName:i})}var o,s=new fe(i),u=m(Ke.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new tt(n,r,s);return Ge.set(i,l),l}function it(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=Ge.get(e);if(!t&&e===qe)return rt();if(!t)throw et.create("no-app",{appName:e});return t}function at(){return Array.from(Ge.values())}function ot(e){return st.apply(this,arguments)}function st(){return(st=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ge.has(n)){e.next=6;break}return Ge.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e,t,n){var r,i=null!==(r=He[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ze.warn(s.join(" "))}Ye(new oe("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function ct(e,t){if(null!==e&&"function"!==typeof e)throw et.create("invalid-log-argument");!function(e,t){var n,r=m(he);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=de[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:le[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function lt(e){var t;t=e,he.forEach((function(e){e.setLogLevel(t)}))}var ft="firebase-heartbeat-database",ht=1,dt="firebase-heartbeat-store",pt=null;function vt(){return pt||(pt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Pe(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Pe(s.result),e.oldVersion,e.newVersion,Pe(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}(ft,ht,{upgrade:function(e,t){if(0===t)e.createObjectStore(dt)}}).catch((function(e){throw et.create("idb-open",{originalErrorMessage:e.message})}))),pt}function mt(e){return yt.apply(this,arguments)}function yt(){return yt=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vt();case 3:return n=e.sent,e.abrupt("return",n.transaction(dt).objectStore(dt).get(bt(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof z?ze.warn(e.t0.message):(r=et.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ze.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),yt.apply(this,arguments)}function gt(e,t){return kt.apply(this,arguments)}function kt(){return kt=ae(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vt();case 3:return r=e.sent,i=r.transaction(dt,"readwrite"),a=i.objectStore(dt),e.next=8,a.put(n,bt(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof z?ze.warn(e.t0.message):(o=et.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ze.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),kt.apply(this,arguments)}function bt(e){return"".concat(e.name,"!").concat(e.options.appId)}var wt=1024,xt=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Tt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return v(e,[{key:"triggerHeartbeat",value:function(){var e=ae(te().mark((function e(){var t,n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=_t(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=ae(te().mark((function e(){var t,n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=_t(),n=It(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=C(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function _t(){return(new Date).toISOString().substring(0,10)}function It(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wt,r=[],i=e.slice(),a=m(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Ct(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Ct(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Et,St,Tt=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return v(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,mt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",gt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",gt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(re(r.heartbeats),re(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ct(e){return C(JSON.stringify({version:2,heartbeats:e})).length}Et="",Ye(new oe("platform-logger",(function(e){return new Ue(e)}),"PRIVATE")),Ye(new oe("heartbeat",(function(e){return new xt(e)}),"PRIVATE")),ut(Ve,Be,Et),ut(Ve,Be,"esm2017"),ut("fire-js","");var At=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,We(t,new oe("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return v(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),ot(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qe;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qe;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){We(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Qe(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Nt=(h(St={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),h(St,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),St),Pt=new q("app-compat","Firebase",Nt);var Dt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=rt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(G(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ut,setLogLevel:lt,onLog:ct,apps:null,SDK_VERSION:nt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Ye(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Pt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&N(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!G(n,e=e||qe))throw Pt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(At);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){N(n,e)},createSubscribe:J,ErrorFactory:q,deepExtend:N}),n}(),Rt=new ye("@firebase/app-compat"),Ot="@firebase/app-compat",Lt="0.2.5";if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Rt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Mt=self.firebase.SDK_VERSION;Mt&&Mt.indexOf("LITE")>=0&&Rt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var jt=Dt;!function(e){ut(Ot,Lt,e)}();jt.registerVersion("firebase","9.18.0","app-compat");var Ft="https://script.google.com/macros/s/AKfycbzmEdEii_ZDulRHpzP0O6KIiZ3i36iwchg3UIrwcMyBxxgGegG-QIfcz8YaCct_ZUkj/exec",Ut=["image/png","image/jpg","image/jpeg","application/pdf"],Vt=[],Bt=["Fisica I A"],zt=["Fisica I"],qt=["\xa1Bienvenido!","\xa1Unite Ya!","\xa1Hola!","\xa1Al fin!","\xa1Llegaste!"],Ht=["Solo faltabas vos","Te estuvimos esperando","Te extra\xf1amos","Somos mas de 1000!","Esperamos que te guste"],Gt=["Analisis Matematico II","Algebra II","Fisica I","Probabilidad y Estadistica B","Matematica Discreta","Fisica II A","Analisis Matematico III A","Quimica","Quimica I","Matematica Especial para Ingenieria Quimica","Matematica para Ingenieros","Ecuaciones Diferenciales Ordinarias","Analisis Funcional","Algebra II C","Fisica III","Analisis Matematico III","Mecanica I","Mecanica II","Mecanica Racional","Fisica III C","Fisica III D","Fisica de los Fluidos","Quimica Analitica","Quimica Fisica II","Analisis Matematico III C","Termodinamica Estadistica","Quimica Inorganica","Quimica Organica","Quimica Analitica Instrumental","Quimica Fisica","Estatica y Resistencia de Materiales B","Estabilidad I B","Estabilidad II B","Estabilidad III B","Fisica II B","Fisica II","Probabilidad y Estadistica","Metodo de los Elementos Finitos","Estabilidad IV B","Analisis Experimental de Tensiones","Electrotecnia General B","Maquinas Electricas","Electrotecnia General D","Ingenieria de las Instalaciones I","Laboratorio de Instalaciones Electricas","Laboratorio","Electronica General","Electronica I","Electronica II","Analisis de Circuitos","Circuitos Electronicos I","Laboratorio de Microcomputadoras","Sistemas Digitales","Teoria de Control I","Circuitos de Pulsos","Organizacion de Computadoras","Teoria de la Informacion y Codificacion","Arquitecturas Paralelas","Robotica","Tecnica Digital Avanzada","Procesamiento del Habla","Procesamiento de Imagenes","Sistemas Biologicos","Simulacion de Sistemas de Control","Redes Neuronales","Criptografia y Seguridad Informatica","Estructura del Computador","Sistemas Graficos","Se\xf1ales y Sistemas","Procesos Estocasticos","Tesis de Ingenieria Mecanica","Medios de Representacion B","Termodinamica I A","Dibujo Mecanico","Mecanismos A","Mecanismos B","Conocimiento de Materiales I","Conocimiento de Materiales II","Tecnologia Mecanica I","Ensayos Industriales","Taller","Mecanica de Fluidos B","Maquinas Alternativas","Turbomaquinas","Mediciones Fisicas y Mecanicas","Sistemas de Control","Conversion de la Energia","Proyecto de Instalaciones Industriales","Elementos de Maquinas","Metrologia","Tecnologia Mecanica II","Sistemas Hidraulicos y Neumaticos","Proyecto de Maquinas","Combustion","Transferencia de Calor y Masa","Tecnologia del Frio","Tecnologia del Calor","Proyecto de Instalaciones Termicas","Tecnologia Mecanica B","Dibujo para Ingenieros","Dise\xf1o de Maquinas Herramientas","Automotores","Control Numerico de Maquinas Herramientas","Robotica Industrial","Plantas Termicas","Sistemas de Control en Instalaciones Termicas","Dise\xf1o de Instalaciones Termicas","Metalografia","Tratamientos Termicos","Metalurgia Fisica","Materiales Ferrosos y sus Aplicaciones","Tecnicas Energeticas","Elementos Finitos Avanzados en la Mecanica de Fluidos","Introduccion al Metodo de los Elementos Finitos","Mecanica del Continuo","Introduccion al Analisis Tensorial","Fundamentos Matematicos de la Vision en Robotica","Elementos Finitos Avanzados","Trabajo Profesional de Ingenieria Mecanica","Puertos y Vias Navegables","Transporte A","Planeamiento del Transporte","Ordenamiento Rural y Urbano","Tesis de Ingenieria en Agrimensura","Geometria Descriptiva","Dibujo Topografico","Geografia Fisica y Geologia","Calculo De Compensacion","Topografia I","Topografia II","Geodesia I","Geodesia II","Fotogrametria I","Cartografia","Fotogrametria II","Geodesia III","Levantamientos Hidrograficos","Hidraulica Agricola y Saneamiento","Catastro","Informacion Rural","Sistemas de Informacion Geografica","Elementos de Construccion","Topografia III","Topografia IV","Sistemas Cartograficos y Teledeteccion","Levantamiento y Practica Profesional I","Levantamiento y Practica Profesional II","Valuaciones","Geologia Aplicada","Oceanografia Fisica","Sistemas de Informacion Geografica II","Topografia De Obra","Dibujo Topografico II","Trabajo Profesional de la Ingenieria en Agrimensura","Introduccion a la Economia y Organizacion de la Empresa","Agrimensura Legal I","Estadistica Tecnica","Investigacion Operativa","Estructura de las Organizaciones","Informacion en las Organizaciones","Modelos y Optimizacion I","Modelos y Optimizacion II","Administracion de Proyectos","Derecho Informatico","Estructura Economica Argentina","Modelos y Optimizacion III","Economia","Agrimensura Legal II","Legislacion y Ejercicio Profesional de la Ingenieria Mecanica","Legislacion y Ejercicio Profesional de la Ingenieria Quimica","Agrimensura Legal III","Organizacion de la Produccion","Comercializacion","Gestion Presupuestaria","Gestion de Calidad","Legislacion General","Legislacion y Ejercicio Profesional de la Ingenieria en Informatica","Analisis y Resolucion de Problemas","Circuitos de Informacion en la Empresa","Logistica Integral","Recursos Humanos","Ingenieria Economica","Ingenieria Economica I","Ingenieria Economica II","Agrimensura Legal IV","Evaluacion de Proyectos de Plantas Quimicas","Economia de la Empresa Alimentaria","Legislacion y Ejercicio Profesional de la Ingenieria de Alimentos","Analisis y Resolucion de Problemas de Sistemas","Materiales Industriales I","Automatizacion Industrial","Dise\xf1o de Producto","Tesis de Ingenieria Naval y Mecanica","Arquitectura Naval I","Construccion Naval I","Arquitectura Naval II","Estructura de Buques","Introduccion a Maquinas Marinas","Vibraciones de Estructuras","Construccion Naval II","Proyecto de Buques I","Proyecto de Buques II","Maquinas Marinas I","Maquinas Marinas II","Navegacion","Maquinas Marinas III","Construccion Naval III","Practicas en Astilleros I","Practicas en Astilleros II","Trabajo Profesional de Ingenieria Naval y Mecanica","Tesis de Ingenieria Informatica","Computacion","Organizacion del Computador","Organizacion de Datos","Algoritmos y Programacion III","Sistemas Operativos","Analisis de la Informacion","Tecnicas de Dise\xf1o","Analisis Numerico","Lenguajes Formales","Base de Datos","Lenguajes de Programacion","Implantacion de Sistemas","Proyectos Informaticos","Teoria de Comunicacion","Arquitecturas y Configuracion","Concurrencia","Inteligencia Artificial","Teoria de la Programacion IV","Simulacion","Algoritmos y Programacion IV","Teoria de Algoritmos I","Teoria de Algoritmos II","Teoria de Lenguaje","Practica Profesional","Redes y Teleprocesamientos I","Redes y Teleprocesamientos II","Seminario y Logica de Bases de Datos","Analisis Numerico II A","Aplicaciones Informaticas","Algoritmos y Programacion I","Algoritmos y Programacion II","Taller de Programacion I","Introduccion a los Sistemas Distribuidos","Administracion y Control de Proyectos Informaticos I","Taller de Desarrollo de Proyectos I","Administracion y Control de Proyectos Informaticos II","Taller de Desarrollo de Proyectos II","Calidad en Desarrollo de Sistemas","Introduccion a los Sistemas Inteligentes","Tecnicas de Produccion de Software I","Taller de Programacion II","Tecnicas de Produccion de Software II","Tecnicas de Produccion de Software III","Organizacion de la Implantacion y el Mantenimiento","Modelos de Proceso de Desarrollo","Evaluacion de Proyectos y Manejo de Riesgos","Tecnicas de Programacion Concurrente I","Taller de Programacion III","Tecnicas de Programacion Concurrente II","Sistemas Distribuidos II","Sistemas Multimediales","Manufactura Integrada por Computadora I","Manufactura Integrada por Computadora II","Sistemas Automaticos de Diagnostico y Deteccion Fallas I","Sistemas de Soporte para Celdas Produccion Flexible","Sistemas Automaticos de Diagnostico y Deteccion Fallas II","Sistemas de Programacion no convencional de Robots","Seminario de Ingenieria de Informatica I","Seminario de Ingenieria de Informatica II","Arquitectura de Software","Sistemas Distribuidos I","Trabajo Profesional de Ingenieria Informatica","Operaciones I","Operaciones Unitarias II","Operaciones Unitarias III","Ingenieria de la Reacciones Quimicas","Microbiologia Industrial","Electroquimica","Procesos Electroquimicos","Fisicoquimica Especial","Fundamentos de la Ing. de Reservorios","Recuperacion Asistida de Petroleo","Fundamentos de la Simulacion Numerica de Reservorio","Explotacion de Yacimientos","Control Estadistico de Procesos","Gestion Recursos en la Industria de Procesos","Industria de Procesos","Industrias Alimenticias","Introduccion a la Bioquimica","Biotecnologia","Ingenieria de la Instalaciones II B","Instrumentacion y Control","Termodinamica de los Procesos","Introduccion a la Ingenieria Quimica","Fenomenos de Transporte","Evaluacion de Propiedades Fisicas","Introduccion a la Planificacion Interactiva","Operaciones Unitarias de Transferencia de Materia","Dise\xf1o de Reactores","Instalaciones de Plantas de Procesos","Instrumentacion y Control de Plantas Quimicas","Dise\xf1o de Procesos","Emisiones de Contaminantes Quimicos y Biologicos","Trabajo Profesional de Ingenieria Quimica","Laboratorio de Operaciones y Procesos","Bioingenieria","Dise\xf1o Avanzado de Reactores","Tesis de Ingenieria Quimica","Termodinamica Aplicada a los Procesos Petroleros","Tesis de Grado de Ingenieria de Alimentos","Higiene y Seguridad del Trabajo","Introduccion a la Ingenieria Ambiental","Proyectos Nacionales e Ingenieria Ambiental","Seguridad Ambiental y del Trabajo B","Gestion Ambiental en la Industria Alimentaria","Idioma Ingles","Tesis de Ingenieria en Petroleo","Introduccion a la Ingenieria en Petroleo","Perforacion de Pozos I","Terminacion y Reparacion de Pozos I","Interpretacion de Registros de Pozos","Geologia del Petroleo","Geofisica del Petroleo","Perforacion de Pozos II","Ingenieria de Reservorios no Convencionales","Gas y Condensados","Desarrollo de Yacimientos","Terminacion y Reparacion de Pozos II","Produccion de Petroleo","Evaluacion de Proyectos en Ingenieria en Petroleo","Instalaciones de Produccion","Integridad y Mantenimiento de Instalaciones de Produccion","Caracterizacion Y Modelado De Reservorios","Propiedades de la Roca y los Fluidos de Reservorios","Ingenieria de Reservorios","Ensayos de Pozo","Recuperacion Secundaria y Asistida de Petroleo","Simulacion Numerica de Reservorios","Industrializacion del Petroleo y del Gas","Tecnologia y Sociedad","Energia Y Civilizacion","Trabajo Profesional de Ingenieria en Petroleo","Probabilidad y Estadistica A","Analisis Matematico III B","Analisis Matricial y Metodos Numericos","Probabilidad","Fisica del Estado Solido","Electromagnetismo","Fisica III B","Quimica Aplicada","Quimica del Petroleo","Introduccion a la Ingenieria Civil","Estabilidad I","Estabilidad II","Comportamiento de Materiales","Estatica y Resistencia de Materiales","Estabilidad III","Mecanica de Suelos y Geologia","Estabilidad IV","Seguridad estructural","Dinamica de las estructuras","Dinamica de las estructuras II","Analisis sismico","Trabajo profesional de Ingenieria Civil","Tesis de Ingenieria Electricista","Introduccion a la Ingenieria Electricista","Electrotecnia","Teoria de Circuitos y Sistemas","Campos Electromagneticos","Medidas Electricas","Maquinas Electricas I","Maquinas Electricas II","Tecnologia de Materiales Electricos","Diagnosticos Electricos y Ensayos","Construcciones Electromecanicas","Instalaciones de Baja Tension y Luminotecnia","Sistemas Electricos de Potencia","Centrales Electricas","Transmision y Distribucion de la Energia Electrica","Protecciones Electricas y Equipos de Maniobra","Electronica de Potencia","Economia de la Energia Electrica","Accionamientos Electricos","Luminotecnia","Energias Renovables","Uso Eficiente de la Energia Electrica","Metrologia y Tecnicas de Calibracion Electrica","Medicion de Magnitudes Fisicas por Medios Electricos","Mediciones en AT","Estaciones Transformadoras y de Distribucion","Dinamica de SEP","Comunicaciones y Telecontrol","Seminario de Ingenieria Electricista I","Seminario de Ingenieria Electricista II","Proyecto de Centrales Hidroelectricas","Proyecto de Centrales Termoelectricas","Proyecto de Centrales Fotovoltaicas y Eolicas","Abastecimiento Auxiliar de la Energia Electrica","Regulacion de Servicios Publicos","Electrotecnia General C","Electrotecnia General","Electrotecnia P","Maquinas e Instalaciones Electricas","Trabajo Profesional de Ingenieria Electricista ","Tesis de Ingenieria Electronica","Tecnica Digital","Introduccion a la Ingenieria Electronica","Dispositivos Semiconductores","Circuitos Electronicos","Laboratorio de Microprocesadores","Control Automatico I","Dise\xf1o de Circuitos Electronicos","Teoria de la Informacion Codificacion","Comunicacion de Datos","Introduccion a Proyectos","Control Automatico  II","Control Automatico III","Control Industrial Distribuido","Control Robusto","Identificacion y Control Adaptativo","Instrumentacion y Control de Procesos","Laboratorio de Control Automatico","Accionamientos Variables","Comunicaciones Digitales I","Comunicaciones Digitales II","Infraestructura de Redes Fijas","Laboratorio de Comunicaciones","Propagacion y Sistemas Irradiantes","Comunicaciones Digitales III","Servicios y Redes de Comunicaciones","Sistemas Inalambricos","Electronica","Transmisores y Receptores de Comunicaciones","Video Digital","Redes de Computadoras","Laboratorio de Redes de Computadoras","Laboratorio de Sistemas Digitales","Industrias y Productos de Electronica","Microelectronica","Optoelectronica","Seminario de Electronica","Seminario de Electronica II","Tecnologia de los Componentes","Procesamiento de Se\xf1ales I","Procesamiento de Se\xf1ales II","Teoria de Deteccion y Estimacion","Acustica","Electroacustica","Audio Profesional","Ingenieria Biomedica","Equipamiento para Diagnostico y Tratamiento Biomedico","Proc. y Analisis de Se\xf1ales e Imagenes En Bioingenieria","Compatibilidad Electromagnetica","Sistemas Embebidos","Laboratorio de Microelectronica","Comunicaciones Radioelectricas y Radioenlaces","Control no Lineal","Instrumentos y Mediciones Electronicas","Introduccion al Dise\xf1o Asistido por Computadora para Electronica","Trabajo Profesional de Ingenieria Electronica","Mecanica Aplicada","Fuentes y Maquinas Energeticas","Termodinamica y Mecanica de Fluidos","Medios de Representacion A","Mecanismos","Medios de Representacion","Termodinamica","Taller A","Maquinas Termicas","Construccion de carreteras","Dise\xf1o y operacion de caminos","Puertos y Vias Navegables B","Ferrocarriles B","Aeropuertos B","Transito","Ingenieria Territorial","Analisis de sistemas de transporte","Caminos","Aeropuertos A","Ferrocarriles A","Puertos y Vias Navegables A","Evaluacion de proyectos","Hidraulica General","Centrales Hidraulicas","Modelos Hidraulicos","Hidrologia","Planificacion de Recursos Hidraulicos","Construcciones Hidraulicas","Gestion Ambiental de los Recursos Hidricos","Hidraulica Aplicada","Aprovechamientos hidraulicos","Ingenieria Sanitaria I","Gestion Ambiental en Ingenieria Civil","Hidraulica Fluvial","Hidraulica Maritima","Laboratorio de Hidraulica","Ingenieria Sanitaria II","Mecanica de Fluidos","Transporte De Fluidos Por Tuberias","Topografia y Geodesia","Gerenciamiento y Organizacion de Obras Civiles","Estadistica Aplicada I","Investigacion Operativa I","Organizacion Industrial III","Organizacion Industrial I","Legislacion y Ejercicio Profesional de la Ingenieria Electronica","Organizacion Industrial II","Informatica para la Gestion de Empresas","Legislacion y Ejercicio Profesional de la Ingenieria Electricista","Legislacion y Ejercicio Profesional de la Ingenieria Civil","Introduccion a la Economia y la Organizacion en la Empresa","Conflicto y Negociacion","Ingeneria Legal para Ingeneria Industrial","Macroeconomia y Estructura Economica Argentina","Estadistica Aplicada III","Direccion de Manufactura","Logistica","Gestion de Costos","Ingeneria Economica A","Estadistica Aplicada II","Investigacion Operativa II","Investigacion Operativa III","Microeconomia Aplicada","Gestion Financiera","Analisis de Casos","Gestion de la Calidad","Emprendimientos de Ingenieria","Estructuras y Procesos Organizacionales","Legislacion y Ejercicio Profesional en Sistemas e Informatica","Economia de las Organizaciones","Administracion de las Organizaciones","Herramientas de Gestion Profesional","Legislacion y Ejercicio Profesional de Ingenieria en Petroleo","Desarrollo y Gestion de Proyectos","Gestion de la Innovacion","Ciencia de Datos para la Toma de Decisiones","Tesis de Ingenieria Industrial","Industrias I","Introduccion a la Ingenieria Industrial","Procesos de Manufactura I","Edificios Industriales","Automatizacion Industrial y Robotica","Instalaciones Industriales","Dise\xf1o de Productos","Industrias Plasticas","Industrias de Celulosa y Papel","Industrias Petroquimicas","Industrias Textiles","Materiales Industriales II","Seminario de Ingenieria Industrial I","Industrias de la Alimentacion","Seminario de Ingenieria Industrial II","Industrias Petroliferas","Industrias II","Procesos de Manufactura II","Industria Automotriz","Seminario de Ingenieria Industrial III","Ingenieria y Desarrollo de Envaes y Embalajes","Seminario de Ingenieria Industrial IV","Trabajo Profesional de Ingenieria Industrial","Hormigon I","Arquitectura y Planificacion Urbana","Construcciones","Hormigon II","Instalaciones en Obras Civiles I","Presas","Maquinarias de la Construccion","Urbanismo","Geotecnia Aplicada","Estructuras Metalicas I","Estructuras Metalicas II","Tecnologia del Hormigon","Patologia de la Construccion","Estructuras de Madera","Sistemas Constructivos","Sistemas Estructurales","Dise\xf1o Estructural","Inspeccion y Ejecucion de Estructuras de Hormigon","Materiales no tradicionales en la construccion","Instalaciones en Obras Civiles II","Teoria de Lenguajes de Programacion","Modelacion numerica","Metodos Matematicos y Numericos","Metodos y Modelos en la Ingenieria de Software I","Metodos y Modelos en la Ingenieria de Software II","Estandares de Calidad y Modelos de Referencia","Evaluacion e Implantacion de Sistemas","Evaluacion de Proyectos y Manejo de  Riesgos","Dise\xf1o Operacion y Gestion de Servicios Informaticos","Redes y Aplicaciones Distribuidas","Trabajo Profesional de Licenciatura en Analisis de Sistemas","Innovacion Tecnologica","Desarrollo de Aplicaciones Mainframe","Auditoria de Sistemas","Dise\xf1o y Desarrollo de Interfaces de Usuario","Bases de Datos Multidimensionales","Mineria de Datos","Desarrollo con Nuevas Tecnologias","Seminario de Sistemas de Informacion y Gestion","Seminario de Metodologias de Desarrollo de Sistemas","Arquitecturas y Configuraciones","Higiene y Seguridad Industrial","Higiene y Seguridad en Obras Civiles","Seguridad Ambiental y del Trabajo","Gestion Ambiental","Gestion Ambiental para Ingenieria en Petroleo"];function Kt(){return Kt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Kt.apply(this,arguments)}var Wt,Qt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Yt={},Xt=Xt||{},Jt=Qt||self;function $t(){}function Zt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function en(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var tn="closure_uid_"+(1e9*Math.random()>>>0),nn=0;function rn(e,t,n){return e.call.apply(e.bind,arguments)}function an(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function on(e,t,n){return(on=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rn:an).apply(null,arguments)}function sn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function un(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function cn(){this.s=this.s,this.o=this.o}cn.prototype.s=!1,cn.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,tn)&&e[tn]||(e[tn]=++nn))},cn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ln=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function fn(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function hn(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Zt(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function dn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}dn.prototype.h=function(){this.defaultPrevented=!0};var pn=function(){if(!Jt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Jt.addEventListener("test",$t,t),Jt.removeEventListener("test",$t,t)}catch(n){}return e}();function vn(e){return/^[\s\xa0]*$/.test(e)}var mn=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function yn(e,t){return e<t?-1:e>t?1:0}function gn(){var e=Jt.navigator;return e&&(e=e.userAgent)?e:""}function kn(e){return-1!=gn().indexOf(e)}function bn(e){return bn[" "](e),e}bn[" "]=$t;var wn,xn=kn("Opera"),_n=kn("Trident")||kn("MSIE"),In=kn("Edge"),En=In||_n,Sn=kn("Gecko")&&!(-1!=gn().toLowerCase().indexOf("webkit")&&!kn("Edge"))&&!(kn("Trident")||kn("MSIE"))&&!kn("Edge"),Tn=-1!=gn().toLowerCase().indexOf("webkit")&&!kn("Edge");function Cn(){var e=Jt.document;return e?e.documentMode:void 0}e:{var An="",Nn=function(){var e=gn();return Sn?/rv:([^\);]+)(\)|;)/.exec(e):In?/Edge\/([\d\.]+)/.exec(e):_n?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Tn?/WebKit\/(\S+)/.exec(e):xn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Nn&&(An=Nn?Nn[1]:""),_n){var Pn=Cn();if(null!=Pn&&Pn>parseFloat(An)){wn=String(Pn);break e}}wn=An}var Dn,Rn={};function On(){return function(e){var t=Rn;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=mn(String(wn)).split("."),n=mn("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=yn(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||yn(0==a[2].length,0==o[2].length)||yn(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Jt.document&&_n){var Ln=Cn();Dn=Ln||(parseInt(wn,10)||void 0)}else Dn=void 0;var Mn=Dn;function jn(e,t){if(dn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Sn){e:{try{bn(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Fn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&jn.X.h.call(this)}}un(jn,dn);var Fn={2:"touch",3:"pen",4:"mouse"};jn.prototype.h=function(){jn.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Un="closure_listenable_"+(1e6*Math.random()|0),Vn=0;function Bn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Vn,this.ba=this.ea=!1}function zn(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function qn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Hn(e){var t={};for(var n in e)t[n]=e[n];return t}var Gn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Gn.length;a++)n=Gn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Wn(e){this.src=e,this.g={},this.h=0}function Qn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=ln(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(zn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Yn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Wn.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Yn(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Bn(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Xn="closure_lm_"+(1e6*Math.random()|0),Jn={};function $n(e,t,n,r,i){if(r&&r.once)return er(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)$n(e,t[a],n,r,i);return null}return n=sr(n),e&&e[Un]?e.N(t,n,en(r)?!!r.capture:!!r,i):Zn(e,t,n,!1,r,i)}function Zn(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=en(i)?!!i.capture:!!i,s=ar(e);if(s||(e[Xn]=s=new Wn(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ir;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)pn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(rr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function er(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)er(e,t[a],n,r,i);return null}return n=sr(n),e&&e[Un]?e.O(t,n,en(r)?!!r.capture:!!r,i):Zn(e,t,n,!0,r,i)}function tr(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)tr(e,t[a],n,r,i);else r=en(r)?!!r.capture:!!r,n=sr(n),e&&e[Un]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Yn(a=e.g[t],n,r,i))&&(zn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ar(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Yn(t,n,r,i)),(n=-1<e?t[e]:null)&&nr(n))}function nr(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Un])Qn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(rr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ar(t))?(Qn(n,e),0==n.h&&(n.src=null,t[Xn]=null)):zn(e)}}}function rr(e){return e in Jn?Jn[e]:Jn[e]="on"+e}function ir(e,t){if(e.ba)e=!0;else{t=new jn(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&nr(e),e=n.call(r,t)}return e}function ar(e){return(e=e[Xn])instanceof Wn?e:null}var or="__closure_events_fn_"+(1e9*Math.random()>>>0);function sr(e){return"function"===typeof e?e:(e[or]||(e[or]=function(t){return e.handleEvent(t)}),e[or])}function ur(){cn.call(this),this.i=new Wn(this),this.P=this,this.I=null}function cr(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new dn(t,e);else if(t instanceof dn)t.target=t.target||e;else{var i=t;Kn(t=new dn(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=lr(o,r,!0,t)&&i}if(i=lr(o=t.g=e,r,!0,t)&&i,i=lr(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=lr(o=t.g=n[a],r,!1,t)&&i}function lr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var s=o.listener,u=o.ha||o.src;o.ea&&Qn(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}un(ur,cn),ur.prototype[Un]=!0,ur.prototype.removeEventListener=function(e,t,n,r){tr(this,e,t,n,r)},ur.prototype.M=function(){if(ur.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)zn(n[r]);delete t.g[e],t.h--}}this.I=null},ur.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ur.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var fr=Jt.JSON.stringify;function hr(){var e=br,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var dr,pr=function(){function e(){d(this,e),this.h=this.g=null}return v(e,[{key:"add",value:function(e,t){var n=vr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),vr=new(function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return v(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new mr}),(function(e){return e.reset()})),mr=function(){function e(){d(this,e),this.next=this.g=this.h=null}return v(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function yr(e){Jt.setTimeout((function(){throw e}),0)}function gr(e,t){dr||function(){var e=Jt.Promise.resolve(void 0);dr=function(){e.then(wr)}}(),kr||(dr(),kr=!0),br.add(e,t)}var kr=!1,br=new pr;function wr(){for(var e;e=hr();){try{e.h.call(e.g)}catch(n){yr(n)}var t=vr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}kr=!1}function xr(e,t){ur.call(this),this.h=e||1,this.g=t||Jt,this.j=on(this.lb,this),this.l=Date.now()}function _r(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Ir(e,t,n){if("function"===typeof e)n&&(e=on(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=on(e.handleEvent,e)}return 2147483647<Number(t)?-1:Jt.setTimeout(e,t||0)}function Er(e){e.g=Ir((function(){e.g=null,e.i&&(e.i=!1,Er(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}un(xr,ur),(Wt=xr.prototype).ca=!1,Wt.R=null,Wt.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),cr(this,"tick"),this.ca&&(_r(this),this.start()))}},Wt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Wt.M=function(){xr.X.M.call(this),_r(this),delete this.g};var Sr=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return v(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Er(this)}},{key:"M",value:function(){Kt(b(n.prototype),"M",this).call(this),this.g&&(Jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(cn);function Tr(e){cn.call(this),this.h=e,this.g={}}un(Tr,cn);var Cr=[];function Ar(e,t,n,r){Array.isArray(n)||(n&&(Cr[0]=n.toString()),n=Cr);for(var i=0;i<n.length;i++){var a=$n(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Nr(e){qn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&nr(e)}),e),e.g={}}function Pr(){this.g=!0}function Dr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return fr(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Tr.prototype.M=function(){Tr.X.M.call(this),Nr(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Pr.prototype.Aa=function(){this.g=!1},Pr.prototype.info=function(){};var Rr={},Or=null;function Lr(){return Or=Or||new ur}function Mr(e){dn.call(this,Rr.Pa,e)}function jr(e){var t=Lr();cr(t,new Mr(t))}function Fr(e,t){dn.call(this,Rr.STAT_EVENT,e),this.stat=t}function Ur(e){var t=Lr();cr(t,new Fr(t,e))}function Vr(e,t){dn.call(this,Rr.Qa,e),this.size=t}function Br(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Jt.setTimeout((function(){e()}),t)}Rr.Pa="serverreachability",un(Mr,dn),Rr.STAT_EVENT="statevent",un(Fr,dn),Rr.Qa="timingevent",un(Vr,dn);var zr={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},qr={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Hr(){}function Gr(e){return e.h||(e.h=e.i())}function Kr(){}Hr.prototype.h=null;var Wr,Qr={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Yr(){dn.call(this,"d")}function Xr(){dn.call(this,"c")}function Jr(){}function $r(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Tr(this),this.O=ei,e=En?125:void 0,this.T=new xr(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Zr}function Zr(){this.i=null,this.g="",this.h=!1}un(Yr,dn),un(Xr,dn),un(Jr,Hr),Jr.prototype.g=function(){return new XMLHttpRequest},Jr.prototype.i=function(){return{}},Wr=new Jr;var ei=45e3,ti={},ni={};function ri(e,t,n){e.K=1,e.v=xi(yi(t)),e.s=n,e.P=!0,ii(e,null)}function ii(e,t){e.F=Date.now(),ui(e),e.A=yi(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Li(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Zr,e.g=Ma(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Sr(on(e.La,e,e.g),e.N)),Ar(e.S,e.g,"readystatechange",e.ib),t=e.H?Hn(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),jr(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function ai(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function oi(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=si(e,n))==ni){4==t&&(e.o=4,Ur(14),i=!1),Dr(e.j,e.m,null,"[Incomplete Response]");break}if(r==ti){e.o=4,Ur(15),Dr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Dr(e.j,e.m,r,null),di(e,r)}ai(e)&&r!=ni&&r!=ti&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ur(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ca(t),t.K=!0,Ur(11))):(Dr(e.j,e.m,n,"[Invalid Chunked Response]"),hi(e),fi(e))}function si(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ni:(n=Number(t.substring(n,r)),isNaN(n)?ti:(r+=1)+n>t.length?ni:(t=t.substr(r,n),e.C=r+n,t))}function ui(e){e.V=Date.now()+e.O,ci(e,e.O)}function ci(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Br(on(e.gb,e),t)}function li(e){e.B&&(Jt.clearTimeout(e.B),e.B=null)}function fi(e){0==e.l.G||e.I||Pa(e.l,e)}function hi(e){li(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,_r(e.T),Nr(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function di(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||qi(n.h,e)))if(!e.J&&qi(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Na(n),ba(n)}Ta(n),Ur(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Br(on(n.cb,n),6e3));if(1>=zi(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Ra(n,11)}else if((e.J||n.g==e)&&Na(n),!vn(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var s=a[4];null!=s&&(n.Ca=s,n.j.info("SVER="+n.Ca));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Hi(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,wi(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=La(r,r.H?r.ka:null,r.V),d.J){Gi(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(li(p),ui(p)),r.g=d}else Sa(r);0<n.i.length&&xa(n)}else"stop"!=a[0]&&"close"!=a[0]||Ra(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ra(n,7):ka(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}jr()}catch(a){}}function pi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Zt(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Zt(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Zt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Wt=$r.prototype).setTimeout=function(e){this.O=e},Wt.ib=function(e){e=e.target;var t=this.L;t&&3==da(e)?t.l():this.La(e)},Wt.La=function(e){try{if(e==this.g)e:{var t=da(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||En||this.g&&(this.h.h||this.g.fa()||pa(this.g)))){this.I||4!=t||7==n||jr(),li(this);var r=this.g.aa();this.Y=r;t:if(ai(this)){var i=pa(this.g);e="";var a=i.length,o=4==da(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){hi(this),fi(this);var s="";break t}this.h.i=new Jt.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vn(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Ur(12),hi(this),fi(this);break e}Dr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,di(this,r)}this.P?(oi(this,t,s),En&&this.i&&3==t&&(Ar(this.S,this.T,"tick",this.hb),this.T.start())):(Dr(this.j,this.m,s,null),di(this,s)),4==t&&hi(this),this.i&&!this.I&&(4==t?Pa(this.l,this):(this.i=!1,ui(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Ur(12)):(this.o=0,Ur(13)),hi(this),fi(this)}}}catch(t){}},Wt.hb=function(){if(this.g){var e=da(this.g),t=this.g.fa();this.C<t.length&&(li(this),oi(this,e,t),this.i&&4!=e&&ui(this))}},Wt.cancel=function(){this.I=!0,hi(this)},Wt.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(jr(),Ur(17)),hi(this),this.o=2,fi(this)):ci(this,this.V-e)};var vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mi(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof mi){this.h=void 0!==t?t:e.h,gi(this,e.j),this.s=e.s,this.g=e.g,ki(this,e.m),this.l=e.l,t=e.i;var n=new Pi;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),bi(this,n),this.o=e.o}else e&&(n=String(e).match(vi))?(this.h=!!t,gi(this,n[1]||"",!0),this.s=_i(n[2]||""),this.g=_i(n[3]||"",!0),ki(this,n[4]),this.l=_i(n[5]||"",!0),bi(this,n[6]||"",!0),this.o=_i(n[7]||"")):(this.h=!!t,this.i=new Pi(null,this.h))}function yi(e){return new mi(e)}function gi(e,t,n){e.j=n?_i(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ki(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function bi(e,t,n){t instanceof Pi?(e.i=t,function(e,t){t&&!e.j&&(Di(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ri(this,t),Li(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ii(t,Ai)),e.i=new Pi(t,e.h))}function wi(e,t,n){e.i.set(t,n)}function xi(e){return wi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function _i(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ii(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ei),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ei(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}mi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ii(t,Si,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ii(t,Si,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ii(n,"/"==n.charAt(0)?Ci:Ti,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ii(n,Ni)),e.join("")};var Si=/[#\/\?@]/g,Ti=/[#\?:]/g,Ci=/[#\?]/g,Ai=/[#\?@]/g,Ni=/#/g;function Pi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Di(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ri(e,t){Di(e),t=Mi(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Oi(e,t){return Di(e),t=Mi(e,t),e.g.has(t)}function Li(e,t,n){Ri(e,t),0<n.length&&(e.i=null,e.g.set(Mi(e,t),fn(n)),e.h+=n.length)}function Mi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Wt=Pi.prototype).add=function(e,t){Di(this),this.i=null,e=Mi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Wt.forEach=function(e,t){Di(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Wt.oa=function(){Di(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Wt.W=function(e){Di(this);var t=[];if("string"===typeof e)Oi(this,e)&&(t=t.concat(this.g.get(Mi(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Wt.set=function(e,t){return Di(this),this.i=null,Oi(this,e=Mi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Wt.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Wt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var ji=v((function e(t,n){d(this,e),this.h=t,this.g=n}));function Fi(e){this.l=e||Vi,Jt.PerformanceNavigationTiming?e=0<(e=Jt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Jt.g&&Jt.g.Ga&&Jt.g.Ga()&&Jt.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ui,Vi=10;function Bi(e){return!!e.h||!!e.g&&e.g.size>=e.j}function zi(e){return e.h?1:e.g?e.g.size:0}function qi(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Hi(e,t){e.g?e.g.add(t):e.h=t}function Gi(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ki(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=m(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return fn(e.i)}function Wi(){}function Qi(){this.g=new Wi}function Yi(e,t,n){var r=n||"";try{pi(e,(function(e,n){var i=e;en(e)&&(i=fr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Xi(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Ji(e){this.l=e.ac||null,this.j=e.jb||!1}function $i(e,t){ur.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Zi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Fi.prototype.cancel=function(){if(this.i=Ki(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=m(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Wi.prototype.stringify=function(e){return Jt.JSON.stringify(e,void 0)},Wi.prototype.parse=function(e){return Jt.JSON.parse(e,void 0)},un(Ji,Hr),Ji.prototype.g=function(){return new $i(this.l,this.j)},Ji.prototype.i=(Ui={},function(){return Ui}),un($i,ur);var Zi=0;function ea(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function ta(e){e.readyState=4,e.l=null,e.j=null,e.A=null,na(e)}function na(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Wt=$i.prototype).open=function(e,t){if(this.readyState!=Zi)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,na(this)},Wt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Jt).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Wt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ta(this)),this.readyState=Zi},Wt.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,na(this)),this.g&&(this.readyState=3,na(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Jt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ea(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Wt.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ta(this):na(this),3==this.readyState&&ea(this)}},Wt.Va=function(e){this.g&&(this.response=this.responseText=e,ta(this))},Wt.Ua=function(e){this.g&&(this.response=e,ta(this))},Wt.ga=function(){this.g&&ta(this)},Wt.setRequestHeader=function(e,t){this.v.append(e,t)},Wt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Wt.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty($i.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ra=Jt.JSON.parse;function ia(e){ur.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=aa,this.K=this.L=!1}un(ia,ur);var aa="",oa=/^https?$/i,sa=["POST","PUT"];function ua(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ca(e),fa(e)}function ca(e){e.D||(e.D=!0,cr(e,"complete"),cr(e,"error"))}function la(e){if(e.h&&"undefined"!=typeof Xt&&(!e.C[1]||4!=da(e)||2!=e.aa()))if(e.v&&4==da(e))Ir(e.Ha,0,e);else if(cr(e,"readystatechange"),4==da(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(vi)[1]||null;if(!a&&Jt.self&&Jt.self.location){var o=Jt.self.location.protocol;a=o.substr(0,o.length-1)}i=!oa.test(a?a.toLowerCase():"")}t=i}if(t)cr(e,"complete"),cr(e,"success");else{e.m=6;try{var s=2<da(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.aa()+"]",ca(e)}}finally{fa(e)}}}function fa(e,t){if(e.g){ha(e);var n=e.g,r=e.C[0]?$t:null;e.g=null,e.C=null,t||cr(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function ha(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Jt.clearTimeout(e.A),e.A=null)}function da(e){return e.g?e.g.readyState:0}function pa(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case aa:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(eo){return null}}function va(e){var t="";return qn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ma(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=va(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):wi(e,t,n))}function ya(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ga(e){this.Ca=0,this.i=[],this.j=new Pr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ya("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ya("baseRetryDelayMs",5e3,e),this.bb=ya("retryDelaySeedMs",1e4,e),this.$a=ya("forwardChannelMaxRetries",2,e),this.ta=ya("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Fi(e&&e.concurrentRequestLimit),this.Fa=new Qi,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ka(e){if(wa(e),3==e.G){var t=e.U++,n=yi(e.F);wi(n,"SID",e.I),wi(n,"RID",t),wi(n,"TYPE","terminate"),Ia(e,n),(t=new $r(e,e.j,t,void 0)).K=2,t.v=xi(yi(n)),n=!1,Jt.navigator&&Jt.navigator.sendBeacon&&(n=Jt.navigator.sendBeacon(t.v.toString(),"")),!n&&Jt.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ma(t.l,null),t.g.da(t.v)),t.F=Date.now(),ui(t)}Oa(e)}function ba(e){e.g&&(Ca(e),e.g.cancel(),e.g=null)}function wa(e){ba(e),e.u&&(Jt.clearTimeout(e.u),e.u=null),Na(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Jt.clearTimeout(e.m),e.m=null)}function xa(e){Bi(e.h)||e.m||(e.m=!0,gr(e.Ja,e),e.C=0)}function _a(e,t){var n;n=t?t.m:e.U++;var r=yi(e.F);wi(r,"SID",e.I),wi(r,"RID",n),wi(r,"AID",e.T),Ia(e,r),e.o&&e.s&&ma(r,e.o,e.s),n=new $r(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Ea(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Hi(e.h,n),ri(n,r,t)}function Ia(e,t){e.ia&&qn(e.ia,(function(e,n){wi(t,n,e)})),e.l&&pi({},(function(e,n){wi(t,n,e)}))}function Ea(e,t,n){n=Math.min(e.i.length,n);var r=e.l?on(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{Yi(l,o,"req"+c+"_")}catch(co){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function Sa(e){e.g||e.u||(e.Z=1,gr(e.Ia,e),e.A=0)}function Ta(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Br(on(e.Ia,e),Da(e,e.A)),e.A++,!0)}function Ca(e){null!=e.B&&(Jt.clearTimeout(e.B),e.B=null)}function Aa(e){e.g=new $r(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=yi(e.sa);wi(t,"RID","rpc"),wi(t,"SID",e.I),wi(t,"CI",e.L?"0":"1"),wi(t,"AID",e.T),wi(t,"TYPE","xmlhttp"),Ia(e,t),e.o&&e.s&&ma(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=xi(yi(t)),n.s=null,n.P=!0,ii(n,e)}function Na(e){null!=e.v&&(Jt.clearTimeout(e.v),e.v=null)}function Pa(e,t){var n=null;if(e.g==t){Na(e),Ca(e),e.g=null;var r=2}else{if(!qi(e.h,t))return;n=t.D,Gi(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;cr(r=Lr(),new Vr(r,n)),xa(e)}else Sa(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(zi(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Br(on(e.Ja,e,t),Da(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ta(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Ra(e,5);break;case 4:Ra(e,10);break;case 3:Ra(e,6);break;default:Ra(e,2)}}function Da(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Ra(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=on(e.kb,e);n||(n=new mi("//www.google.com/images/cleardot.gif"),Jt.location&&"http"==Jt.location.protocol||gi(n,"https"),xi(n)),function(e,t){var n=new Pr;if(Jt.Image){var r=new Image;r.onload=sn(Xi,n,r,"TestLoadImage: loaded",!0,t),r.onerror=sn(Xi,n,r,"TestLoadImage: error",!1,t),r.onabort=sn(Xi,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=sn(Xi,n,r,"TestLoadImage: timeout",!1,t),Jt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ur(2);e.G=0,e.l&&e.l.va(t),Oa(e),wa(e)}function Oa(e){if(e.G=0,e.la=[],e.l){var t=Ki(e.h);0==t.length&&0==e.i.length||(hn(e.la,t),hn(e.la,e.i),e.h.i.length=0,fn(e.i),e.i.length=0),e.l.ua()}}function La(e,t,n){var r=n instanceof mi?yi(n):new mi(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),ki(r,r.m);else{var i=Jt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new mi(null,void 0);r&&gi(a,r),t&&(a.g=t),i&&ki(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&wi(r,n,t),wi(r,"VER",e.ma),Ia(e,r),r}function Ma(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new ia(new Ji({jb:!0})):new ia(e.ra)).Ka(e.H),t}function ja(){}function Fa(){if(_n&&!(10<=Number(Mn)))throw Error("Environmental error: no available transport.")}function Ua(e,t){ur.call(this),this.g=new ga(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!vn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!vn(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new za(this)}function Va(e){Yr.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ba(){Xr.call(this),this.status=1}function za(e){this.g=e}(Wt=ia.prototype).Ka=function(e){this.L=e},Wt.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Wr.g(),this.C=this.u?Gr(this.u):Gr(Wr),this.g.onreadystatechange=on(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void ua(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=m(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Jt.FormData&&e instanceof Jt.FormData,!(0<=ln(sa,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,l=m(n);try{for(l.s();!(u=l.n()).done;){var f=c(u.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ha(this),0<this.B&&((this.K=function(e){return _n&&On()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=on(this.qa,this)):this.A=Ir(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){ua(this,s)}},Wt.qa=function(){"undefined"!=typeof Xt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,cr(this,"timeout"),this.abort(8))},Wt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,cr(this,"complete"),cr(this,"abort"),fa(this))},Wt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fa(this,!0)),ia.X.M.call(this)},Wt.Ha=function(){this.s||(this.F||this.v||this.l?la(this):this.fb())},Wt.fb=function(){la(this)},Wt.aa=function(){try{return 2<da(this)?this.g.status:-1}catch(Ui){return-1}},Wt.fa=function(){try{return this.g?this.g.responseText:""}catch(Ui){return""}},Wt.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ra(t)}},Wt.Ea=function(){return this.m},Wt.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Wt=ga.prototype).ma=8,Wt.G=1,Wt.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new $r(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Kn(n=Hn(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ea(this,t,r),wi(i=yi(this.F),"RID",e),wi(i,"CVER",22),this.D&&wi(i,"X-HTTP-Session-Id",this.D),Ia(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(va(n)))+"&"+r:this.o&&ma(i,this.o,n)),Hi(this.h,t),this.Ya&&wi(i,"TYPE","init"),this.O?(wi(i,"$req",r),wi(i,"SID","null"),t.Z=!0,ri(t,i,null)):ri(t,i,r),this.G=2}}else 3==this.G&&(e?_a(this,e):0==this.i.length||Bi(this.h)||_a(this))},Wt.Ia=function(){if(this.u=null,Aa(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Br(on(this.eb,this),e)}},Wt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ur(10),ba(this),Aa(this))},Wt.cb=function(){null!=this.v&&(this.v=null,ba(this),Ta(this),Ur(19))},Wt.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Ur(2)):(this.j.info("Failed to ping google.com"),Ur(1))},(Wt=ja.prototype).xa=function(){},Wt.wa=function(){},Wt.va=function(){},Wt.ua=function(){},Wt.Ra=function(){},Fa.prototype.g=function(e,t){return new Ua(e,t)},un(Ua,ur),Ua.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Ur(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=La(e,null,e.V),xa(e)},Ua.prototype.close=function(){ka(this.g)},Ua.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=fr(e),e=n);t.i.push(new ji(t.ab++,e)),3==t.G&&xa(t)},Ua.prototype.M=function(){this.g.l=null,delete this.j,ka(this.g),delete this.g,Ua.X.M.call(this)},un(Va,Yr),un(Ba,Xr),un(za,ja),za.prototype.xa=function(){cr(this.g,"a")},za.prototype.wa=function(e){cr(this.g,new Va(e))},za.prototype.va=function(e){cr(this.g,new Ba)},za.prototype.ua=function(){cr(this.g,"b")},Fa.prototype.createWebChannel=Fa.prototype.g,Ua.prototype.send=Ua.prototype.u,Ua.prototype.open=Ua.prototype.m,Ua.prototype.close=Ua.prototype.close,zr.NO_ERROR=0,zr.TIMEOUT=8,zr.HTTP_ERROR=6,qr.COMPLETE="complete",Kr.EventType=Qr,Qr.OPEN="a",Qr.CLOSE="b",Qr.ERROR="c",Qr.MESSAGE="d",ur.prototype.listen=ur.prototype.N,ia.prototype.listenOnce=ia.prototype.O,ia.prototype.getLastError=ia.prototype.Oa,ia.prototype.getLastErrorCode=ia.prototype.Ea,ia.prototype.getStatus=ia.prototype.aa,ia.prototype.getResponseJson=ia.prototype.Sa,ia.prototype.getResponseText=ia.prototype.fa,ia.prototype.send=ia.prototype.da,ia.prototype.setWithCredentials=ia.prototype.Ka;var qa=Yt.createWebChannelTransport=function(){return new Fa},Ha=Yt.getStatEventTarget=function(){return Lr()},Ga=Yt.ErrorCode=zr,Ka=Yt.EventType=qr,Wa=Yt.Event=Rr,Qa=Yt.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Ya=Yt.FetchXmlHttpFactory=Ji,Xa=Yt.WebChannel=Kr,Ja=Yt.XhrIo=ia,$a="@firebase/firestore",Za=function(){function e(t){d(this,e),this.uid=t}return v(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Za.UNAUTHENTICATED=new Za(null),Za.GOOGLE_CREDENTIALS=new Za("google-credentials-uid"),Za.FIRST_PARTY=new Za("first-party-uid"),Za.MOCK_USER=new Za("mock-user");var eo="9.18.0",to=new ye("@firebase/firestore");function no(){return to.logLevel}function ro(e){if(to.logLevel<=le.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(oo);to.debug.apply(to,["Firestore (".concat(eo,"): ").concat(e)].concat(re(i)))}}function io(e){if(to.logLevel<=le.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(oo);to.error.apply(to,["Firestore (".concat(eo,"): ").concat(e)].concat(re(i)))}}function ao(e){if(to.logLevel<=le.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(oo);to.warn.apply(to,["Firestore (".concat(eo,"): ").concat(e)].concat(re(i)))}}function oo(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function so(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(eo,") INTERNAL ASSERTION FAILED: ")+e;throw io(t),new Error(t)}function uo(e,t){e||so()}function co(e,t){return e}var lo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fo=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return v(n)}(z),ho=v((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),po=v((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),vo=function(){function e(){d(this,e)}return v(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Za.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),mo=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return v(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),yo=function(){function e(t){d(this,e),this.t=t,this.currentUser=Za.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return v(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new ho;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new ho,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){ro("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(ro("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ho)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ro("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(uo("string"==typeof n.accessToken),new po(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return uo(null===e||"string"==typeof e),new Za(e)}}]),e}(),go=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Za.FIRST_PARTY,this.p=new Map}return v(e,[{key:"I",value:function(){return this.g?this.g():(uo(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),ko=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return v(e,[{key:"getToken",value:function(){return Promise.resolve(new go(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Za.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),bo=v((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),wo=function(){function e(t){d(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return v(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ro("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,ro("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ro("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):ro("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(uo("string"==typeof t.token),e.A=t.token,new bo(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function xo(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var _o=function(){function e(){d(this,e)}return v(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=xo(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Io(e,t){return e<t?-1:e>t?1:0}function Eo(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function So(e){return e+"\0"}var To=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new fo(lo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fo(lo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new fo(lo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fo(lo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return v(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Io(this.nanoseconds,e.nanoseconds):Io(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Co=function(){function e(t){d(this,e),this.timestamp=t}return v(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new To(0,0))}},{key:"max",value:function(){return new e(new To(253402300799,999999999))}}]),e}(),Ao=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&so(),void 0===r?r=t.length-n:r>t.length-n&&so(),this.segments=t,this.offset=n,this.len=r}return v(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),No=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new fo(lo.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,re(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ao),Po=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Do=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Po.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new fo(lo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new fo(lo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new fo(lo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new fo(lo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ao),Ro=function(){function e(t){d(this,e),this.path=t}return v(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===No.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(No.fromString(t))}},{key:"fromName",value:function(t){return new e(No.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(No.emptyPath())}},{key:"comparator",value:function(e,t){return No.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new No(t.slice()))}}]),e}(),Oo=v((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Lo(e){return e.fields.find((function(e){return 2===e.kind}))}function Mo(e){return e.fields.filter((function(e){return 2!==e.kind}))}Oo.UNKNOWN_ID=-1;var jo=v((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var Fo=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return v(e,null,[{key:"empty",value:function(){return new e(0,Bo.min())}}]),e}();function Uo(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Co.fromTimestamp(1e9===r?new To(n+1,0):new To(n,r));return new Bo(i,Ro.empty(),t)}function Vo(e){return new Bo(e.readTime,e.key,-1)}var Bo=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return v(e,null,[{key:"min",value:function(){return new e(Co.min(),Ro.empty(),-1)}},{key:"max",value:function(){return new e(Co.max(),Ro.empty(),-1)}}]),e}();function zo(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Ro.comparator(e.documentKey,t.documentKey))?n:Io(e.largestBatchId,t.largestBatchId)}var qo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ho=function(){function e(){d(this,e),this.onCommittedListeners=[]}return v(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Go(e){return Ko.apply(this,arguments)}function Ko(){return Ko=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===lo.FAILED_PRECONDITION&&t.message===qo){e.next=2;break}throw t;case 2:ro("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Ko.apply(this,arguments)}var Wo=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return v(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&so(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=m(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Qo=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new ho,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new Jo(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=ns(e.target.error);r.P.reject(new Jo(t,n))}}return v(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(ro("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Zo(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Jo(n,t)}}}]),e}(),Yo=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(L())&&io("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return v(e,[{key:"O",value:function(){var e=ae(te().mark((function e(t){var n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ro("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Jo(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new fo(lo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new fo(lo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Jo(t,n))},i.onupgradeneeded=function(e){ro("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.F(t,i.transaction,e.oldVersion,n.version).next((function(){ro("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ae(te().mark((function e(t,n,r,i){var a,o,s,u,c=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,s=te().mark((function e(){var n,s,u,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.O(t);case 4:return c.db=e.sent,n=Qo.open(c.db,t,a?"readonly":"readwrite",r),s=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),Wo.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.v;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),u=e.t1,l="FirebaseError"!==u.name&&o<3,ro("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(u)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if("object"!==typeof(u=e.t0)){e.next=7;break}return e.abrupt("return",u.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ro("SimpleDb","Removing database:",e),es(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!V())return!1;if(e.N())return!0;var t=L(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DRIVE_POST:"https://script.google.com/macros/s/AKfycbzmEdEii_ZDulRHpzP0O6KIiZ3i36iwchg3UIrwcMyBxxgGegG-QIfcz8YaCct_ZUkj/exec",REACT_APP_LIKE:"https://cofi.saludturnos.com/like",REACT_APP_POST:"https://cofi.saludturnos.com/post",REACT_APP_POSTS:"https://cofi.saludturnos.com/posts",REACT_APP_POST_DELETE:"https://cofi.saludturnos.com/postDelete",REACT_APP_PUSHER_APP_CLUSTER:"sa1",REACT_APP_PUSHER_APP_KEY:"abbe6a2231dc2dd25217",REACT_APP_USER:"https://cofi.saludturnos.com/user",REACT_APP_USERNAME:"https://cofi.saludturnos.com/username",REACT_APP_USER_DATA:"https://cofi.saludturnos.com/userData/"})||void 0===e?void 0:e.$)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Xo=function(){function e(t){d(this,e),this.q=t,this.U=!1,this.K=null}return v(e,[{key:"isDone",get:function(){return this.U}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.U=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return es(this.q.delete())}}]),e}(),Jo=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,lo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return v(n)}(fo);function $o(e){return"IndexedDbTransactionError"===e.name}var Zo=function(){function e(t){d(this,e),this.store=t}return v(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ro("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ro("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),es(n)}},{key:"add",value:function(e){return ro("SimpleDb","ADD",this.store.name,e,e),es(this.store.add(e))}},{key:"get",value:function(e){var t=this;return es(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ro("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ro("SimpleDb","DELETE",this.store.name,e),es(this.store.delete(e))}},{key:"count",value:function(){return ro("SimpleDb","COUNT",this.store.name),es(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Wo((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Wo((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){ro("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Z=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new Wo((function(n,r){t.onerror=function(e){var t=ns(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new Wo((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Xo(i),o=t(i.primaryKey,i.value,a);if(o instanceof Wo){var s=o.catch((function(e){return a.done(),Wo.reject(e)}));n.push(s)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return Wo.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Z?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function es(e){return new Wo((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=ns(e.target.error);n(t)}}))}var ts=!1;function ns(e){var t=Yo.D(L());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new fo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return ts||(ts=!0,setTimeout((function(){throw r}),0)),r}}return e}var rs=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.et=n,this.task=null}return v(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;ro("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=ro,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!$o(e.t4)){e.next=17;break}ro("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Go(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),is=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return v(e,[{key:"st",value:function(){var e=ae(te().mark((function e(){var t,n=this,r=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Wo.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return ro("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return ro("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Vo(t);zo(r,n)>0&&(n=r)})),new Bo(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),as=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return v(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();as.at=-1;var os=v((function e(t,n,r,i,a,o,s,u){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),ss=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return v(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function us(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function cs(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ls(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function fs(e){return null==e}function hs(e){return 0===e&&1/e==-1/0}function ds(e){return"number"==typeof e&&Number.isInteger(e)&&!hs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var ps=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return v(n)}(I(Error));var vs=function(e){function t(e){d(this,t),this.binaryString=e}return v(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Io(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw e instanceof DOMException?new ps("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();vs.EMPTY_BYTE_STRING=new vs("");var ms=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ys(e){if(uo(!!e),"string"==typeof e){var t=0,n=ms.exec(e);if(uo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:gs(e.seconds),nanos:gs(e.nanos)}}function gs(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ks(e){return"string"==typeof e?vs.fromBase64String(e):vs.fromUint8Array(e)}function bs(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ws(e){var t=e.mapValue.fields.__previous_value__;return bs(t)?ws(t):t}function xs(e){var t=ys(e.mapValue.fields.__local_write_time__.timestampValue);return new To(t.seconds,t.nanos)}var _s={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Is={nullValue:"NULL_VALUE"};function Es(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bs(e)?4:Us(e)?9007199254740991:10:so()}function Ss(e,t){if(e===t)return!0;var n=Es(e);if(n!==Es(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xs(e).isEqual(xs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=ys(e.timestampValue),r=ys(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ks(e.bytesValue).isEqual(ks(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return gs(e.geoPointValue.latitude)===gs(t.geoPointValue.latitude)&&gs(e.geoPointValue.longitude)===gs(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return gs(e.integerValue)===gs(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=gs(e.doubleValue),r=gs(t.doubleValue);return n===r?hs(n)===hs(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Eo(e.arrayValue.values||[],t.arrayValue.values||[],Ss);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(us(n)!==us(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ss(n[i],r[i])))return!1;return!0}(e,t);default:return so()}}function Ts(e,t){return void 0!==(e.values||[]).find((function(e){return Ss(e,t)}))}function Cs(e,t){if(e===t)return 0;var n=Es(e),r=Es(t);if(n!==r)return Io(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Io(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=gs(e.integerValue||e.doubleValue),r=gs(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return As(e.timestampValue,t.timestampValue);case 4:return As(xs(e),xs(t));case 5:return Io(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ks(e),r=ks(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Io(n[i],r[i]);if(0!==a)return a}return Io(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Io(gs(e.latitude),gs(t.latitude));return 0!==n?n:Io(gs(e.longitude),gs(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Cs(n[i],r[i]);if(a)return a}return Io(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===_s.mapValue&&t===_s.mapValue)return 0;if(e===_s.mapValue)return 1;if(t===_s.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Io(r[o],a[o]);if(0!==s)return s;var u=Cs(n[r[o]],i[a[o]]);if(0!==u)return u}return Io(r.length,a.length)}(e.mapValue,t.mapValue);default:throw so()}}function As(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Io(e,t);var n=ys(e),r=ys(t),i=Io(n.seconds,r.seconds);return 0!==i?i:Io(n.nanos,r.nanos)}function Ns(e){return Ps(e)}function Ps(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=ys(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ks(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ro.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=m(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Ps(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=m(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Ps(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):so();var t,n}function Ds(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Rs(e){return!!e&&"integerValue"in e}function Os(e){return!!e&&"arrayValue"in e}function Ls(e){return!!e&&"nullValue"in e}function Ms(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function js(e){return!!e&&"mapValue"in e}function Fs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return cs(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Fs(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Fs(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Us(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Vs(e){return"nullValue"in e?Is:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ds(ss.empty(),Ro.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:so()}function Bs(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ds(ss.empty(),Ro.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?_s:so()}function zs(e,t){var n=Cs(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function qs(e,t){var n=Cs(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Hs=v((function e(t,n){d(this,e),this.position=t,this.inclusive=n}));function Gs(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Ro.comparator(Ro.fromName(o.referenceValue),n.key):Cs(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ks(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ss(e.position[n],t.position[n]))return!1;return!0}var Ws=v((function e(){d(this,e)})),Qs=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Cs(t,this.value)):null!==t&&Es(this.value)===Es(t)&&this.matchesComparison(Cs(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return so()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new iu(e,t,r):"array-contains"===t?new uu(e,r):"in"===t?new cu(e,r):"not-in"===t?new lu(e,r):"array-contains-any"===t?new fu(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new au(e,n):new ou(e,n)}}]),n}(Ws),Ys=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).filters=e,i.op=r,i.ft=null,i}return v(n,[{key:"matches",value:function(e){return Xs(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ft||(this.ft=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ft}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.dt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"dt",value:function(e){var t,n=m(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Ws);function Xs(e){return"and"===e.op}function Js(e){return"or"===e.op}function $s(e){return Zs(e)&&Xs(e)}function Zs(e){var t,n=m(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Ys)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function eu(e){if(e instanceof Qs)return e.field.canonicalString()+e.op.toString()+Ns(e.value);if($s(e))return e.filters.map((function(e){return eu(e)})).join(",");var t=e.filters.map((function(e){return eu(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function tu(e,t){return e instanceof Qs?function(e,t){return t instanceof Qs&&e.op===t.op&&e.field.isEqual(t.field)&&Ss(e.value,t.value)}(e,t):e instanceof Ys?function(e,t){return t instanceof Ys&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&tu(n,t.filters[r])}),!0)}(e,t):void so()}function nu(e,t){var n=e.filters.concat(t);return Ys.create(n,e.op)}function ru(e){return e instanceof Qs?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ns(e.value))}(e):e instanceof Ys?function(e){return e.op.toString()+" {"+e.getFilters().map(ru).join(" ,")+"}"}(e):"Filter"}var iu=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=Ro.fromName(i.referenceValue),a}return v(n,[{key:"matches",value:function(e){var t=Ro.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Qs),au=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=su("in",r),i}return v(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Qs),ou=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=su("not-in",r),i}return v(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Qs);function su(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Ro.fromName(e.referenceValue)}))}var uu=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Os(t)&&Ts(t.arrayValue,this.value)}}]),n}(Qs),cu=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ts(this.value.arrayValue,t)}}]),n}(Qs),lu=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return v(n,[{key:"matches",value:function(e){if(Ts(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ts(this.value.arrayValue,t)}}]),n}(Qs),fu=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return v(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Os(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Ts(t.value.arrayValue,e)}))}}]),n}(Qs),hu=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function du(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var pu=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||mu.EMPTY}return v(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,mu.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,mu.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new vu(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new vu(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new vu(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new vu(this.root,e,this.comparator,!0)}}]),e}(),vu=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return v(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),mu=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return v(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw so();if(this.right.isRed())throw so();var e=this.left.check();if(e!==this.right.check())throw so();return e+(this.isRed()?0:1)}}]),e}();mu.EMPTY=null,mu.RED=!0,mu.BLACK=!1,mu.EMPTY=new(function(){function e(){d(this,e),this.size=0}return v(e,[{key:"key",get:function(){throw so()}},{key:"value",get:function(){throw so()}},{key:"color",get:function(){throw so()}},{key:"left",get:function(){throw so()}},{key:"right",get:function(){throw so()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new mu(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var yu=function(){function e(t){d(this,e),this.comparator=t,this.data=new pu(this.comparator)}return v(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new gu(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new gu(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),gu=function(){function e(t){d(this,e),this.iter=t}return v(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ku(e){return e.hasNext()?e.getNext():void 0}var bu=function(){function e(t){d(this,e),this.fields=t,t.sort(Do.comparator)}return v(e,[{key:"unionWith",value:function(t){var n,r=new yu(Do.comparator),i=m(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=m(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=m(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Eo(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),wu=function(){function e(t){d(this,e),this.value=t}return v(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!js(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fs(t)}},{key:"setAll",value:function(e){var t=this,n=Do.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Fs(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());js(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ss(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];js(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){cs(t,(function(t,n){return e[t]=n}));var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Fs(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function xu(e){var t=[];return cs(e.fields,(function(e,n){var r=new Do([e]);if(js(n)){var i=xu(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=m(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new bu(t)}var _u=function(){function e(t,n,r,i,a,o,s){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return v(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Co.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=wu.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=wu.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Co.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Co.min(),Co.min(),Co.min(),wu.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Co.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Co.min(),Co.min(),wu.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Co.min(),Co.min(),wu.empty(),2)}}]),e}(),Iu=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this._t=null}));function Eu(e){return new Iu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Su(e){var t=co(e);if(null===t._t){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return eu(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),fs(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Ns(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Ns(e)})).join(",")),t._t=n}return t._t}function Tu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!du(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!tu(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ks(e.startAt,t.startAt)&&Ks(e.endAt,t.endAt)}function Cu(e){return Ro.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Au(e,t){return e.filters.filter((function(e){return e instanceof Qs&&e.field.isEqual(t)}))}function Nu(e,t,n){var r,i=Is,a=!0,o=m(Au(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=Is,c=!0;switch(s.op){case"<":case"<=":u=Vs(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=Is}zs({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];zs({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Pu(e,t,n){var r,i=_s,a=!0,o=m(Au(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=_s,c=!0;switch(s.op){case">=":case">":u=Bs(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=_s}qs({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];qs({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Du=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.wt=null,this.gt=null,this.startAt,this.endAt}));function Ru(e,t,n,r,i,a,o,s){return new Du(e,t,n,r,i,a,o,s)}function Ou(e){return new Du(e)}function Lu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Mu(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ju(e){var t,n=m(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Fu(e){return null!==e.collectionGroup}function Uu(e){var t=co(e);if(null===t.wt){t.wt=[];var n=ju(t),r=Mu(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new hu(n)),t.wt.push(new hu(Do.keyField(),"asc"));else{var i,a=!1,o=m(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.wt.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new hu(Do.keyField(),u))}}}return t.wt}function Vu(e){var t=co(e);if(!t.gt)if("F"===t.limitType)t.gt=Eu(t.path,t.collectionGroup,Uu(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=m(Uu(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new hu(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new Hs(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new Hs(t.startAt.position,t.startAt.inclusive):null;t.gt=Eu(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.gt}function Bu(e,t){t.getFirstInequalityField(),ju(e);var n=e.filters.concat([t]);return new Du(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function zu(e,t,n){return new Du(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function qu(e,t){return Tu(Vu(e),Vu(t))&&e.limitType===t.limitType}function Hu(e){return"".concat(Su(Vu(e)),"|lt:").concat(e.limitType)}function Gu(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return ru(e)})).join(", "),"]")),fs(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Ns(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Ns(e)})).join(",")),"Target(".concat(t,")")}(Vu(e)),"; limitType=").concat(e.limitType,")")}function Ku(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ro.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=m(Uu(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=m(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Gs(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Uu(e),t))&&!(e.endAt&&!function(e,t,n){var r=Gs(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Uu(e),t))}(e,t)}function Wu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Qu(e){return function(t,n){var r,i=!1,a=m(Uu(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Yu(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Yu(e,t,n){var r=e.field.isKeyField()?Ro.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Cs(r,i):so()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return so()}}function Xu(e,t){if(e.yt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hs(t)?"-0":t}}function Ju(e){return{integerValue:""+e}}function $u(e,t){return ds(t)?Ju(t):Xu(e,t)}var Zu=v((function e(){d(this,e),this._=void 0}));function ec(e,t,n){return e instanceof rc?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ic?ac(e,t):e instanceof oc?sc(e,t):function(e,t){var n=nc(e,t),r=cc(n)+cc(e.It);return Rs(n)&&Rs(e.It)?Ju(r):Xu(e.Tt,r)}(e,t)}function tc(e,t,n){return e instanceof ic?ac(e,t):e instanceof oc?sc(e,t):n}function nc(e,t){return e instanceof uc?Rs(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var rc=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n)}(Zu),ic=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return v(n)}(Zu);function ac(e,t){var n,r=lc(t),i=m(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Ss(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var oc=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return v(n)}(Zu);function sc(e,t){var n,r=lc(t),i=m(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Ss(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var uc=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Tt=e,i.It=r,i}return v(n)}(Zu);function cc(e){return gs(e.integerValue||e.doubleValue)}function lc(e){return Os(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var fc=v((function e(t,n){d(this,e),this.field=t,this.transform=n}));var hc=v((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),dc=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return v(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function pc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var vc=v((function e(){d(this,e)}));function mc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Cc(e.key,dc.none()):new wc(e.key,e.data,dc.none());var n,r=e.data,i=wu.empty(),a=new yu(Do.comparator),o=m(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new xc(e.key,i,new bu(a.toArray()),dc.none())}function yc(e,t,n){e instanceof wc?function(e,t,n){var r=e.value.clone(),i=Ic(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof xc?function(e,t,n){if(pc(e.precondition,t)){var r=Ic(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(_c(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function gc(e,t,n,r){return e instanceof wc?function(e,t,n,r){if(!pc(e.precondition,t))return n;var i=e.value.clone(),a=Ec(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof xc?function(e,t,n,r){if(!pc(e.precondition,t))return n;var i=Ec(e.fieldTransforms,r,t),a=t.data;return a.setAll(_c(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return pc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function kc(e,t){var n,r=null,i=m(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=nc(a.transform,o||null);null!=s&&(null===r&&(r=wu.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function bc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Eo(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ic&&t instanceof ic||e instanceof oc&&t instanceof oc?Eo(e.elements,t.elements,Ss):e instanceof uc&&t instanceof uc?Ss(e.It,t.It):e instanceof rc&&t instanceof rc}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var wc=function(e){k(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vc),xc=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return v(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(vc);function _c(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ic(e,t,n){var r=new Map;uo(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,tc(o,s,n[i]))}return r}function Ec(e,t,n){var r,i=new Map,a=m(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,ec(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Sc,Tc,Cc=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vc),Ac=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vc),Nc=v((function e(t){d(this,e),this.count=t}));function Pc(e){switch(e){default:return so();case lo.CANCELLED:case lo.UNKNOWN:case lo.DEADLINE_EXCEEDED:case lo.RESOURCE_EXHAUSTED:case lo.INTERNAL:case lo.UNAVAILABLE:case lo.UNAUTHENTICATED:return!1;case lo.INVALID_ARGUMENT:case lo.NOT_FOUND:case lo.ALREADY_EXISTS:case lo.PERMISSION_DENIED:case lo.FAILED_PRECONDITION:case lo.ABORTED:case lo.OUT_OF_RANGE:case lo.UNIMPLEMENTED:case lo.DATA_LOSS:return!0}}function Dc(e){if(void 0===e)return io("GRPC error has no .code"),lo.UNKNOWN;switch(e){case Sc.OK:return lo.OK;case Sc.CANCELLED:return lo.CANCELLED;case Sc.UNKNOWN:return lo.UNKNOWN;case Sc.DEADLINE_EXCEEDED:return lo.DEADLINE_EXCEEDED;case Sc.RESOURCE_EXHAUSTED:return lo.RESOURCE_EXHAUSTED;case Sc.INTERNAL:return lo.INTERNAL;case Sc.UNAVAILABLE:return lo.UNAVAILABLE;case Sc.UNAUTHENTICATED:return lo.UNAUTHENTICATED;case Sc.INVALID_ARGUMENT:return lo.INVALID_ARGUMENT;case Sc.NOT_FOUND:return lo.NOT_FOUND;case Sc.ALREADY_EXISTS:return lo.ALREADY_EXISTS;case Sc.PERMISSION_DENIED:return lo.PERMISSION_DENIED;case Sc.FAILED_PRECONDITION:return lo.FAILED_PRECONDITION;case Sc.ABORTED:return lo.ABORTED;case Sc.OUT_OF_RANGE:return lo.OUT_OF_RANGE;case Sc.UNIMPLEMENTED:return lo.UNIMPLEMENTED;case Sc.DATA_LOSS:return lo.DATA_LOSS;default:return so()}}(Tc=Sc||(Sc={}))[Tc.OK=0]="OK",Tc[Tc.CANCELLED=1]="CANCELLED",Tc[Tc.UNKNOWN=2]="UNKNOWN",Tc[Tc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tc[Tc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tc[Tc.NOT_FOUND=5]="NOT_FOUND",Tc[Tc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tc[Tc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tc[Tc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tc[Tc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tc[Tc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tc[Tc.ABORTED=10]="ABORTED",Tc[Tc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tc[Tc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tc[Tc.INTERNAL=13]="INTERNAL",Tc[Tc.UNAVAILABLE=14]="UNAVAILABLE",Tc[Tc.DATA_LOSS=15]="DATA_LOSS";var Rc=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return v(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){cs(this.inner,(function(t,n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ls(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Oc=new pu(Ro.comparator);function Lc(){return Oc}var Mc=new pu(Ro.comparator);function jc(){for(var e=Mc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Fc(e){var t=Mc;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Uc(){return Bc()}function Vc(){return Bc()}function Bc(){return new Rc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var zc=new pu(Ro.comparator),qc=new yu(Ro.comparator);function Hc(){for(var e=qc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Gc=new yu(Io);function Kc(){return Gc}var Wc=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return v(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Qc.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Co.min(),i,Kc(),Lc(),Hc())}}]),e}(),Qc=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return v(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Hc(),Hc(),Hc())}}]),e}(),Yc=v((function e(t,n,r,i){d(this,e),this.Et=t,this.removedTargetIds=n,this.key=r,this.At=i})),Xc=v((function e(t,n){d(this,e),this.targetId=t,this.Rt=n})),Jc=v((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vs.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),$c=function(){function e(){d(this,e),this.Pt=0,this.vt=tl(),this.bt=vs.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}return v(e,[{key:"current",get:function(){return this.Vt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Dt",get:function(){return 0!==this.Pt}},{key:"Ct",get:function(){return this.St}},{key:"xt",value:function(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}},{key:"Nt",value:function(){var e=Hc(),t=Hc(),n=Hc();return this.vt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:so()}})),new Qc(this.bt,this.Vt,e,t,n)}},{key:"kt",value:function(){this.St=!1,this.vt=tl()}},{key:"$t",value:function(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}},{key:"Mt",value:function(e){this.St=!0,this.vt=this.vt.remove(e)}},{key:"Ot",value:function(){this.Pt+=1}},{key:"Ft",value:function(){this.Pt-=1}},{key:"Bt",value:function(){this.St=!0,this.Vt=!0}}]),e}(),Zc=function(){function e(t){d(this,e),this.Lt=t,this.qt=new Map,this.Ut=Lc(),this.Kt=el(),this.Gt=new yu(Io)}return v(e,[{key:"Qt",value:function(e){var t,n=m(e.Et);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.At&&e.At.isFoundDocument()?this.jt(r,e.At):this.zt(r,e.key,e.At)}}catch(s){n.e(s)}finally{n.f()}var i,a=m(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.zt(o,e.key,e.At)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Ht(n);switch(e.state){case 0:t.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||t.removeTarget(n);break;case 3:t.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:t.Jt(n)&&(t.Yt(n),r.xt(e.resumeToken));break;default:so()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((function(e,r){n.Jt(r)&&t(r)}))}},{key:"Zt",value:function(e){var t=e.targetId,n=e.Rt.count,r=this.Xt(t);if(r){var i=r.target;if(Cu(i))if(0===n){var a=new Ro(i.path);this.zt(t,a,_u.newNoDocument(a,Co.min()))}else uo(1===n);else this.te(t)!==n&&(this.Yt(t),this.Gt=this.Gt.add(t))}}},{key:"ee",value:function(e){var t=this,n=new Map;this.qt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&Cu(a.target)){var o=new Ro(a.target.path);null!==t.Ut.get(o)||t.ne(i,o)||t.zt(i,o,_u.newNoDocument(o,e))}r.Ct&&(n.set(i,r.Nt()),r.kt())}}));var r=Hc();this.Kt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new Wc(e,n,this.Gt,this.Ut,r);return this.Ut=Lc(),this.Kt=el(),this.Gt=new yu(Io),i}},{key:"jt",value:function(e,t){if(this.Jt(e)){var n=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}}},{key:"zt",value:function(e,t,n){if(this.Jt(e)){var r=this.Ht(e);this.ne(e,t)?r.$t(t,1):r.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.qt.delete(e)}},{key:"te",value:function(e){var t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Ht(e).Ot()}},{key:"Ht",value:function(e){var t=this.qt.get(e);return t||(t=new $c,this.qt.set(e,t)),t}},{key:"se",value:function(e){var t=this.Kt.get(e);return t||(t=new yu(Io),this.Kt=this.Kt.insert(e,t)),t}},{key:"Jt",value:function(e){var t=null!==this.Xt(e);return t||ro("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}},{key:"Yt",value:function(e){var t=this;this.qt.set(e,new $c),this.Lt.getRemoteKeysForTarget(e).forEach((function(n){t.zt(e,n,null)}))}},{key:"ne",value:function(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}]),e}();function el(){return new pu(Ro.comparator)}function tl(){return new pu(Ro.comparator)}var nl={asc:"ASCENDING",desc:"DESCENDING"},rl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},il={and:"AND",or:"OR"},al=v((function e(t,n){d(this,e),this.databaseId=t,this.yt=n}));function ol(e,t){return e.yt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function sl(e,t){return e.yt?t.toBase64():t.toUint8Array()}function ul(e,t){return ol(e,t.toTimestamp())}function cl(e){return uo(!!e),Co.fromTimestamp(function(e){var t=ys(e);return new To(t.seconds,t.nanos)}(e))}function ll(e,t){return function(e){return new No(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function fl(e){var t=No.fromString(e);return uo(Ol(t)),t}function hl(e,t){return ll(e.databaseId,t.path)}function dl(e,t){var n=fl(t);if(n.get(1)!==e.databaseId.projectId)throw new fo(lo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new fo(lo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ro(yl(n))}function pl(e,t){return ll(e.databaseId,t)}function vl(e){var t=fl(e);return 4===t.length?No.emptyPath():yl(t)}function ml(e){return new No(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function yl(e){return uo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function gl(e,t,n){return{name:hl(e,t),fields:n.value.mapValue.fields}}function kl(e,t,n){var r=dl(e,t.name),i=cl(t.updateTime),a=t.createTime?cl(t.createTime):Co.min(),o=new wu({mapValue:{fields:t.fields}}),s=_u.newFoundDocument(r,i,a,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function bl(e,t){return"found"in t?function(e,t){uo(!!t.found),t.found.name,t.found.updateTime;var n=dl(e,t.found.name),r=cl(t.found.updateTime),i=t.found.createTime?cl(t.found.createTime):Co.min(),a=new wu({mapValue:{fields:t.found.fields}});return _u.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){uo(!!t.missing),uo(!!t.readTime);var n=dl(e,t.missing),r=cl(t.readTime);return _u.newNoDocument(n,r)}(e,t):so()}function wl(e,t){var n;if(t instanceof wc)n={update:gl(e,t.key,t.value)};else if(t instanceof Cc)n={delete:hl(e,t.key)};else if(t instanceof xc)n={update:gl(e,t.key,t.data),updateMask:Rl(t.fieldMask)};else{if(!(t instanceof Ac))return so();n={verify:hl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof rc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ic)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof oc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof uc)return{fieldPath:t.field.canonicalString(),increment:n.It};throw so()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ul(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:so()}(e,t.precondition)),n}function xl(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?dc.updateTime(cl(e.updateTime)):void 0!==e.exists?dc.exists(e.exists):dc.none()}(t.currentDocument):dc.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)uo("REQUEST_TIME"===t.setToServerValue),n=new rc;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new ic(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new oc(i)}else"increment"in t?n=new uc(e,t.increment):so();var a=Do.fromServerFormat(t.fieldPath);return new fc(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=dl(e,t.update.name),a=new wu({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new bu(t.map((function(e){return Do.fromServerFormat(e)})))}(t.updateMask);return new xc(i,a,o,n,r)}return new wc(i,a,n,r)}if(t.delete){var s=dl(e,t.delete);return new Cc(s,n)}if(t.verify){var u=dl(e,t.verify);return new Ac(u,n)}return so()}function _l(e,t){return{documents:[pl(e,t.path)]}}function Il(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=pl(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=pl(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Dl(Ys.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Nl(e.field),direction:Tl(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.yt||fs(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function El(e){var t=vl(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){uo(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Sl(e);return t instanceof Ys&&$s(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new hu(Pl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return fs(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Hs(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Hs(n,t)}(n.endAt)),Ru(t,i,s,o,u,"F",c,l)}function Sl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Pl(e.unaryFilter.field);return Qs.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Pl(e.unaryFilter.field);return Qs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Pl(e.unaryFilter.field);return Qs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Pl(e.unaryFilter.field);return Qs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return so()}}(e):void 0!==e.fieldFilter?function(e){return Qs.create(Pl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return so()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ys.create(e.compositeFilter.filters.map((function(e){return Sl(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return so()}}(e.compositeFilter.op))}(e):so()}function Tl(e){return nl[e]}function Cl(e){return rl[e]}function Al(e){return il[e]}function Nl(e){return{fieldPath:e.canonicalString()}}function Pl(e){return Do.fromServerFormat(e.fieldPath)}function Dl(e){return e instanceof Qs?function(e){if("=="===e.op){if(Ms(e.value))return{unaryFilter:{field:Nl(e.field),op:"IS_NAN"}};if(Ls(e.value))return{unaryFilter:{field:Nl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ms(e.value))return{unaryFilter:{field:Nl(e.field),op:"IS_NOT_NAN"}};if(Ls(e.value))return{unaryFilter:{field:Nl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nl(e.field),op:Cl(e.op),value:e.value}}}(e):e instanceof Ys?function(e){var t=e.getFilters().map((function(e){return Dl(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Al(e.op),filters:t}}}(e):so()}function Rl(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Ol(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Ll(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=jl(t)),t=Ml(e.get(n),t);return jl(t)}function Ml(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function jl(e){return e+"\x01\x01"}function Fl(e){var t=e.length;if(uo(t>=2),2===t)return uo("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),No.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&so(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:so()}a=o+2}return new No(r)}var Ul=["userId","batchId"];function Vl(e,t){return[e,Ll(t)]}function Bl(e,t,n){return[e,Ll(t),n]}var zl={},ql=["prefixPath","collectionGroup","readTime","documentId"],Hl=["prefixPath","collectionGroup","documentId"],Gl=["collectionGroup","readTime","prefixPath","documentId"],Kl=["canonicalId","targetId"],Wl=["targetId","path"],Ql=["path","targetId"],Yl=["collectionId","parent"],Xl=["indexId","uid"],Jl=["uid","sequenceNumber"],$l=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Zl=["indexId","uid","orderedDocumentKey"],ef=["userId","collectionPath","documentId"],tf=["userId","collectionPath","largestBatchId"],nf=["userId","collectionGroup","largestBatchId"],rf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),af=[].concat(re(rf),["documentOverlays"]),of=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sf=of,uf=[].concat(sf,["indexConfiguration","indexState","indexEntries"]),cf=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).re=e,i.currentSequenceNumber=r,i}return v(n)}(Ho);function lf(e,t){var n=co(e);return Yo.M(n.re,t)}var ff=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return v(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&yc(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=m(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=gc(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=m(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=gc(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Vc();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=mc(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Co.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Hc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Eo(this.mutations,e.mutations,(function(e,t){return bc(e,t)}))&&Eo(this.baseMutations,e.baseMutations,(function(e,t){return bc(e,t)}))}}]),e}(),hf=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return v(e,null,[{key:"from",value:function(t,n,r){uo(t.mutations.length===r.length);for(var i=zc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),df=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return v(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),pf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Co.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Co.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vs.EMPTY_BYTE_STRING;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return v(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),vf=v((function e(t){d(this,e),this.oe=t}));function mf(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:yf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:hl(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ol(e,t.version.toTimestamp()),createTime:ol(e,t.createTime.toTimestamp())}}(e.oe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:gf(t.version)};else{if(!t.isUnknownDocument())return so();r.unknownDocument={path:n.path.toArray(),version:gf(t.version)}}return r}function yf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function gf(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function kf(e){var t=new To(e.seconds,e.nanoseconds);return Co.fromTimestamp(t)}function bf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return xl(e.oe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return xl(e.oe,t)})),s=To.fromMillis(t.localWriteTimeMs);return new ff(t.batchId,s,n,o)}function wf(e){var t,n,r=kf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?kf(e.lastLimboFreeSnapshotVersion):Co.min();return void 0!==e.query.documents?(uo(1===(n=e.query).documents.length),t=Vu(Ou(vl(n.documents[0])))):t=function(e){return Vu(El(e))}(e.query),new pf(t,e.targetId,0,e.lastListenSequenceNumber,r,i,vs.fromBase64String(e.resumeToken))}function xf(e,t){var n,r=gf(t.snapshotVersion),i=gf(t.lastLimboFreeSnapshotVersion);n=Cu(t.target)?_l(e.oe,t.target):Il(e.oe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Su(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function _f(e){var t=El({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?zu(t,t.limit,"L"):t}function If(e,t){return new df(t.largestBatchId,xl(e.oe,t.overlayMutation))}function Ef(e,t){var n=t.path.lastSegment();return[e,Ll(t.path.popLast()),n]}function Sf(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:gf(r.readTime),documentKey:Ll(r.documentKey.path),largestBatchId:r.largestBatchId}}var Tf=function(){function e(){d(this,e)}return v(e,[{key:"getBundleMetadata",value:function(e,t){return Cf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:kf(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Cf(e).put({bundleId:(n=t).id,createTime:gf(cl(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Af(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:_f(t.bundledQuery),readTime:kf(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Af(e).put(function(e){return{name:e.name,readTime:gf(cl(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Cf(e){return lf(e,"bundles")}function Af(e){return lf(e,"namedQueries")}var Nf=function(){function e(t,n){d(this,e),this.Tt=t,this.userId=n}return v(e,[{key:"getOverlay",value:function(e,t){var n=this;return Pf(e).get(Ef(this.userId,t)).next((function(e){return e?If(n.Tt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Uc();return Wo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new df(t,a);i.push(r.ce(e,o))})),Wo.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Ll(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Pf(e).Y("collectionPathOverlayIndex",i))})),Wo.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Uc(),a=Ll(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Pf(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=If(r.Tt,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Uc(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Pf(e).X({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=If(a.Tt,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ce",value:function(e,t){return Pf(e).put(function(e,t,n){var r=c(Ef(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:wl(e.oe,n.mutation)}}(this.Tt,this.userId,t))}}],[{key:"ue",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Pf(e){return lf(e,"documentOverlays")}var Df=function(){function e(){d(this,e)}return v(e,[{key:"ae",value:function(e,t){this.he(e,t),t.le()}},{key:"he",value:function(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(gs(e.integerValue));else if("doubleValue"in e){var n=gs(e.doubleValue);isNaN(n)?this.fe(t,13):(this.fe(t,15),hs(n)?t.de(0):t.de(n))}else if("timestampValue"in e){var r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e("".concat(r.seconds||"")),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(ks(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.fe(t,45),t.de(i.latitude||0),t.de(i.longitude||0)}else"mapValue"in e?Us(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):so()}},{key:"we",value:function(e,t){this.fe(t,25),this.Te(e,t)}},{key:"Te",value:function(e,t){t._e(e)}},{key:"pe",value:function(e,t){var n=e.fields||{};this.fe(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.we(a,t),this.he(n[a],t)}}},{key:"Ie",value:function(e,t){var n=e.values||[];this.fe(t,50);var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.he(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ye",value:function(e,t){var n=this;this.fe(t,37),Ro.fromName(e).path.forEach((function(e){n.fe(t,60),n.Te(e,t)}))}},{key:"fe",value:function(e,t){e.de(t)}},{key:"me",value:function(e){e.de(2)}}]),e}();function Rf(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Of(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Rf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Df.Ee=new Df;var Lf=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return v(e,[{key:"Ae",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Re(n.value),n=t.next();this.Pe()}},{key:"ve",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.be(n.value),n=t.next();this.Ve()}},{key:"Se",value:function(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{var a=r.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Pe()}},{key:"De",value:function(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{var a=r.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ve()}},{key:"Ce",value:function(e){var t=this.xe(e),n=Of(t);this.Ne(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"ke",value:function(e){var t=this.xe(e),n=Of(t);this.Ne(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"$e",value:function(){this.Me(255),this.Me(255)}},{key:"Oe",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Be",value:function(){return this.buffer.slice(0,this.position)}},{key:"xe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Re",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}},{key:"be",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Pe",value:function(){this.Me(0),this.Me(1)}},{key:"Ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Me",value:function(e){this.Ne(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.Ne(1),this.buffer[this.position++]=~e}},{key:"Ne",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Mf=function(){function e(t){d(this,e),this.Le=t}return v(e,[{key:"ge",value:function(e){this.Le.Ae(e)}},{key:"_e",value:function(e){this.Le.Se(e)}},{key:"de",value:function(e){this.Le.Ce(e)}},{key:"le",value:function(){this.Le.$e()}}]),e}(),jf=function(){function e(t){d(this,e),this.Le=t}return v(e,[{key:"ge",value:function(e){this.Le.ve(e)}},{key:"_e",value:function(e){this.Le.De(e)}},{key:"de",value:function(e){this.Le.ke(e)}},{key:"le",value:function(){this.Le.Oe()}}]),e}(),Ff=function(){function e(){d(this,e),this.Le=new Lf,this.qe=new Mf(this.Le),this.Ue=new jf(this.Le)}return v(e,[{key:"seed",value:function(e){this.Le.seed(e)}},{key:"Ke",value:function(e){return 0===e?this.qe:this.Ue}},{key:"Be",value:function(){return this.Le.Be()}},{key:"reset",value:function(){this.Le.reset()}}]),e}(),Uf=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return v(e,[{key:"Ge",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Vf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Bf(e.arrayValue,t.arrayValue))?n:0!==(n=Bf(e.directionalValue,t.directionalValue))?n:Ro.comparator(e.documentKey,t.documentKey)}function Bf(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var zf=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Qe=t.orderBy,this.je=[];var n,r=m(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.ze=i:this.je.push(i)}}catch(a){r.e(a)}finally{r.f()}}return v(e,[{key:"We",value:function(e){uo(e.collectionGroup===this.collectionId);var t=Lo(e);if(void 0!==t&&!this.He(t))return!1;for(var n=Mo(e),r=0,i=0;r<n.length&&this.He(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.ze){var a=n[r];if(!this.Je(this.ze,a)||!this.Ye(this.Qe[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Qe.length||!this.Ye(this.Qe[i++],o))return!1}return!0}},{key:"He",value:function(e){var t,n=m(this.je);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ye",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function qf(e){var t,n;if(uo(e instanceof Qs||e instanceof Ys),e instanceof Qs){if(e instanceof cu){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Qs.create(e.field,"==",t)})))||[];return Ys.create(r,"or")}return e}var i=e.filters.map((function(e){return qf(e)}));return Ys.create(i,e.op)}function Hf(e){if(0===e.getFilters().length)return[];var t=Qf(qf(e));return uo(Wf(t)),Gf(t)||Kf(t)?[t]:t.getFilters()}function Gf(e){return e instanceof Qs}function Kf(e){return e instanceof Ys&&$s(e)}function Wf(e){return Gf(e)||Kf(e)||function(e){if(e instanceof Ys&&Js(e)){var t,n=m(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Gf(r)&&!Kf(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Qf(e){if(uo(e instanceof Qs||e instanceof Ys),e instanceof Qs)return e;if(1===e.filters.length)return Qf(e.filters[0]);var t=e.filters.map((function(e){return Qf(e)})),n=Ys.create(t,e.op);return Wf(n=Jf(n))?n:(uo(n instanceof Ys),uo(Xs(n)),uo(n.filters.length>1),n.filters.reduce((function(e,t){return Yf(e,t)})))}function Yf(e,t){var n;return uo(e instanceof Qs||e instanceof Ys),uo(t instanceof Qs||t instanceof Ys),n=e instanceof Qs?t instanceof Qs?function(e,t){return Ys.create([e,t],"and")}(e,t):Xf(e,t):t instanceof Qs?Xf(t,e):function(e,t){if(uo(e.filters.length>0&&t.filters.length>0),Xs(e)&&Xs(t))return nu(e,t.getFilters());var n=Js(e)?e:t,r=Js(e)?t:e,i=n.filters.map((function(e){return Yf(e,r)}));return Ys.create(i,"or")}(e,t),Jf(n)}function Xf(e,t){if(Xs(t))return nu(t,e.getFilters());var n=t.filters.map((function(t){return Yf(e,t)}));return Ys.create(n,"or")}function Jf(e){if(uo(e instanceof Qs||e instanceof Ys),e instanceof Qs)return e;var t=e.getFilters();if(1===t.length)return Jf(t[0]);if(Zs(e))return e;var n=t.map((function(e){return Jf(e)})),r=[];return n.forEach((function(t){t instanceof Qs?r.push(t):t instanceof Ys&&(t.op===e.op?r.push.apply(r,re(t.filters)):r.push(t))})),1===r.length?r[0]:Ys.create(r,e.op)}var $f=function(){function e(){d(this,e),this.Ze=new Zf}return v(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ze.add(t),Wo.resolve()}},{key:"getCollectionParents",value:function(e,t){return Wo.resolve(this.Ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Wo.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Wo.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Wo.resolve(null)}},{key:"getIndexType",value:function(e,t){return Wo.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Wo.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Wo.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Wo.resolve(Bo.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Wo.resolve(Bo.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Wo.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Wo.resolve()}}]),e}(),Zf=function(){function e(){d(this,e),this.index={}}return v(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new yu(No.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new yu(No.comparator)).toArray()}}]),e}(),eh=new Uint8Array(0),th=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.Xe=new Zf,this.tn=new Rc((function(e){return Su(e)}),(function(e,t){return Tu(e,t)})),this.uid=t.uid||""}return v(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:Ll(i)};return nh(e).put(a)}return Wo.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[So(t),""],!1,!0);return nh(e).W(r).next((function(e){var r,i=m(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Fl(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=ih(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=ah(e);return a.next((function(e){o.put(Sf(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=ih(e),r=ah(e),i=rh(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=rh(e),i=!0,a=new Map;return Wo.forEach(this.en(t),(function(t){return n.nn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Hc(),o=[];return Wo.forEach(a,(function(i,a){var s;ro("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Su(t)));var u=function(e,t){var n=Lo(t);if(void 0===n)return null;var r,i=m(Au(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=m(Mo(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=m(Au(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=m(Mo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Nu(e,o.fieldPath,e.startAt):Pu(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Hs(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=m(Mo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Pu(e,o.fieldPath,e.endAt):Nu(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Hs(r,i)}(a,i),h=n.sn(i,a,l),d=n.sn(i,a,f),p=n.rn(i,a,c),v=n.on(i.indexId,u,h,l.inclusive,d,f.inclusive,p);return Wo.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=Ro.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Wo.resolve(null)}))}},{key:"en",value:function(e){var t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:Hf(Ys.create(e.filters,"and")).map((function(t){return Eu(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.tn.set(e,t),t)}},{key:"on",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],f=function(){var u=t?s.un(t[h/c]):eh,f=s.cn(e,u,n[h%c],r),d=s.an(e,u,i[h%c],a),p=o.map((function(t){return s.cn(e,u,t,!0)}));l.push.apply(l,re(s.createRange(f,d,p)))},h=0;h<u;++h)f();return l}},{key:"cn",value:function(e,t,n,r){var i=new Uf(e,Ro.empty(),t,n);return r?i:i.Ge()}},{key:"an",value:function(e,t,n,r){var i=new Uf(e,Ro.empty(),t,n);return r?i.Ge():i}},{key:"nn",value:function(e,t){var n=new zf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=m(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.en(t);return Wo.forEach(i,(function(t){return n.nn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new yu(Do.comparator),r=!1,i=m(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=m(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var s=a.value;s.field.isKeyField()||("array-contains"===s.op||"array-contains-any"===s.op?r=!0:n=n.add(s.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var u,c=m(e.orderBy);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"hn",value:function(e,t){var n,r=new Ff,i=m(Mo(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Ke(a.kind);Df.Ee.ae(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Be()}},{key:"un",value:function(e){var t=new Ff;return Df.Ee.ae(e,t.Ke(0)),t.Be()}},{key:"ln",value:function(e,t){var n=new Ff;return Df.Ee.ae(Ds(this.databaseId,t),n.Ke(function(e){var t=Mo(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Be()}},{key:"rn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Ff);var i,a=0,o=m(Mo(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=m(r);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(this.fn(t,u.fieldPath)&&Os(c))r=this.dn(r,u,c);else{var h=f.Ke(u.kind);Df.Ee.ae(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this._n(r)}},{key:"sn",value:function(e,t,n){return this.rn(e,t,n.position)}},{key:"_n",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Be();return t}},{key:"dn",value:function(e,t,n){var r,i=re(e),a=[],o=m(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=m(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=new Ff;f.seed(l.Be()),Df.Ee.ae(u,f.Ke(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"fn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Qs&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=ih(e),i=ah(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return Wo.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Fo(t.sequenceNumber,new Bo(kf(t.readTime),new Ro(Fl(t.documentKey)),t.largestBatchId)):Fo.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new jo(Do.fromServerFormat(n),r)}));return new Oo(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Io(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=ih(e),a=ah(e);return this.wn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Wo.forEach(t,(function(t){return a.put(Sf(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Wo.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Wo.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Wo.forEach(a,(function(r){return n.mn(e,t,r).next((function(t){var a=n.gn(i,r);return t.isEqual(a)?Wo.resolve():n.yn(e,i,r,t,a)}))}))}))}))}},{key:"pn",value:function(e,t,n,r){return rh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.ln(n,t.key),documentKey:t.key.path.toArray()})}},{key:"In",value:function(e,t,n,r){return rh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.ln(n,t.key),t.key.path.toArray()])}},{key:"mn",value:function(e,t,n){var r=rh(e),i=new yu(Vf);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.ln(n,t)])},(function(e,r){i=i.add(new Uf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"gn",value:function(e,t){var n=new yu(Vf),r=this.hn(t,e);if(null==r)return n;var i=Lo(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Os(a)){var o,s=m(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new Uf(t.indexId,e.key,this.un(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new Uf(t.indexId,e.key,eh,r));return n}},{key:"yn",value:function(e,t,n,r,i){var a=this;ro("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=ku(a),u=ku(o);s||u;){var c=!1,l=!1;if(s&&u){var f=n(s,u);f<0?l=!0:f>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=ku(o)):l?(i(s),s=ku(a)):(s=ku(a),u=ku(o))}}(r,i,Vf,(function(r){o.push(a.pn(e,t,n,r))}),(function(r){o.push(a.In(e,t,n,r))})),Wo.waitFor(o)}},{key:"wn",value:function(e){var t=1;return ah(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Vf(e,t)})).filter((function(e,t,n){return!t||0!==Vf(e,n[t-1])}));var r=[];r.push(e);var i,a=m(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=Vf(o,e),u=Vf(o,t);if(0===s)r[0]=e.Ge();else if(s>0&&u<0)r.push(o),r.push(o.Ge());else if(u>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Tn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,eh,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,eh,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Tn",value:function(e,t){return Vf(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(oh)}},{key:"getMinOffset",value:function(e,t){var n=this;return Wo.mapArray(this.en(t),(function(t){return n.nn(e,t).next((function(e){return e||so()}))})).next(oh)}}]),e}();function nh(e){return lf(e,"collectionParents")}function rh(e){return lf(e,"indexEntries")}function ih(e){return lf(e,"indexConfiguration")}function ah(e){return lf(e,"indexState")}function oh(e){uo(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;zo(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Bo(t.readTime,t.documentKey,n)}var sh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uh=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return v(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function ch(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.X({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){uo(1===s)})));var c,l=[],f=m(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Bl(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Wo.waitFor(a).next((function(){return l}))}function lh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw so();t=e.noDocument}return JSON.stringify(t).length}uh.DEFAULT_COLLECTION_PERCENTILE=10,uh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,uh.DEFAULT=new uh(41943040,uh.DEFAULT_COLLECTION_PERCENTILE,uh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),uh.DISABLED=new uh(-1,0,0);var fh=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.Tt=n,this.indexManager=r,this.referenceDelegate=i,this.En={}}return v(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dh(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=ph(e),o=dh(e);return o.add({}).next((function(s){uo("number"==typeof s);var u,c=new ff(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return wl(e.oe,t)})),i=n.mutations.map((function(t){return wl(e.oe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.Tt,i.userId,c),f=[],h=new yu((function(e,t){return Io(e.canonicalString(),t.canonicalString())})),d=m(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=Bl(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,zl))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.En[s]=c.keys()})),Wo.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return dh(e).get(t).next((function(e){return e?(uo(e.userId===n.userId),bf(n.Tt,e)):null}))}},{key:"An",value:function(e,t){var n=this;return this.En[t]?Wo.resolve(this.En[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.En[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return dh(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(uo(t.batchId>=r),a=bf(n.Tt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return dh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dh(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return bf(t.Tt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Vl(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return ph(e).X({range:i},(function(r,i,o){var s=c(r,3),u=s[0],l=s[1],f=s[2],h=Fl(l);if(u===n.userId&&t.path.isEqual(h))return dh(e).get(f).next((function(e){if(!e)throw so();uo(e.userId===n.userId),a.push(bf(n.Tt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new yu(Io),i=[];return t.forEach((function(t){var a=Vl(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=ph(e).X({range:o},(function(e,i,a){var o=c(e,3),s=o[0],u=o[1],l=o[2],f=Fl(u);s===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(s)})),Wo.waitFor(i).next((function(){return n.Rn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Vl(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new yu(Io);return ph(e).X({range:o},(function(e,t,a){var o=c(e,3),u=o[0],l=o[1],f=o[2],h=Fl(l);u===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.Rn(e,s)}))}},{key:"Rn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(dh(e).get(t).next((function(e){if(null===e)throw so();uo(e.userId===n.userId),r.push(bf(n.Tt,e))})))})),Wo.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return ch(e.re,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Pn(t.batchId)})),Wo.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Pn",value:function(e){delete this.En[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Wo.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return ph(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Fl(e[1]);i.push(a)}else r.done()})).next((function(){uo(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return hh(e,this.userId,t)}},{key:"vn",value:function(e){var t=this;return vh(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ue",value:function(t,n,r,i){return uo(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function hh(e,t,n){var r=Vl(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return ph(e).X({range:a,Z:!0},(function(e,n,r){var a=c(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function dh(e){return lf(e,"mutations")}function ph(e){return lf(e,"documentMutations")}function vh(e){return lf(e,"mutationQueues")}var mh=function(){function e(t){d(this,e),this.bn=t}return v(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Vn",value:function(){return new e(0)}},{key:"Sn",value:function(){return new e(-1)}}]),e}(),yh=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.Tt=n}return v(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Dn(e).next((function(n){var r=new mh(n.highestTargetId);return n.highestTargetId=r.next(),t.Cn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Dn(e).next((function(e){return Co.fromTimestamp(new To(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Dn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Dn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Cn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.xn(e,t).next((function(){return n.Dn(e).next((function(r){return r.targetCount+=1,n.Nn(t,r),n.Cn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.xn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return gh(e).delete(t.targetId)})).next((function(){return n.Dn(e)})).next((function(t){return uo(t.targetCount>0),t.targetCount-=1,n.Cn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return gh(e).X((function(o,s){var u=wf(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return Wo.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return gh(e).X((function(e,n){var r=wf(n);t(r)}))}},{key:"Dn",value:function(e){return kh(e).get("targetGlobalKey").next((function(e){return uo(null!==e),e}))}},{key:"Cn",value:function(e,t){return kh(e).put("targetGlobalKey",t)}},{key:"xn",value:function(e,t){return gh(e).put(xf(this.Tt,t))}},{key:"Nn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Dn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Su(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return gh(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=wf(n);Tu(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=bh(e);return t.forEach((function(t){var o=Ll(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Wo.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=bh(e);return Wo.forEach(t,(function(t){var a=Ll(t.path);return Wo.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=bh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=bh(e),i=Hc();return r.X({range:n,Z:!0},(function(e,t,n){var r=Fl(e[1]),a=new Ro(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Ll(t.path),r=IDBKeyRange.bound([n],[So(n)],!1,!0),i=0;return bh(e).X({index:"documentTargetsIndex",Z:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ie",value:function(e,t){return gh(e).get(t).next((function(e){return e?wf(e):null}))}}]),e}();function gh(e){return lf(e,"targets")}function kh(e){return lf(e,"targetGlobal")}function bh(e){return lf(e,"targetDocuments")}function wh(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],s=a[1],u=Io(r,o);return 0===u?Io(i,s):u}var xh=function(){function e(t){d(this,e),this.kn=t,this.buffer=new yu(wh),this.$n=0}return v(e,[{key:"Mn",value:function(){return++this.$n}},{key:"On",value:function(e){var t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();wh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),_h=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Fn=null}return v(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}},{key:"stop",value:function(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}},{key:"started",get:function(){return null!==this.Fn}},{key:"Bn",value:function(e){var t=this;ro("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Fn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!$o(e.t0)){e.next=12;break}ro("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Go(e.t0);case 14:return e.next=16,t.Bn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Ih=function(){function e(t,n){d(this,e),this.Ln=t,this.params=n}return v(e,[{key:"calculateTargetCount",value:function(e,t){return this.Ln.qn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Wo.resolve(as.at);var r=new xh(t);return this.Ln.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.Ln.Un(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Ln.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Ln.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ro("LruGarbageCollector","Garbage collection skipped; disabled"),Wo.resolve(sh)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ro("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),sh):n.Kn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Ln.getCacheSize(e)}},{key:"Kn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ro("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),no()<=le.DEBUG&&ro("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),Wo.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Eh=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=function(e,t){return new Ih(e,t)}(this,n)}return v(e,[{key:"qn",value:function(e){var t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Gn",value:function(e){var t=0;return this.Un(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Un",value:function(e,t){return this.Qn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Sh(e,n)}},{key:"removeReference",value:function(e,t,n){return Sh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Sh(e,t)}},{key:"jn",value:function(e,t){return function(e,t){var n=!1;return vh(e).tt((function(r){return hh(e,r,t).next((function(e){return e&&(n=!0),Wo.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Qn(e,(function(o,s){if(s<=t){var u=n.jn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Co.min()),bh(e).delete([0,Ll(o.path)])}))}));i.push(u)}})).next((function(){return Wo.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Sh(e,t)}},{key:"Qn",value:function(e,t){var n,r=bh(e),i=as.at;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==as.at&&t(new Ro(Fl(n)),i),i=u,n=s):i=as.at})).next((function(){i!==as.at&&t(new Ro(Fl(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Sh(e,t){return bh(e).put(function(e,t){return{targetId:0,path:Ll(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Th=function(){function e(){d(this,e),this.changes=new Rc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return v(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,_u.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Wo.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Ch=function(){function e(t){d(this,e),this.Tt=t}return v(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Dh(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Dh(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],yf(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=_u.newInvalidDocument(t);return Dh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Rh(t))},(function(e,i){r=n.Wn(t,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r={size:0,document:_u.newInvalidDocument(t)};return Dh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Rh(t))},(function(e,i){r={document:n.Wn(t,i),size:lh(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Lc();return this.Jn(e,t,(function(e,t){var i=n.Wn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Yn",value:function(e,t){var n=this,r=Lc(),i=new pu(Ro.comparator);return this.Jn(e,t,(function(e,t){var a=n.Wn(e,t);r=r.insert(e,a),i=i.insert(e,lh(t))})).next((function(){return{documents:r,Zn:i}}))}},{key:"Jn",value:function(e,t,n){if(t.isEmpty())return Wo.resolve();var r=new yu(Lh);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Rh(r.first()),Rh(r.last())),a=r.getIterator(),o=a.getNext();return Dh(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Ro.fromSegments([].concat(re(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Lh(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(Rh(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),yf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Dh(e).W(IDBKeyRange.bound(o,s,!0)).next((function(e){var n,a=Lc(),o=m(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=i.Wn(Ro.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);u.isFoundDocument()&&(Ku(t,u)||r.has(u.key))&&(a=a.insert(u.key,u))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Lc(),o=Oh(t,n),s=Oh(t,Bo.max());return Dh(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.Wn(Ro.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Nh(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Ph(e).get("remoteDocumentGlobalKey").next((function(e){return uo(!!e),e}))}},{key:"zn",value:function(e,t){return Ph(e).put("remoteDocumentGlobalKey",t)}},{key:"Wn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=kl(e.oe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Ro.fromSegments(t.noDocument.path),i=kf(t.noDocument.readTime);n=_u.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return so();var a=Ro.fromSegments(t.unknownDocument.path),o=kf(t.unknownDocument.version);n=_u.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new To(e[0],e[1]);return Co.fromTimestamp(t)}(t.readTime)),n}(this.Tt,t);if(!n.isNoDocument()||!n.version.isEqual(Co.min()))return n}return _u.newInvalidDocument(e)}}]),e}();function Ah(e){return new Ch(e)}var Nh=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Xn=e,i.trackRemovals=r,i.ts=new Rc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return v(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new yu((function(e,t){return Io(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.ts.get(a);if(n.push(t.Xn.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=mf(t.Xn.Tt,o);i=i.add(a.path.popLast());var c=lh(u);r+=c-s.size,n.push(t.Xn.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=mf(t.Xn.Tt,o.convertToNoDocument(Co.min()));n.push(t.Xn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Xn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Xn.updateMetadata(e,r)),Wo.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Xn.Hn(e,t).next((function(e){return n.ts.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Xn.Yn(e,t).next((function(e){var t=e.documents;return e.Zn.forEach((function(e,r){n.ts.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Th);function Ph(e){return lf(e,"remoteDocumentGlobal")}function Dh(e){return lf(e,"remoteDocumentsV14")}function Rh(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Oh(e,t){var n=t.documentKey.path.toArray();return[e,yf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Lh(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Io(n[a],r[a]))return i;return(i=Io(n.length,r.length))||((i=Io(n[n.length-2],r[r.length-2]))||Io(n[n.length-1],r[r.length-1]))}var Mh=v((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),jh=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return v(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&gc(r.mutation,e,bu.empty(),To.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Hc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hc(),i=Uc();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=jc();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Uc();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Hc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Lc(),a=Bc(),o=Bc();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof xc)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),gc(o.mutation,t,o.mutation.getFieldMask(),To.now())):a.set(t.key,bu.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Mh(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Bc(),i=new pu((function(e,t){return e-t})),a=Hc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=m(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||bu.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||Hc()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=Vc();c.forEach((function(e){if(!a.has(e)){var n=mc(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return Wo.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Ro.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Wo.resolve(Uc()),s=-1,u=a;return o.next((function(t){return Wo.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?Wo.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,Hc())})).next((function(e){return{batchId:s,changes:Fc(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Ro(t)).next((function(e){var t=jc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=jc();return this.indexManager.getCollectionParents(e,i).next((function(o){return Wo.forEach(o,(function(o){var s=function(e,t){return new Du(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,_u.newInvalidDocument(r)))}));var n=jc();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&gc(a.mutation,i,bu.empty(),To.now()),Ku(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Fh=function(){function e(t){d(this,e),this.Tt=t,this.es=new Map,this.ns=new Map}return v(e,[{key:"getBundleMetadata",value:function(e,t){return Wo.resolve(this.es.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.es.set(t.id,{id:(n=t).id,version:n.version,createTime:cl(n.createTime)}),Wo.resolve()}},{key:"getNamedQuery",value:function(e,t){return Wo.resolve(this.ns.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ns.set(t.name,function(e){return{name:e.name,query:_f(e.bundledQuery),readTime:cl(e.readTime)}}(t)),Wo.resolve()}}]),e}(),Uh=function(){function e(){d(this,e),this.overlays=new pu(Ro.comparator),this.ss=new Map}return v(e,[{key:"getOverlay",value:function(e,t){return Wo.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Uc();return Wo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ce(e,t,i)})),Wo.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ss.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ss.delete(n)),Wo.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Uc(),i=t.length+1,a=new Ro(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Wo.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new pu((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Uc(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Uc(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Wo.resolve(u)}},{key:"ce",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ss.get(r.largestBatchId).delete(n.key);this.ss.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new df(t,n));var a=this.ss.get(t);void 0===a&&(a=Hc(),this.ss.set(t,a)),this.ss.set(t,a.add(n.key))}}]),e}(),Vh=function(){function e(){d(this,e),this.rs=new yu(Bh.os),this.us=new yu(Bh.cs)}return v(e,[{key:"isEmpty",value:function(){return this.rs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Bh(e,t);this.rs=this.rs.add(n),this.us=this.us.add(n)}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ls(new Bh(e,t))}},{key:"fs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ds",value:function(e){var t=this,n=new Ro(new No([])),r=new Bh(n,e),i=new Bh(n,e+1),a=[];return this.us.forEachInRange([r,i],(function(e){t.ls(e),a.push(e.key)})),a}},{key:"_s",value:function(){var e=this;this.rs.forEach((function(t){return e.ls(t)}))}},{key:"ls",value:function(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}},{key:"ws",value:function(e){var t=new Ro(new No([])),n=new Bh(t,e),r=new Bh(t,e+1),i=Hc();return this.us.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Bh(e,0),n=this.rs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Bh=function(){function e(t,n){d(this,e),this.key=t,this.gs=n}return v(e,null,[{key:"os",value:function(e,t){return Ro.comparator(e.key,t.key)||Io(e.gs,t.gs)}},{key:"cs",value:function(e,t){return Io(e.gs,t.gs)||Ro.comparator(e.key,t.key)}}]),e}(),zh=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new yu(Bh.os)}return v(e,[{key:"checkEmpty",value:function(e){return Wo.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new ff(i,t,n,r);this.mutationQueue.push(a);var o,s=m(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.ps=this.ps.add(new Bh(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return Wo.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Wo.resolve(this.Is(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ts(n),i=r<0?0:r;return Wo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Wo.resolve(0===this.mutationQueue.length?-1:this.ys-1)}},{key:"getAllMutationBatches",value:function(e){return Wo.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Bh(t,0),i=new Bh(t,Number.POSITIVE_INFINITY),a=[];return this.ps.forEachInRange([r,i],(function(e){var t=n.Is(e.gs);a.push(t)})),Wo.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new yu(Io);return t.forEach((function(e){var t=new Bh(e,0),i=new Bh(e,Number.POSITIVE_INFINITY);n.ps.forEachInRange([t,i],(function(e){r=r.add(e.gs)}))})),Wo.resolve(this.Es(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Ro.isDocumentKey(i)||(i=i.child(""));var a=new Bh(new Ro(i),0),o=new yu(Io);return this.ps.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gs)),!0)}),a),Wo.resolve(this.Es(o))}},{key:"Es",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Is(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;uo(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ps;return Wo.forEach(t.mutations,(function(i){var a=new Bh(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ps=r}))}},{key:"Pn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Bh(t,0),r=this.ps.firstAfterOrEqual(n);return Wo.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Wo.resolve()}},{key:"As",value:function(e,t){return this.Ts(e)}},{key:"Ts",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Is",value:function(e){var t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),qh=function(){function e(t){d(this,e),this.Rs=t,this.docs=new pu(Ro.comparator),this.size=0}return v(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Rs(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Wo.resolve(n?n.document.mutableCopy():_u.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Lc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():_u.newInvalidDocument(e))})),Wo.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Lc(),a=t.path,o=new Ro(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||zo(Vo(l),n)<=0||(r.has(l.key)||Ku(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Wo.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){so()}},{key:"Ps",value:function(e,t){return Wo.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Hh(this)}},{key:"getSize",value:function(e){return Wo.resolve(this.size)}}]),e}(),Hh=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).Xn=e,r}return v(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Xn.addEntry(e,i)):t.Xn.removeEntry(r)})),Wo.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Xn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Xn.getEntries(e,t)}}]),n}(Th),Gh=function(){function e(t){d(this,e),this.persistence=t,this.vs=new Rc((function(e){return Su(e)}),Tu),this.lastRemoteSnapshotVersion=Co.min(),this.highestTargetId=0,this.bs=0,this.Vs=new Vh,this.targetCount=0,this.Ss=mh.Vn()}return v(e,[{key:"forEachTarget",value:function(e,t){return this.vs.forEach((function(e,n){return t(n)})),Wo.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Wo.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Wo.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ss.next(),Wo.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Wo.resolve()}},{key:"xn",value:function(e){this.vs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ss=new mh(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.xn(t),this.targetCount+=1,Wo.resolve()}},{key:"updateTargetData",value:function(e,t){return this.xn(t),Wo.resolve()}},{key:"removeTargetData",value:function(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,Wo.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.vs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.vs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Wo.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Wo.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.vs.get(t)||null;return Wo.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Vs.hs(t,n),Wo.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Vs.fs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Wo.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Vs.ds(t),Wo.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Vs.ws(t);return Wo.resolve(n)}},{key:"containsKey",value:function(e,t){return Wo.resolve(this.Vs.containsKey(t))}}]),e}(),Kh=function(){function e(t,n){var r=this;d(this,e),this.Ds={},this.overlays={},this.Cs=new as(0),this.xs=!1,this.xs=!0,this.referenceDelegate=t(this),this.Ns=new Gh(this),this.indexManager=new $f,this.remoteDocumentCache=new qh((function(e){return r.referenceDelegate.ks(e)})),this.Tt=new vf(n),this.$s=new Fh(this.Tt)}return v(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.xs=!1,Promise.resolve()}},{key:"started",get:function(){return this.xs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Uh,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ds[e.toKey()];return n||(n=new zh(t,this.referenceDelegate),this.Ds[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ns}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.$s}},{key:"runTransaction",value:function(e,t,n){var r=this;ro("MemoryPersistence","Starting transaction:",e);var i=new Wh(this.Cs.next());return this.referenceDelegate.Ms(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Fs",value:function(e,t){return Wo.or(Object.values(this.Ds).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Wh=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return v(n)}(Ho),Qh=function(){function e(t){d(this,e),this.persistence=t,this.Bs=new Vh,this.Ls=null}return v(e,[{key:"Us",get:function(){if(this.Ls)return this.Ls;throw so()}},{key:"addReference",value:function(e,t,n){return this.Bs.addReference(n,t),this.Us.delete(n.toString()),Wo.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Bs.removeReference(n,t),this.Us.add(n.toString()),Wo.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Us.add(t.toString()),Wo.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Bs.ds(t.targetId).forEach((function(e){return n.Us.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Us.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ms",value:function(){this.Ls=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wo.forEach(this.Us,(function(r){var i=Ro.fromPath(r);return t.Ks(e,i).next((function(e){e||n.removeEntry(i,Co.min())}))})).next((function(){return t.Ls=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ks(e,t).next((function(e){e?n.Us.delete(t.toString()):n.Us.add(t.toString())}))}},{key:"ks",value:function(e){return 0}},{key:"Ks",value:function(e,t){var n=this;return Wo.or([function(){return Wo.resolve(n.Bs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Fs(e,t)}])}}],[{key:"qs",value:function(t){return new e(t)}}]),e}(),Yh=function(){function e(t){d(this,e),this.Tt=t}return v(e,[{key:"F",value:function(e,t,n,r){var i=this,a=new Qo("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ul,{unique:!0}),e.createObjectStore("documentMutations")}(e),Xh(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Wo.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Xh(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Co.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ul,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Wo.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Gs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.js(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ws(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:ef});t.createIndex("collectionPathOverlayIndex",tf,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",nf,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:ql});t.createIndex("documentKeyIndex",Hl),t.createIndex("collectionGroupIndex",Gl)}(e)})).next((function(){return i.Hs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Js(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Xl}).createIndex("sequenceNumberIndex",Jl,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:$l}).createIndex("documentKeyIndex",Zl,{unique:!1})}(e)}))),o}},{key:"Qs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=lh(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Gs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return Wo.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return Wo.forEach(r,(function(r){uo(r.userId===n.userId);var i=bf(t.Tt,r);return ch(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"js",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new No(n),o=function(e){return[0,Ll(e)]}(a);r.push(t.get(o).next((function(n){return n?Wo.resolve():function(n){return t.put({targetId:0,path:Ll(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Wo.waitFor(r)}))}))}},{key:"zs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Yl});var n=t.store("collectionParents"),r=new Zf,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Ll(i)})}};return t.store("remoteDocuments").X({Z:!0},(function(e,t){var n=new No(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Z:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],Fl(r));return i(a.popLast())}))}))}},{key:"Ws",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=wf(r),a=xf(t.Tt,i);return n.put(a)}))}},{key:"Hs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Ro(No.fromString(i.document.name).popFirst(5)):i.noDocument?Ro.fromSegments(i.noDocument.path):i.unknownDocument?Ro.fromSegments(i.unknownDocument.path):so()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return Wo.waitFor(r)}))}},{key:"Js",value:function(e,t){var n=this,r=t.store("mutations"),i=Ah(this.Tt),a=new Kh(Qh.qs,this.Tt.oe);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Hc();bf(n.Tt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Wo.forEach(r,(function(e,r){var o=new Za(r),s=Nf.ue(n.Tt,o),u=a.getIndexManager(o),c=fh.ue(o,n.Tt,u,a.referenceDelegate);return new jh(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new cf(t,as.at),e).next()}))}))}}]),e}();function Xh(e){e.createObjectStore("targetDocuments",{keyPath:Wl}).createIndex("documentTargetsIndex",Ql,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Kl,{unique:!0}),e.createObjectStore("targetGlobal")}var Jh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$h=function(){function e(t,n,r,i,a,o,s,u,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ys=a,this.window=o,this.document=s,this.Zs=c,this.Xs=l,this.ti=f,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=function(e){return Promise.resolve()},!e.C())throw new fo(lo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Eh(this,i),this.oi=n+"main",this.Tt=new vf(u),this.ui=new Yo(this.oi,this.ti,new Yh(this.Tt)),this.Ns=new yh(this.referenceDelegate,this.Tt),this.remoteDocumentCache=Ah(this.Tt),this.$s=new Tf,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===l&&io("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return v(e,[{key:"start",value:function(){var e=this;return this.ai().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new fo(lo.FAILED_PRECONDITION,Jh);return e.hi(),e.li(),e.fi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ns.getHighestSequenceNumber(t)}))})).then((function(t){e.Cs=new as(t,e.Zs)})).then((function(){e.xs=!0})).catch((function(t){return e.ui&&e.ui.close(),Promise.reject(t)}))}},{key:"di",value:function(e){var t=this;return this.ri=function(){var n=ae(te().mark((function n(r){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ui.L(function(){var t=ae(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ai();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ai",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return ed(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e._i(t).next((function(t){t||(e.isPrimary=!1,e.Ys.enqueueRetryable((function(){return e.ri(!1)})))}))})).next((function(){return e.wi(t)})).next((function(n){return e.isPrimary&&!n?e.mi(t).next((function(){return!1})):!!n&&e.gi(t).next((function(){return!0}))}))})).catch((function(t){if($o(t))return ro("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ro("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Ys.enqueueRetryable((function(){return e.ri(t)})),e.isPrimary=t}))}},{key:"_i",value:function(e){var t=this;return Zh(e).get("owner").next((function(e){return Wo.resolve(t.yi(e))}))}},{key:"pi",value:function(e){return ed(e).delete(this.clientId)}},{key:"Ii",value:function(){var e=ae(te().mark((function e(){var t,n,r,i,a=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ti(this.ii,18e5)){e.next=6;break}return this.ii=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=lf(e,"clientMetadata");return t.W().next((function(e){var n=a.Ei(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Wo.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ci){n=m(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ci.removeItem(this.Ai(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fi",value:function(){var e=this;this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ai().then((function(){return e.Ii()})).then((function(){return e.fi()}))}))}},{key:"yi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"wi",value:function(e){var t=this;return this.Xs?Wo.resolve(!0):Zh(e).get("owner").next((function(n){if(null!==n&&t.Ti(n.leaseTimestampMs,5e3)&&!t.Ri(n.ownerId)){if(t.yi(n)&&t.networkEnabled)return!0;if(!t.yi(n)){if(!n.allowTabSynchronization)throw new fo(lo.FAILED_PRECONDITION,Jh);return!1}}return!(!t.networkEnabled||!t.inForeground)||ed(e).W().next((function(e){return void 0===t.Ei(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ro("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ae(te().mark((function e(){var t=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.xs=!1,this.Pi(),this.si&&(this.si.cancel(),this.si=null),this.vi(),this.bi(),e.next=7,this.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new cf(e,as.at);return t.mi(n).next((function(){return t.pi(n)}))}));case 7:this.ui.close(),this.Vi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ei",value:function(e,t){var n=this;return e.filter((function(e){return n.Ti(e.updateTimeMs,t)&&!n.Ri(e.clientId)}))}},{key:"Si",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return ed(t).W().next((function(t){return e.Ei(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.xs}},{key:"getMutationQueue",value:function(e,t){return fh.ue(e,this.Tt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ns}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new th(e,this.Tt.oe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Nf.ue(this.Tt,e)}},{key:"getBundleCache",value:function(){return this.$s}},{key:"runTransaction",value:function(e,t,n){var r=this;ro("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=15===(i=this.ti)?uf:14===i?sf:13===i?of:12===i?af:11===i?rf:void so();return this.ui.runTransaction(e,o,s,(function(i){return a=new cf(i,r.Cs?r.Cs.next():as.at),"readwrite-primary"===t?r._i(a).next((function(e){return!!e||r.wi(a)})).next((function(t){if(!t)throw io("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Ys.enqueueRetryable((function(){return r.ri(!1)})),new fo(lo.FAILED_PRECONDITION,qo);return n(a)})).next((function(e){return r.gi(a).next((function(){return e}))})):r.Di(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Di",value:function(e){var t=this;return Zh(e).get("owner").next((function(e){if(null!==e&&t.Ti(e.leaseTimestampMs,5e3)&&!t.Ri(e.ownerId)&&!t.yi(e)&&!(t.Xs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new fo(lo.FAILED_PRECONDITION,Jh)}))}},{key:"gi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zh(e).put("owner",t)}},{key:"mi",value:function(e){var t=this,n=Zh(e);return n.get("owner").next((function(e){return t.yi(e)?(ro("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Wo.resolve()}))}},{key:"Ti",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(io("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"hi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=function(){e.Ys.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ai()}))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}},{key:"vi",value:function(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}},{key:"li",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=function(){t.Pi();var e=/(?:Version|Mobile)\/1[456]/;!M()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.Ys.enterRestrictedMode(!0),t.Ys.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ei))}},{key:"bi",value:function(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}},{key:"Ri",value:function(e){var t;try{var n=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return ro("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return io("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Pi",value:function(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(un){io("Failed to set zombie client id.",un)}}},{key:"Vi",value:function(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch(un){}}},{key:"Ai",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return Yo.C()}}]),e}();function Zh(e){return lf(e,"owner")}function ed(e){return lf(e,"clientMetadata")}function td(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var nd=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Ci=r,this.xi=i}return v(e,null,[{key:"Ni",value:function(t,n){var r,i=Hc(),a=Hc(),o=m(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),rd=function(){function e(){d(this,e),this.ki=!1}return v(e,[{key:"initialize",value:function(e,t){this.$i=e,this.indexManager=t,this.ki=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Mi(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Fi(e,t)}))}},{key:"Mi",value:function(e,t){var n=this;if(Lu(t))return Wo.resolve(null);var r=Vu(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=zu(t,null,"F"),r=Vu(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Hc.apply(void 0,re(i));return n.$i.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Bi(t,i);return n.Li(t,o,a,r.readTime)?n.Mi(e,zu(t,null,"F")):n.qi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return Lu(t)||r.isEqual(Co.min())?this.Fi(e,t):this.$i.getDocuments(e,n).next((function(a){var o=i.Bi(t,a);return i.Li(t,o,n,r)?i.Fi(e,t):(no()<=le.DEBUG&&ro("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Gu(t)),i.qi(e,o,t,Uo(r,-1)))}))}},{key:"Bi",value:function(e,t){var n=new yu(Qu(e));return t.forEach((function(t,r){Ku(e,r)&&(n=n.add(r))})),n}},{key:"Li",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Fi",value:function(e,t){return no()<=le.DEBUG&&ro("QueryEngine","Using full collection scan to execute query:",Gu(t)),this.$i.getDocumentsMatchingQuery(e,t,Bo.min())}},{key:"qi",value:function(e,t,n,r){return this.$i.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),id=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Ui=n,this.Tt=i,this.Ki=new pu(Io),this.Gi=new Rc((function(e){return Su(e)}),Tu),this.Qi=new Map,this.ji=t.getRemoteDocumentCache(),this.Ns=t.getTargetCache(),this.$s=t.getBundleCache(),this.zi(r)}return v(e,[{key:"zi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jh(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ki)}))}}]),e}();function ad(e,t,n,r){return new id(e,t,n,r)}function od(e,t){return sd.apply(this,arguments)}function sd(){return sd=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.zi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=Hc(),u=m(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=m(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){u.e(b)}finally{u.f()}var d,p=m(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,g=m(v.mutations);try{for(g.s();!(y=g.n()).done;){var k=y.value;s=s.add(k.key)}}catch(b){g.e(b)}finally{g.f()}}}catch(b){p.e(b)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{Wi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),sd.apply(this,arguments)}function ud(e,t){var n=co(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ji.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Wo.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);uo(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Hc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function cd(e){var t=co(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ns.getLastRemoteSnapshotVersion(e)}))}function ld(e,t){var n=co(e),r=t.snapshotVersion,i=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ji.newChangeBuffer({trackRemovals:!0});i=n.Ki;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Ns.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Ns.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(vs.EMPTY_BYTE_STRING,Co.min()).withLastLimboFreeSnapshotVersion(Co.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Ns.updateTargetData(e,c))}}));var s=Lc(),u=Hc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(fd(e,a,t.documentUpdates).next((function(e){s=e.Hi,u=e.Ji}))),!r.isEqual(Co.min())){var c=n.Ns.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ns.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Wo.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ki=i,e}))}function fd(e,t,n){var r=Hc(),i=Hc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Lc();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Co.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):ro("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Hi:r,Ji:i}}))}function hd(e,t){var n=co(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function dd(e,t){var n=co(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ns.getTargetData(e,t).next((function(i){return i?(r=i,Wo.resolve(r)):n.Ns.allocateTargetId(e).next((function(i){return r=new pf(t,i,0,e.currentSequenceNumber),n.Ns.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ki.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(e.targetId,e),n.Gi.set(t,e.targetId)),e}))}function pd(e,t,n){return vd.apply(this,arguments)}function vd(){return vd=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=co(t),a=i.Ki.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),$o(e.t1)){e.next=12;break}throw e.t1;case 12:ro("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ki=i.Ki.remove(n),i.Gi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),vd.apply(this,arguments)}function md(e,t,n){var r=co(e),i=Co.min(),a=Hc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=co(e),i=r.Gi.get(n);return void 0!==i?Wo.resolve(r.Ki.get(i)):r.Ns.getTargetData(t,n)}(r,e,Vu(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Ui.getDocumentsMatchingQuery(e,t,n?i:Co.min(),n?a:Hc())})).next((function(e){return kd(r,Wu(t),e),{documents:e,Yi:a}}))}))}function yd(e,t){var n=co(e),r=co(n.Ns),i=n.Ki.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ie(e,t).next((function(e){return e?e.target:null}))}))}function gd(e,t){var n=co(e),r=n.Qi.get(t)||Co.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ji.getAllFromCollectionGroup(e,t,Uo(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return kd(n,t,e),e}))}function kd(e,t,n){var r=e.Qi.get(t)||Co.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Qi.set(t,r)}function bd(e,t,n,r){return wd.apply(this,arguments)}function wd(){return wd=ae(te().mark((function e(t,n,r,i){var a,o,s,u,c,l,f,h,d,p;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=co(t),o=Hc(),s=Lc(),u=m(r);try{for(u.s();!(c=u.n()).done;)l=c.value,f=n.Zi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Xi(l)).setReadTime(n.tr(l.metadata.readTime)),s=s.insert(f,h)}catch(v){u.e(v)}finally{u.f()}return d=a.ji.newChangeBuffer({trackRemovals:!0}),e.next=7,dd(a,function(e){return Vu(Ou(No.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return fd(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.Ns.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Ns.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Hi,t.Ji)})).next((function(){return t.Hi}))}))})));case 9:case"end":return e.stop()}}),e)}))),wd.apply(this,arguments)}function xd(e,t){return _d.apply(this,arguments)}function _d(){return _d=ae(te().mark((function e(t,n){var r,i,a,o=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Hc(),e.next=3,dd(t,Vu(_f(n.bundledQuery)));case 3:return i=e.sent,a=co(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=cl(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.$s.saveNamedQuery(e,n);var o=i.withResumeToken(vs.EMPTY_BYTE_STRING,t);return a.Ki=a.Ki.insert(o.targetId,o),a.Ns.updateTargetData(e,o).next((function(){return a.Ns.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Ns.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.$s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),_d.apply(this,arguments)}function Id(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Ed(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Sd(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Td=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return v(e,[{key:"nr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"er",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new fo(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(io("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Cd=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return v(e,[{key:"nr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"er",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new fo(i.error.code,i.error.message))),a?new e(t,i.state,r):(io("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Ad=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return v(e,null,[{key:"er",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Kc(),o=0;i&&o<r.activeTargetIds.length;++o)i=ds(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(io("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Nd=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return v(e,null,[{key:"er",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(io("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Pd=function(){function e(){d(this,e),this.activeTargetIds=Kc()}return v(e,[{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"ir",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"nr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Dd=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.Ys=n,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new pu(Io),this.started=!1,this.hr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.lr=Id(this.persistenceKey,this.rr),this.dr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.rr,new Pd),this._r=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.wr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.mr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.gr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.yr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}return v(e,[{key:"start",value:function(){var e=ae(te().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f,h=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Si();case 2:t=e.sent,n=m(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.rr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Id(this.persistenceKey,i)))&&(o=Ad.er(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.pr(),(s=this.storage.getItem(this.gr))&&(u=this.Ir(s))&&this.Tr(u),c=m(this.hr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.cr(f)}catch(d){c.e(d)}finally{c.f()}this.hr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.dr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Er(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ar(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ar(e,t,n),this.Rr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Sd(this.persistenceKey,e));if(n){var r=Cd.er(e,n);r&&(t=r.state)}}return this.Pr.sr(e),this.pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Pr.ir(e),this.pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Pr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Sd(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.vr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Rr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ro("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ro("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ro("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"cr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ro("SharedClientState","EVENT",n.key,n.newValue),n.key===this.lr)return void io("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable(ae(te().mark((function e(){var r,i,a,o,s,u,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t._r.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Sr(n.key),e.abrupt("return",t.Dr(r,null));case 6:if(!(i=t.Cr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Dr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.wr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Nr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.kr(a));case 16:e.next=41;break;case 18:if(!t.mr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.$r(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.gr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.Ir(n.newValue))){e.next=30;break}return e.abrupt("return",t.Tr(s));case 30:e.next=41;break;case 32:if(n.key!==t.dr){e.next=37;break}u=function(e){var t=as.at;if(null!=e)try{var n=JSON.parse(e);uo("number"==typeof n),t=n}catch(e){io("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==as.at&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.yr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.hr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Pr",get:function(){return this.ar.get(this.rr)}},{key:"pr",value:function(){this.setItem(this.lr,this.Pr.nr())}},{key:"Ar",value:function(e,t,n){var r=new Td(this.currentUser,e,t,n),i=Ed(this.persistenceKey,this.currentUser,e);this.setItem(i,r.nr())}},{key:"Rr",value:function(e){var t=Ed(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.rr,onlineState:e};this.storage.setItem(this.gr,JSON.stringify(t))}},{key:"vr",value:function(e,t,n){var r=Sd(this.persistenceKey,e),i=new Cd(e,t,n);this.setItem(r,i.nr())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}},{key:"Sr",value:function(e){var t=this._r.exec(e);return t?t[1]:null}},{key:"Cr",value:function(e,t){var n=this.Sr(e);return Ad.er(n,t)}},{key:"Nr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Td.er(new Za(i),r,t)}},{key:"$r",value:function(e,t){var n=this.mr.exec(e),r=Number(n[1]);return Cd.er(r,t)}},{key:"Ir",value:function(e){return Nd.er(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"kr",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Br(t.batchId,t.state,t.error));case 2:ro("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}},{key:"Dr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Er(this.ar),a=this.Er(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.qr(o,s).then((function(){n.ar=r}))}},{key:"Tr",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Er",value:function(e){var t=Kc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Rd=function(){function e(){d(this,e),this.Ur=new Pd,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return v(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Kr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.ir(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Kr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new Pd,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Od=function(){function e(){d(this,e)}return v(e,[{key:"Gr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Ld=function(){function e(){var t=this;d(this,e),this.Qr=function(){return t.jr()},this.zr=function(){return t.Wr()},this.Hr=[],this.Jr()}return v(e,[{key:"Gr",value:function(e){this.Hr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}},{key:"Jr",value:function(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}},{key:"jr",value:function(){ro("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=m(this.Hr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){ro("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=m(this.Hr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Md=null;function jd(){return null===Md?Md=268435456+Math.round(2147483648*Math.random()):Md++,"0x"+Md.toString(16)}var Fd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Ud=function(){function e(t){d(this,e),this.Yr=t.Yr,this.Zr=t.Zr}return v(e,[{key:"Xr",value:function(e){this.eo=e}},{key:"no",value:function(e){this.so=e}},{key:"onMessage",value:function(e){this.io=e}},{key:"close",value:function(){this.Zr()}},{key:"send",value:function(e){this.Yr(e)}},{key:"ro",value:function(){this.eo()}},{key:"oo",value:function(e){this.so(e)}},{key:"uo",value:function(e){this.io(e)}}]),e}(),Vd="WebChannelConnection",Bd=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return v(n,[{key:"wo",value:function(e,t,n,r){var i=jd();return new Promise((function(a,o){var s=new Ja;s.setWithCredentials(!0),s.listenOnce(Ka.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Ga.NO_ERROR:var t=s.getResponseJson();ro(Vd,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Ga.TIMEOUT:ro(Vd,"RPC '".concat(e,"' ").concat(i," timed out")),o(new fo(lo.DEADLINE_EXCEEDED,"Request time out"));break;case Ga.HTTP_ERROR:var n=s.getStatus();if(ro(Vd,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(lo).indexOf(t)>=0?t:lo.UNKNOWN}(u.status);o(new fo(c,u.message))}else o(new fo(lo.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new fo(lo.UNAVAILABLE,"Connection failed."));break;default:so()}}finally{ro(Vd,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);ro(Vd,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"yo",value:function(e,t,n){var r=jd(),i=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=qa(),o=Ha(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new Ya({})),this._o(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var u=i.join("");ro(Vd,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),s);var c=a.createWebChannel(u,s),l=!1,f=!1,h=new Ud({Yr:function(t){f?ro(Vd,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(ro(Vd,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),ro(Vd,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Zr:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Xa.EventType.OPEN,(function(){f||ro(Vd,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Xa.EventType.CLOSE,(function(){f||(f=!0,ro(Vd,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.oo())})),d(c,Xa.EventType.ERROR,(function(t){f||(f=!0,ao(Vd,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.oo(new fo(lo.UNAVAILABLE,"The operation could not be completed")))})),d(c,Xa.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];uo(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){ro(Vd,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=Sc[e];if(void 0!==t)return Dc(t)}(s),l=o.message;void 0===u&&(u=lo.INTERNAL,l="Unknown error status: "+s+" with message "+o.message),f=!0,h.oo(new fo(u,l)),c.close()}else ro(Vd,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.uo(i)}})),d(o,Wa.STAT_EVENT,(function(t){t.stat===Qa.PROXY?ro(Vd,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Qa.NOPROXY&&ro(Vd,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.ro()}),0),h}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.co=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return v(e,[{key:"ho",get:function(){return!1}},{key:"lo",value:function(e,t,n,r,i){var a=jd(),o=this.fo(e,t);ro("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={};return this._o(s,r,i),this.wo(e,o,s,n).then((function(t){return ro("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw ao("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"mo",value:function(e,t,n,r,i,a){return this.lo(e,t,n,r,i)}},{key:"_o",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+eo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"fo",value:function(e,t){var n=Fd[e];return"".concat(this.co,"/v1/").concat(t,":").concat(n)}}]),e}());function zd(){return"undefined"!=typeof window?window:null}function qd(){return"undefined"!=typeof document?document:null}function Hd(e){return new al(e,!0)}var Gd=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.Ys=t,this.timerId=n,this.po=r,this.Io=i,this.To=a,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}return v(e,[{key:"reset",value:function(){this.Eo=0}},{key:"Po",value:function(){this.Eo=this.To}},{key:"vo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,n-r);i>0&&ro("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Eo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,(function(){return t.Ro=Date.now(),e()})),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}},{key:"Vo",value:function(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}},{key:"cancel",value:function(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Eo}}]),e}(),Kd=function(){function e(t,n,r,i,a,o,s,u){d(this,e),this.Ys=t,this.So=r,this.Do=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new Gd(t,n)}return v(e,[{key:"$o",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.$o(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.ko.reset()}},{key:"Bo",value:function(){var e=this;this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,(function(){return e.Lo()})))}},{key:"qo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Lo",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"Ko",value:function(){this.No&&(this.No.cancel(),this.No=null)}},{key:"close",value:function(){var e=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,4!==t?this.ko.reset():n&&n.code===lo.RESOURCE_EXHAUSTED?(io(n.toString()),io("Using maximum backoff delay to prevent overloading the backend."),this.ko.Po()):n&&n.code===lo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Go(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.no(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Go",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Co===n&&e.jo(i,a)}),(function(n){t((function(){var t=new fo(lo.UNKNOWN,"Fetching auth token failed: "+n.message);return e.zo(t)}))}))}},{key:"jo",value:function(e,t){var n=this,r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.No=n.Ys.enqueueAfterDelay(n.Do,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.no((function(e){r((function(){return n.zo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.ko.vo(ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"zo",value:function(e){return ro("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Qo",value:function(e){var t=this;return function(n){t.Ys.enqueueAndForget((function(){return t.Co===e?n():(ro("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Wd=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).Tt=o,u}return v(n,[{key:"Wo",value:function(e,t){return this.connection.yo("Listen",e,t)}},{key:"onMessage",value:function(e){this.ko.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:so()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.yt?(uo(void 0===t||"string"==typeof t),vs.fromBase64String(t||"")):(uo(void 0===t||t instanceof Uint8Array),vs.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?lo.UNKNOWN:Dc(e.code);return new fo(t,e.message||"")}(o);n=new Jc(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=dl(e,u.document.name),l=cl(u.document.updateTime),f=u.document.createTime?cl(u.document.createTime):Co.min(),h=new wu({mapValue:{fields:u.document.fields}}),d=_u.newFoundDocument(c,l,f,h),p=u.targetIds||[],v=u.removedTargetIds||[];n=new Yc(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=dl(e,m.document),g=m.readTime?cl(m.readTime):Co.min(),k=_u.newNoDocument(y,g),b=m.removedTargetIds||[];n=new Yc([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=dl(e,w.document),_=w.removedTargetIds||[];n=new Yc([],_,x,null)}else{if(!("filter"in t))return so();t.filter;var I=t.filter;I.targetId;var E=I.count||0,S=new Nc(E),T=I.targetId;n=new Xc(T,S)}return n}(this.Tt,e),n=function(e){if(!("targetChange"in e))return Co.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Co.min():t.readTime?cl(t.readTime):Co.min()}(e);return this.listener.Ho(t,n)}},{key:"Jo",value:function(e){var t={};t.database=ml(this.Tt),t.addTarget=function(e,t){var n,r=t.target;return(n=Cu(r)?{documents:_l(e,r)}:{query:Il(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=sl(e,t.resumeToken):t.snapshotVersion.compareTo(Co.min())>0&&(n.readTime=ol(e,t.snapshotVersion.toTimestamp())),n}(this.Tt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return so()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.Tt,e);n&&(t.labels=n),this.qo(t)}},{key:"Yo",value:function(e){var t={};t.database=ml(this.Tt),t.removeTarget=e,this.qo(t)}}]),n}(Kd),Qd=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).Tt=o,u.Zo=!1,u}return v(n,[{key:"Xo",get:function(){return this.Zo}},{key:"start",value:function(){this.Zo=!1,this.lastStreamToken=void 0,Kt(b(n.prototype),"start",this).call(this)}},{key:"Go",value:function(){this.Zo&&this.tu([])}},{key:"Wo",value:function(e,t){return this.connection.yo("Write",e,t)}},{key:"onMessage",value:function(e){if(uo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();var t=function(e,t){return e&&e.length>0?(uo(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?cl(e.updateTime):cl(t);return n.isEqual(Co.min())&&(n=cl(t)),new hc(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=cl(e.commitTime);return this.listener.eu(n,t)}return uo(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}},{key:"su",value:function(){var e={};e.database=ml(this.Tt),this.qo(e)}},{key:"tu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return wl(t.Tt,e)}))};this.qo(n)}}]),n}(Kd),Yd=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.Tt=a,o.iu=!1,o}return v(n,[{key:"ru",value:function(){if(this.iu)throw new fo(lo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"lo",value:function(e,t,n){var r=this;return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],s=a[1];return r.connection.lo(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===lo.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new fo(lo.UNKNOWN,e.toString())}))}},{key:"mo",value:function(e,t,n,r){var i=this;return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),s=o[0],u=o[1];return i.connection.mo(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===lo.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new fo(lo.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.iu=!0}}]),n}(function(){return v((function e(){d(this,e)}))}());var Xd=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}return v(e,[{key:"au",value:function(){var e=this;0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.uu=null,e.lu("Backend didn't respond within 10 seconds."),e.hu("Offline"),Promise.resolve()})))}},{key:"fu",value:function(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.hu("Offline")))}},{key:"set",value:function(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}},{key:"hu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"lu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.cu?(io(t),this.cu=!1):ro("OnlineStateTracker",t)}},{key:"du",value:function(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}]),e}(),Jd=v((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=a,this.yu.Gr((function(e){r.enqueueAndForget(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=up(o),!e.t0){e.next=5;break}return ro("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=co(t)).mu.add(4),e.next=4,ep(n);case 4:return n.pu.set("Unknown"),n.mu.delete(4),e.next=8,$d(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.pu=new Xd(r,i)}));function $d(e){return Zd.apply(this,arguments)}function Zd(){return Zd=ae(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!up(t)){e.next=18;break}n=m(t.gu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Zd.apply(this,arguments)}function ep(e){return tp.apply(this,arguments)}function tp(){return tp=ae(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=m(t.gu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),tp.apply(this,arguments)}function np(e,t){var n=co(e);n.wu.has(t.targetId)||(n.wu.set(t.targetId,t),sp(n)?op(n):jp(n).Mo()&&ip(n,t))}function rp(e,t){var n=co(e),r=jp(n);n.wu.delete(t),r.Mo()&&ap(n,t),0===n.wu.size&&(r.Mo()?r.Bo():up(n)&&n.pu.set("Unknown"))}function ip(e,t){e.Iu.Ot(t.targetId),jp(e).Jo(t)}function ap(e,t){e.Iu.Ot(t),jp(e).Yo(t)}function op(e){e.Iu=new Zc({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ie:function(t){return e.wu.get(t)||null}}),jp(e).start(),e.pu.au()}function sp(e){return up(e)&&!jp(e).$o()&&e.wu.size>0}function up(e){return 0===co(e).mu.size}function cp(e){e.Iu=void 0}function lp(e){return fp.apply(this,arguments)}function fp(){return fp=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.wu.forEach((function(e,n){ip(t,e)}));case 1:case"end":return e.stop()}}),e)}))),fp.apply(this,arguments)}function hp(e,t){return dp.apply(this,arguments)}function dp(){return dp=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cp(t),sp(t)?(t.pu.fu(n),op(t)):t.pu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),dp.apply(this,arguments)}function pp(e,t,n){return vp.apply(this,arguments)}function vp(){return vp=ae(te().mark((function e(t,n,r){var i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.pu.set("Online"),!(n instanceof Jc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ae(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=m(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.wu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.wu.delete(o),t.Iu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ro("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,mp(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Yc?t.Iu.Qt(n):n instanceof Xc?t.Iu.Zt(n):t.Iu.Wt(n),r.isEqual(Co.min())){e.next=29;break}return e.prev=14,e.next=17,cd(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Iu.ee(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.wu.get(r);i&&e.wu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.wu.get(t);if(n){e.wu.set(t,n.withResumeToken(vs.EMPTY_BYTE_STRING,n.snapshotVersion)),ap(e,t);var r=new pf(n.target,t,1,n.sequenceNumber);ip(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ro("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,mp(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),vp.apply(this,arguments)}function mp(e,t,n){return yp.apply(this,arguments)}function yp(){return yp=ae(te().mark((function e(t,n,r){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($o(n)){e.next=2;break}throw n;case 2:return t.mu.add(1),e.next=5,ep(t);case 5:t.pu.set("Offline"),r||(r=function(){return cd(t.localStore)}),t.asyncQueue.enqueueRetryable(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ro("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.mu.delete(1),e.next=6,$d(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),yp.apply(this,arguments)}function gp(e,t){return t().catch((function(n){return mp(e,n,t)}))}function kp(e){return bp.apply(this,arguments)}function bp(){return bp=ae(te().mark((function e(t){var n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=co(t),r=Fp(n),i=n._u.length>0?n._u[n._u.length-1].batchId:-1;case 2:if(!wp(n)){e.next=19;break}return e.prev=3,e.next=6,hd(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n._u.length&&r.Bo(),e.abrupt("break",19);case 10:i=a.batchId,xp(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,mp(n,e.t0);case 17:e.next=2;break;case 19:_p(n)&&Ip(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),bp.apply(this,arguments)}function wp(e){return up(e)&&e._u.length<10}function xp(e,t){e._u.push(t);var n=Fp(e);n.Mo()&&n.Xo&&n.tu(t.mutations)}function _p(e){return up(e)&&!Fp(e).$o()&&e._u.length>0}function Ip(e){Fp(e).start()}function Ep(e){return Sp.apply(this,arguments)}function Sp(){return Sp=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fp(t).su();case 1:case"end":return e.stop()}}),e)}))),Sp.apply(this,arguments)}function Tp(e){return Cp.apply(this,arguments)}function Cp(){return Cp=ae(te().mark((function e(t){var n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Fp(t),r=m(t._u);try{for(r.s();!(i=r.n()).done;)a=i.value,n.tu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Cp.apply(this,arguments)}function Ap(e,t,n){return Np.apply(this,arguments)}function Np(){return Np=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t._u.shift(),a=hf.from(i,n,r),e.next=3,gp(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,kp(t);case 5:case"end":return e.stop()}}),e)}))),Np.apply(this,arguments)}function Pp(e,t){return Dp.apply(this,arguments)}function Dp(){return Dp=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Fp(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=ae(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pc(i=n.code)||i===lo.ABORTED){e.next=7;break}return r=t._u.shift(),Fp(t).Fo(),e.next=5,gp(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,kp(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:_p(t)&&Ip(t);case 5:case"end":return e.stop()}}),e)}))),Dp.apply(this,arguments)}function Rp(e,t){return Op.apply(this,arguments)}function Op(){return Op=ae(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=co(t)).asyncQueue.verifyOperationInProgress(),ro("RemoteStore","RemoteStore received new credentials"),i=up(r),r.mu.add(3),e.next=6,ep(r);case 6:return i&&r.pu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.mu.delete(3),e.next=12,$d(r);case 12:case"end":return e.stop()}}),e)}))),Op.apply(this,arguments)}function Lp(e,t){return Mp.apply(this,arguments)}function Mp(){return Mp=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=co(t),!n){e.next=7;break}return r.mu.delete(2),e.next=5,$d(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.mu.add(2),e.next=12,ep(r);case 12:r.pu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Mp.apply(this,arguments)}function jp(e){return e.Tu||(e.Tu=function(e,t,n){var r=co(e);return r.ru(),new Wd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.Tt,n)}(e.datastore,e.asyncQueue,{Xr:lp.bind(null,e),no:hp.bind(null,e),Ho:pp.bind(null,e)}),e.gu.push(function(){var t=ae(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Tu.Fo(),sp(e)?op(e):e.pu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Tu.stop();case 6:cp(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}function Fp(e){return e.Eu||(e.Eu=function(e,t,n){var r=co(e);return r.ru(),new Qd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.Tt,n)}(e.datastore,e.asyncQueue,{Xr:Ep.bind(null,e),no:Pp.bind(null,e),nu:Tp.bind(null,e),eu:Ap.bind(null,e)}),e.gu.push(function(){var t=ae(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Eu.Fo(),t.next=4,kp(e);case 4:t.next=9;break;case 6:return t.next=8,e.Eu.stop();case 8:e._u.length>0&&(ro("RemoteStore","Stopping write stream with ".concat(e._u.length," pending writes")),e._u=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Eu}var Up=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ho,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return v(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fo(lo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Vp(e,t){if(io("AsyncQueue","".concat(t,": ").concat(e)),$o(e))return new fo(lo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Bp=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||Ro.comparator(e.key,n.key)}:function(e,t){return Ro.comparator(e.key,t.key)},this.keyedMap=jc(),this.sortedSet=new pu(this.comparator)}return v(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),zp=function(){function e(){d(this,e),this.Au=new pu(Ro.comparator)}return v(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Au.get(t);n?0!==e.type&&3===n.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==n.type?this.Au=this.Au.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Au=this.Au.remove(t):1===e.type&&2===n.type?this.Au=this.Au.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):so():this.Au=this.Au.insert(t,e)}},{key:"Ru",value:function(){var e=[];return this.Au.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),qp=function(){function e(t,n,r,i,a,o,s,u,c){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return v(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Bp.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Hp=v((function e(){d(this,e),this.Pu=void 0,this.listeners=[]})),Gp=v((function e(){d(this,e),this.queries=new Rc((function(e){return Hu(e)}),qu),this.onlineState="Unknown",this.vu=new Set}));function Kp(e,t){return Wp.apply(this,arguments)}function Wp(){return Wp=ae(te().mark((function e(t,n){var r,i,a,o,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=co(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Hp),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Pu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Vp(e.t0,"Initialization of query '".concat(Gu(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Pu&&n.Vu(o.Pu)&&$p(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Wp.apply(this,arguments)}function Qp(e,t){return Yp.apply(this,arguments)}function Yp(){return Yp=ae(te().mark((function e(t,n){var r,i,a,o,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=co(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Yp.apply(this,arguments)}function Xp(e,t){var n,r=co(e),i=!1,a=m(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=m(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.Pu=o}}}catch(f){a.e(f)}finally{a.f()}i&&$p(r)}function Jp(e,t,n){var r=co(e),i=r.queries.get(t);if(i){var a,o=m(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function $p(e){e.vu.forEach((function(e){e.next()}))}var Zp=function(){function e(t,n,r){d(this,e),this.query=t,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}return v(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=m(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new qp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Du?this.xu(e)&&(this.Su.next(e),a=!0):this.Nu(e,this.onlineState)&&(this.ku(e),a=!0),this.Cu=e,a}},{key:"onError",value:function(e){this.Su.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}},{key:"Nu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.$u||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"xu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"ku",value:function(e){e=qp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}]),e}(),ev=function(){function e(t,n){d(this,e),this.Mu=t,this.byteLength=n}return v(e,[{key:"Ou",value:function(){return"metadata"in this.Mu}}]),e}(),tv=function(){function e(t){d(this,e),this.Tt=t}return v(e,[{key:"Zi",value:function(e){return dl(this.Tt,e)}},{key:"Xi",value:function(e){return e.metadata.exists?kl(this.Tt,e.document,!1):_u.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}},{key:"tr",value:function(e){return cl(e)}}]),e}(),nv=function(){function e(t,n,r){d(this,e),this.Fu=t,this.localStore=n,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rv(t)}return v(e,[{key:"Bu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;var n=No.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Lu",value:function(e){var t,n=new Map,r=new tv(this.Tt),i=m(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.Zi(a.metadata.name),u=m(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||Hc()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ae(te().mark((function e(){var t,n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bd(this.localStore,new tv(this.Tt),this.documents,this.Fu.id);case 2:t=e.sent,n=this.Lu(this.documents),r=m(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,xd(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,qu:this.collectionGroups,Uu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function rv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var iv=v((function e(t){d(this,e),this.key=t})),av=v((function e(t){d(this,e),this.key=t})),ov=function(){function e(t,n){d(this,e),this.query=t,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Hc(),this.mutatedKeys=Hc(),this.ju=Qu(t),this.zu=new Bp(this.ju)}return v(e,[{key:"Wu",get:function(){return this.Ku}},{key:"Hu",value:function(e,t){var n=this,r=t?t.Ju:new zp,i=t?t.zu:this.zu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ku(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Yu(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.ju(f,u)>0||c&&n.ju(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{zu:o,Ju:r,Li:s,mutatedKeys:a}}},{key:"Yu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;var a=e.Ju.Ru();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return so()}};return n(e)-n(t)}(e.type,t.type)||r.ju(e.doc,t.doc)})),this.Zu(n);var o=t?this.Xu():[],s=0===this.Qu.size&&this.current?1:0,u=s!==this.Gu;return this.Gu=s,0!==a.length||u?{snapshot:new qp(this.query,e.zu,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),tc:o}:{tc:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new zp,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}},{key:"ec",value:function(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}},{key:"Zu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Ku=t.Ku.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Ku=t.Ku.delete(e)})),this.current=e.current)}},{key:"Xu",value:function(){var e=this;if(!this.current)return[];var t=this.Qu;this.Qu=Hc(),this.zu.forEach((function(t){e.ec(t.key)&&(e.Qu=e.Qu.add(t.key))}));var n=[];return t.forEach((function(t){e.Qu.has(t)||n.push(new av(t))})),this.Qu.forEach((function(e){t.has(e)||n.push(new iv(e))})),n}},{key:"nc",value:function(e){this.Ku=e.Yi,this.Qu=Hc();var t=this.Hu(e.documents);return this.applyChanges(t,!0)}},{key:"sc",value:function(){return qp.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}]),e}(),sv=v((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),uv=v((function e(t){d(this,e),this.key=t,this.ic=!1})),cv=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.rc={},this.oc=new Rc((function(e){return Hu(e)}),qu),this.uc=new Map,this.cc=new Set,this.ac=new pu(Ro.comparator),this.hc=new Map,this.lc=new Vh,this.fc={},this.dc=new Map,this._c=mh.Sn(),this.onlineState="Unknown",this.wc=void 0}return v(e,[{key:"isPrimaryClient",get:function(){return!0===this.wc}}]),e}();function lv(e,t){return fv.apply(this,arguments)}function fv(){return fv=ae(te().mark((function e(t,n){var r,i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=rm(t),!(o=r.oc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.sc(),e.next=15;break;case 6:return e.next=8,dd(r.localStore,Vu(n));case 8:return s=e.sent,r.isPrimaryClient&&np(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,hv(r,n,i,"current"===u,s.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),fv.apply(this,arguments)}function hv(e,t,n,r,i){return dv.apply(this,arguments)}function dv(){return dv=ae(te().mark((function e(t,n,r,i,a){var o,s,u,c,l,f;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.mc=function(e,n,r){return function(){var e=ae(te().mark((function e(t,n,r,i){var a,o,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Hu(r),e.t0=a.Li,!e.t0){e.next=6;break}return e.next=5,md(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Hu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Rv(t,n.targetId,s.tc),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,md(t.localStore,n,!0);case 3:return o=e.sent,s=new ov(n,o.Yi),u=s.Hu(o.documents),c=Qc.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),Rv(t,r,l.tc),f=new sv(n,r,s),e.abrupt("return",(t.oc.set(n,f),t.uc.has(r)?t.uc.get(r).push(n):t.uc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),dv.apply(this,arguments)}function pv(e,t){return vv.apply(this,arguments)}function vv(){return vv=ae(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=co(t),i=r.oc.get(n),!((a=r.uc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.uc.set(i.targetId,a.filter((function(e){return!qu(e,n)}))),void r.oc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,pd(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),rp(r.remoteStore,i.targetId),Pv(r,i.targetId)})).catch(Go);case 9:e.next=14;break;case 11:return Pv(r,i.targetId),e.next=14,pd(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),vv.apply(this,arguments)}function mv(e,t,n){return yv.apply(this,arguments)}function yv(){return yv=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=im(t),e.prev=1,e.next=4,function(e,t){var n,r,i=co(e),a=To.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Hc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=Lc(),u=Hc();return i.ji.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=m(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=kc(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new xc(c.key,l,xu(l.value.mapValue),dc.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Fc(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.fc[e.currentUser.toKey()];r||(r=new pu(Io)),r=r.insert(t,n),e.fc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Mv(i,a.changes);case 9:return e.next=11,kp(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Vp(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),yv.apply(this,arguments)}function gv(e,t){return kv.apply(this,arguments)}function kv(){return kv=ae(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.prev=1,e.next=4,ld(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.hc.get(t);n&&(uo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ic=!0:e.modifiedDocuments.size>0?uo(n.ic):e.removedDocuments.size>0&&(uo(n.ic),n.ic=!1))})),e.next=8,Mv(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Go(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),kv.apply(this,arguments)}function bv(e,t,n){var r=co(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.oc.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=co(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=m(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&$p(n)}(r.eventManager,t),i.length&&r.rc.Ho(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function wv(e,t,n){return xv.apply(this,arguments)}function xv(){return xv=ae(te().mark((function e(t,n,r){var i,a,o,s,u,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=co(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.hc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new pu(Ro.comparator)).insert(o,_u.newNoDocument(o,Co.min())),u=Hc().add(o),c=new Wc(Co.min(),new Map,new yu(Io),s,u),e.next=9,gv(i,c);case 9:i.ac=i.ac.remove(o),i.hc.delete(n),Lv(i),e.next=16;break;case 14:return e.next=16,pd(i.localStore,n,!1).then((function(){return Pv(i,n,r)})).catch(Go);case 16:case"end":return e.stop()}}),e)}))),xv.apply(this,arguments)}function _v(e,t){return Iv.apply(this,arguments)}function Iv(){return Iv=ae(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),i=n.batch.batchId,e.prev=1,e.next=4,ud(r.localStore,n);case 4:return a=e.sent,Nv(r,i,null),Av(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Mv(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Go(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Iv.apply(this,arguments)}function Ev(e,t,n){return Sv.apply(this,arguments)}function Sv(){return Sv=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=co(t),e.prev=1,e.next=4,function(e,t){var n=co(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return uo(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Nv(i,n,r),Av(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Mv(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Go(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Sv.apply(this,arguments)}function Tv(e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=ae(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return up((r=co(t)).remoteStore)||ro("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=co(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.dc.get(i)||[]).push(n),r.dc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Vp(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Cv.apply(this,arguments)}function Av(e,t){(e.dc.get(t)||[]).forEach((function(e){e.resolve()})),e.dc.delete(t)}function Nv(e,t,n){var r=co(e),i=r.fc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.fc[r.currentUser.toKey()]=i}}function Pv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=m(e.uc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.oc.delete(a),n&&e.rc.gc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.uc.delete(t),e.isPrimaryClient&&e.lc.ds(t).forEach((function(t){e.lc.containsKey(t)||Dv(e,t)}))}function Dv(e,t){e.cc.delete(t.path.canonicalString());var n=e.ac.get(t);null!==n&&(rp(e.remoteStore,n),e.ac=e.ac.remove(t),e.hc.delete(n),Lv(e))}function Rv(e,t,n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof iv?(e.lc.addReference(a.key,t),Ov(e,a)):a instanceof av?(ro("SyncEngine","Document no longer in limbo: "+a.key),e.lc.removeReference(a.key,t),e.lc.containsKey(a.key)||Dv(e,a.key)):so()}}catch(o){i.e(o)}finally{i.f()}}function Ov(e,t){var n=t.key,r=n.path.canonicalString();e.ac.get(n)||e.cc.has(r)||(ro("SyncEngine","New document in limbo: "+n),e.cc.add(r),Lv(e))}function Lv(e){for(;e.cc.size>0&&e.ac.size<e.maxConcurrentLimboResolutions;){var t=e.cc.values().next().value;e.cc.delete(t);var n=new Ro(No.fromString(t)),r=e._c.next();e.hc.set(r,new uv(n)),e.ac=e.ac.insert(n,r),np(e.remoteStore,new pf(Vu(Ou(n.path)),r,2,as.at))}}function Mv(e,t,n){return jv.apply(this,arguments)}function jv(){return jv=ae(te().mark((function e(t,n,r){var i,a,o,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=co(t),a=[],o=[],s=[],e.t0=i.oc.isEmpty(),e.t0){e.next=9;break}return i.oc.forEach((function(e,t){s.push(i.mc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=nd.Ni(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.rc.Ho(a),e.next=9,function(){var e=ae(te().mark((function e(t,n){var r,i,a,o,s,u,c,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Wo.forEach(n,(function(t){return Wo.forEach(t.Ci,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Wo.forEach(t.xi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),$o(e.t0)){e.next=10;break}throw e.t0;case 10:ro("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=m(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Ki.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ki=r.Ki.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),jv.apply(this,arguments)}function Fv(e,t){return Uv.apply(this,arguments)}function Uv(){return Uv=ae(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=co(t)).currentUser.isEqual(n)){e.next=11;break}return ro("SyncEngine","User change. New user:",n.toKey()),e.next=5,od(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.dc.forEach((function(e){e.forEach((function(e){e.reject(new fo(lo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.dc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Mv(r,i.Wi);case 11:case"end":return e.stop()}}),e)}))),Uv.apply(this,arguments)}function Vv(e,t){var n=co(e),r=n.hc.get(t);if(r&&r.ic)return Hc().add(r.key);var i=Hc(),a=n.uc.get(t);if(!a)return i;var o,s=m(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.oc.get(u);i=i.unionWith(c.view.Wu)}}catch(l){s.e(l)}finally{s.f()}return i}function Bv(e,t){return zv.apply(this,arguments)}function zv(){return zv=ae(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.next=3,md(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.nc(i),e.abrupt("return",(r.isPrimaryClient&&Rv(r,n.targetId,a.tc),a));case 6:case"end":return e.stop()}}),e)}))),zv.apply(this,arguments)}function qv(e,t){return Hv.apply(this,arguments)}function Hv(){return Hv=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.abrupt("return",gd(r.localStore,n).then((function(e){return Mv(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Hv.apply(this,arguments)}function Gv(e,t,n,r){return Kv.apply(this,arguments)}function Kv(){return Kv=ae(te().mark((function e(t,n,r,i){var a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=co(t),e.next=3,function(e,t){var n=co(e),r=co(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.An(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Wo.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,kp(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Nv(a,n,i||null),Av(a,n),function(e,t){co(co(e).mutationQueue).Pn(t)}(a.localStore,n)):so();case 11:return e.next=13,Mv(a,o);case 13:e.next=16;break;case 15:ro("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Kv.apply(this,arguments)}function Wv(e,t){return Qv.apply(this,arguments)}function Qv(){return Qv=ae(te().mark((function e(t,n){var r,i,a,o,s,u,c,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(rm(r=co(t)),im(r),!0!==n||!0===r.wc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Yv(r,i.toArray());case 5:return a=e.sent,r.wc=!0,e.next=9,Lp(r.remoteStore,!0);case 9:o=m(a);try{for(o.s();!(s=o.n()).done;)u=s.value,np(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.wc){e.next=25;break}return c=[],l=Promise.resolve(),r.uc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Pv(r,t),pd(r.localStore,t,!0)})),rp(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Yv(r,c);case 21:return function(e){var t=co(e);t.hc.forEach((function(e,n){rp(t.remoteStore,n)})),t.lc._s(),t.hc=new Map,t.ac=new pu(Ro.comparator)}(r),r.wc=!1,e.next=25,Lp(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Qv.apply(this,arguments)}function Yv(e,t,n){return Xv.apply(this,arguments)}function Xv(){return Xv=ae(te().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d,p,v,y,g;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=co(t),a=[],o=[],s=m(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(f=i.uc.get(c))||0===f.length){e.next=34;break}return e.next=11,dd(i.localStore,Vu(f[0]));case 11:l=e.sent,h=m(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.oc.get(p),e.next=20,Bv(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,yd(i.localStore,c);case 36:return g=e.sent,e.next=39,dd(i.localStore,g);case 39:return l=e.sent,e.next=42,hv(i,Jv(g),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.rc.Ho(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Xv.apply(this,arguments)}function Jv(e){return Ru(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function $v(e){var t=co(e);return co(co(t.localStore).persistence).Si()}function Zv(e,t,n,r){return em.apply(this,arguments)}function em(){return em=ae(te().mark((function e(t,n,r,i){var a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=co(t)).wc){e.next=3;break}return e.abrupt("return",void ro("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.uc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,gd(a.localStore,Wu(o[0]));case 10:return s=e.sent,u=Wc.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,vs.EMPTY_BYTE_STRING),e.next=14,Mv(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,pd(a.localStore,n,!0);case 17:return Pv(a,n,i),e.abrupt("break",20);case 19:so();case 20:case"end":return e.stop()}}),e)}))),em.apply(this,arguments)}function tm(e,t,n){return nm.apply(this,arguments)}function nm(){return nm=ae(te().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=rm(t)).wc){e.next=45;break}a=m(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.uc.has(s)){e.next=10;break}return ro("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,yd(i.localStore,s);case 12:return u=e.sent,e.next=15,dd(i.localStore,u);case 15:return c=e.sent,e.next=18,hv(i,Jv(u),c.targetId,!1,c.resumeToken);case 18:np(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=m(r),e.prev=30,h=te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.uc.has(t),!e.t0){e.next=5;break}return e.next=5,pd(i.localStore,t,!1).then((function(){rp(i.remoteStore,t),Pv(i,t)})).catch(Go);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),nm.apply(this,arguments)}function rm(e){var t=co(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=wv.bind(null,t),t.rc.Ho=Xp.bind(null,t.eventManager),t.rc.gc=Jp.bind(null,t.eventManager),t}function im(e){var t=co(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_v.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ev.bind(null,t),t}function am(e,t,n){var r=co(e);(function(){var e=ae(te().mark((function e(t,n,r){var i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=co(e),r=cl(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.$s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(rv(i)),a=new nv(i,t.localStore,n.Tt),e.next=15,n.yc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Bu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.yc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,Mv(t,u.Uu,void 0);case 31:return e.next=33,function(e,t){var n=co(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.$s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.qu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(ao("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var om=function(){function e(){d(this,e),this.synchronizeTabs=!1}return v(e,[{key:"initialize",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Tt=Hd(t.databaseInfo.databaseId),this.sharedClientState=this.Ic(t),this.persistence=this.Tc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ec(t),this.gcScheduler=this.Ac(t,this.localStore),this.indexBackfillerScheduler=this.Rc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ac",value:function(e,t){return null}},{key:"Rc",value:function(e,t){return null}},{key:"Ec",value:function(e){return ad(this.persistence,new rd,e.initialUser,this.Tt)}},{key:"Tc",value:function(e){return new Kh(Qh.qs,this.Tt)}},{key:"Ic",value:function(e){return new Rd}},{key:"terminate",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),sm=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Pc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return v(n,[{key:"initialize",value:function(){var e=ae(te().mark((function e(t){var r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt(b(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Pc.initialize(this,t);case 4:return e.next=6,im(this.Pc.syncEngine);case 6:return e.next=8,kp(this.Pc.remoteStore);case 8:return e.next=10,this.persistence.di((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ec",value:function(e){return ad(this.persistence,new rd,e.initialUser,this.Tt)}},{key:"Ac",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new _h(n,e.asyncQueue,t)}},{key:"Rc",value:function(e,t){var n=new is(t,this.persistence);return new rs(e.asyncQueue,n)}},{key:"Tc",value:function(e){var t=td(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?uh.withCacheSize(this.cacheSizeBytes):uh.DEFAULT;return new $h(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,zd(),qd(),this.Tt,this.sharedClientState,!!this.forceOwnership)}},{key:"Ic",value:function(e){return new Rd}}]),n}(om),um=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Pc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return v(n,[{key:"initialize",value:function(){var e=ae(te().mark((function e(t){var r,i=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt(b(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Pc.syncEngine,e.t0=this.sharedClientState instanceof Dd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Br:Gv.bind(null,r),Lr:Zv.bind(null,r),qr:tm.bind(null,r),Si:$v.bind(null,r),Fr:qv.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.di(function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wv(i.Pc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){var t=zd();if(!Dd.C(t))throw new fo(lo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=td(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Dd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(sm),cm=function(){function e(){d(this,e)}return v(e,[{key:"initialize",value:function(){var e=ae(te().mark((function e(t,n){var r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return bv(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Fv.bind(null,this.syncEngine),e.next=12,Lp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Gp}},{key:"createDatastore",value:function(e){var t,n=Hd(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Bd(t));return function(e,t,n,r){return new Yd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return bv(o.syncEngine,e,0)},a=Ld.C()?new Ld:new Od,new Jd(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new cv(e,t,n,r,i,a);return o&&(s.wc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=co(t),ro("RemoteStore","RemoteStore shutting down."),n.mu.add(5),e.next=5,ep(n);case 5:n.yu.shutdown(),n.pu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function lm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ae(te().mark((function r(){var i;return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var fm=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return v(e,[{key:"next",value:function(e){this.observer.next&&this.vc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.vc(this.observer.error,e):io("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"vc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),hm=function(){function e(t,n){var r=this;d(this,e),this.Vc=t,this.Tt=n,this.metadata=new ho,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.Mu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Mu))))}),(function(e){return r.metadata.reject(e)}))}return v(e,[{key:"close",value:function(){return this.Vc.cancel()}},{key:"getMetadata",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yc",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Dc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Dc",value:function(){var e=ae(te().mark((function e(){var t,n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Sc.decode(t),r=Number(n),isNaN(r)&&this.xc("length string (".concat(n,") is not valid number")),e.next=9,this.Nc(r);case 9:return i=e.sent,e.abrupt("return",new ev(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"kc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Cc",value:function(){var e=ae(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.kc()<0)){e.next=7;break}return e.next=3,this.$c();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.kc())<0&&this.xc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.$c();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.xc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Sc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xc",value:function(e){throw this.Vc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"$c",value:function(){var e=ae(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Vc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),dm=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return v(e,[{key:"lookup",value:function(){var e=ae(te().mark((function e(t){var n,r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new fo(lo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ae(te().mark((function e(t,n){var r,i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),i=ml(r.Tt)+"/documents",a={documents:n.map((function(e){return hl(r.Tt,e)}))},e.next=5,r.mo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=bl(r.Tt,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());uo(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Cc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ae(te().mark((function e(){var t,n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Ro.fromPath(t);n.mutations.push(new Ac(r,n.precondition(r)))})),e.next=7,function(){var e=ae(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),i=ml(r.Tt)+"/documents",a={writes:n.map((function(e){return wl(r.Tt,e)}))},e.next=3,r.lo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw so();t=Co.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new fo(lo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Co.min())?dc.exists(!1):dc.updateTime(t):dc.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Co.min()))throw new fo(lo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dc.updateTime(t)}return dc.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),pm=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Mc=r.maxAttempts,this.ko=new Gd(this.asyncQueue,"transaction_retry")}return v(e,[{key:"run",value:function(){this.Mc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.ko.vo(ae(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new dm(e.datastore),(r=e.Fc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Bc(t)}))}))})).catch((function(t){e.Bc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Fc",value:function(e){try{var t=this.updateFunction(e);return!fs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Bc",value:function(e){var t=this;this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Lc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Pc(t)}return!1}}]),e}(),vm=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Za.UNAUTHENTICATED,this.clientId=_o.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ro("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ro("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return v(e,[{key:"getConfiguration",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new fo(lo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ho;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ae(te().mark((function n(){var r;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Vp(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function mm(e,t){return ym.apply(this,arguments)}function ym(){return ym=ae(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ro("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,od(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),ym.apply(this,arguments)}function gm(e,t){return km.apply(this,arguments)}function km(){return km=ae(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,bm(t);case 3:return r=e.sent,ro("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Rp(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Rp(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),km.apply(this,arguments)}function bm(e){return wm.apply(this,arguments)}function wm(){return wm=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return ro("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,mm(t,new om);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),wm.apply(this,arguments)}function xm(e){return _m.apply(this,arguments)}function _m(){return _m=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return ro("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,gm(t,new cm);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),_m.apply(this,arguments)}function Im(e){return bm(e).then((function(e){return e.persistence}))}function Em(e){return bm(e).then((function(e){return e.localStore}))}function Sm(e){return xm(e).then((function(e){return e.remoteStore}))}function Tm(e){return xm(e).then((function(e){return e.syncEngine}))}function Cm(e){return xm(e).then((function(e){return e.datastore}))}function Am(e){return Nm.apply(this,arguments)}function Nm(){return Nm=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=lv.bind(null,n.syncEngine),r.onUnlisten=pv.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Nm.apply(this,arguments)}function Pm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ho;return e.asyncQueue.enqueueAndForget(ae(te().mark((function i(){return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new fm({next:function(a){t.enqueueAndForget((function(){return Qp(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new fo(lo.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new fo(lo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Zp(Ou(n.path),a,{includeMetadataChanges:!0,$u:!0});return Kp(e,o)},i.next=3,Am(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Dm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ho;return e.asyncQueue.enqueueAndForget(ae(te().mark((function i(){return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new fm({next:function(n){t.enqueueAndForget((function(){return Qp(e,o)})),n.fromCache&&"server"===r.source?i.reject(new fo(lo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Zp(n,a,{includeMetadataChanges:!0,$u:!0});return Kp(e,o)},i.next=3,Am(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Rm=new Map;function Om(e,t,n){if(!n)throw new fo(lo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Lm(e,t,n,r){if(!0===t&&!0===r)throw new fo(lo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Mm(e){if(!Ro.isDocumentKey(e))throw new fo(lo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function jm(e){if(Ro.isDocumentKey(e))throw new fo(lo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Fm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":so()}function Um(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new fo(lo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Fm(e);throw new fo(lo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Vm(e,t){if(t<=0)throw new fo(lo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Bm=function(){function e(t){var n;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new fo(lo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new fo(lo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Lm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return v(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),zm=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bm({}),this._settingsFrozen=!1}return v(e,[{key:"app",get:function(){if(!this._app)throw new fo(lo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new fo(lo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new vo;switch(e.type){case"gapi":var t=e.client;return new ko(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new fo(lo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Rm.get(e);t&&(ro("ComponentProvider","Removing Datastore"),Rm.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function qm(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Um(e,zm))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&ao("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=Za.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[C(JSON.stringify({alg:"none",type:"JWT"})),C(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new fo(lo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Za(u)}e._authCredentials=new mo(new po(o,s))}}var Hm=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return v(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Km(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Gm=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return v(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Km=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,Ou(i)))._path=i,a.type="collection",a}return v(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Hm(this.firestore,null,new Ro(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Gm);function Wm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ee(e),Om("collection","path",t),e instanceof zm){var a=No.fromString.apply(No,[t].concat(r));return jm(a),new Km(e,null,a)}if(!(e instanceof Hm||e instanceof Km))throw new fo(lo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(No.fromString.apply(No,[t].concat(r)));return jm(o),new Km(e.firestore,null,o)}function Qm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ee(e),1===arguments.length&&(t=_o.R()),Om("doc","path",t),e instanceof zm){var a=No.fromString.apply(No,[t].concat(r));return Mm(a),new Hm(e,null,new Ro(a))}if(!(e instanceof Hm||e instanceof Km))throw new fo(lo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(No.fromString.apply(No,[t].concat(r)));return Mm(o),new Hm(e.firestore,e instanceof Km?e.converter:null,new Ro(o))}function Ym(e,t){return e=ee(e),t=ee(t),(e instanceof Hm||e instanceof Km)&&(t instanceof Hm||t instanceof Km)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Xm(e,t){return e=ee(e),t=ee(t),e instanceof Gm&&t instanceof Gm&&e.firestore===t.firestore&&qu(e._query,t._query)&&e.converter===t.converter}var Jm=function(){function e(){var t=this;d(this,e),this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new Gd(this,"async_queue_retry"),this.Hc=function(){var e=qd();e&&ro("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ko.Vo()};var n=qd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Hc)}return v(e,[{key:"isShuttingDown",get:function(){return this.Kc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Jc(),this.Yc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;var t=qd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Jc(),this.Kc)return new Promise((function(){}));var n=new ho;return this.Yc((function(){return t.Kc&&t.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Uc.push(e),t.Zc()}))}},{key:"Zc",value:function(){var e=ae(te().mark((function e(){var t=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Uc.length){e.next=14;break}return e.prev=1,e.next=4,this.Uc[0]();case 4:this.Uc.shift(),this.ko.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),$o(e.t0)){e.next=12;break}throw e.t0;case 12:ro("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Uc.length>0&&this.ko.vo((function(){return t.Zc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Yc",value:function(e){var t=this,n=this.qc.then((function(){return t.jc=!0,e().catch((function(e){t.Qc=e,t.jc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw io("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.jc=!1,e}))}));return this.qc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);var i=Up.createAndSchedule(this,e,t,n,(function(e){return r.Xc(e)}));return this.Gc.push(i),i}},{key:"Jc",value:function(){this.Qc&&so()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ta",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.qc,e.next=3,t;case 3:if(t!==this.qc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ea",value:function(e){var t,n=m(this.Gc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"na",value:function(e){var t=this;return this.ta().then((function(){t.Gc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=m(t.Gc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ta()}))}},{key:"sa",value:function(e){this.Wc.push(e)}},{key:"Xc",value:function(e){var t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}]),e}();function $m(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=m(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Zm=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new ho,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return v(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),ey=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Jm,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return v(n,[{key:"_terminate",value:function(){return this._firestoreClient||ny(this),this._firestoreClient.terminate()}}]),n}(zm);function ty(e){return e._firestoreClient||ny(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ny(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new os(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new vm(e._authCredentials,e._appCheckCredentials,e._queue,r)}function ry(e,t,n){var r=new ho;return e.asyncQueue.enqueue(ae(te().mark((function i(){var a;return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,mm(e,n);case 3:return i.next=5,gm(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===lo.FAILED_PRECONDITION||e.code===lo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:ao("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function iy(e){return function(e){return e.asyncQueue.enqueue(ae(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Im(e);case 2:return n=t.sent,t.next=5,Sm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=co(e);return t.mu.delete(0),$d(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(ty(e=Um(e,ey)))}function ay(e){return function(e){return e.asyncQueue.enqueue(ae(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Im(e);case 2:return n=t.sent,t.next=5,Sm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=co(t)).mu.add(0),e.next=4,ep(n);case 4:n.pu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(ty(e=Um(e,ey)))}function oy(e,t){var n=ty(e=Um(e,ey)),r=new Zm;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new hm(e,t)}(function(e,t){if(e instanceof Uint8Array)return lm(e,t);if(e instanceof ArrayBuffer)return lm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Hd(t));e.asyncQueue.enqueueAndForget(ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=am,t.next=3,Tm(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function sy(e,t){return function(e,t){return e.asyncQueue.enqueue(ae(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=co(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.$s.getNamedQuery(e,t)}))},n.next=3,Em(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(ty(e=Um(e,ey)),t).then((function(t){return t?new Gm(e,null,t.query):null}))}function uy(e){if(e._initialized||e._terminated)throw new fo(lo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var cy=function(){function e(t){d(this,e),this._byteString=t}return v(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(vs.fromBase64String(t))}catch(t){throw new fo(lo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(vs.fromUint8Array(t))}}]),e}(),ly=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new fo(lo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Do(n)}return v(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var fy=v((function e(t){d(this,e),this._methodName=t})),hy=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new fo(lo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new fo(lo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return v(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Io(this._lat,e._lat)||Io(this._long,e._long)}}]),e}(),dy=/^__.*__$/,py=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return v(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new xc(e,this.data,this.fieldMask,t,this.fieldTransforms):new wc(e,this.data,t,this.fieldTransforms)}}]),e}(),vy=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return v(e,[{key:"toMutation",value:function(e,t){return new xc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function my(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw so()}}var yy=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ia(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return v(e,[{key:"path",get:function(){return this.settings.path}},{key:"ra",get:function(){return this.settings.ra}},{key:"oa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ua",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.oa({path:n,ca:!1});return r.aa(e),r}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.oa({path:n,ca:!1});return r.ia(),r}},{key:"la",value:function(e){return this.oa({path:void 0,ca:!0})}},{key:"fa",value:function(e){return jy(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ia",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.aa(this.path.get(e))}},{key:"aa",value:function(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(my(this.ra)&&dy.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}]),e}(),gy=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.Tt=r||Hd(t)}return v(e,[{key:"wa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new yy({ra:e,methodName:t,_a:n,path:Do.emptyPath(),ca:!1,da:r},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}]),e}();function ky(e){var t=e._freezeSettings(),n=Hd(e._databaseId);return new gy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function by(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.wa(a.merge||a.mergeFields?2:0,t,n,i);Ry("Data must be an object, but it was:",o,r);var s,u,c=Py(r,o);if(a.merge)s=new bu(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=m(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Oy(t,l.value,n);if(!o.contains(d))throw new fo(lo.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Fy(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}s=new bu(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new py(new wu(c),s,u)}var wy=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ra)throw 1===e.ra?e.fa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.fa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(fy);function xy(e,t,n){return new yy({ra:3,_a:t.settings._a,methodName:e._methodName,ca:n},t.databaseId,t.Tt,t.ignoreUndefinedProperties)}var _y=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_toFieldTransform",value:function(e){return new fc(e.path,new rc)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(fy),Iy=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).ma=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=xy(this,e,!0),n=this.ma.map((function(e){return Ny(e,t)})),r=new ic(n);return new fc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(fy),Ey=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).ma=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=xy(this,e,!0),n=this.ma.map((function(e){return Ny(e,t)})),r=new oc(n);return new fc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(fy),Sy=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).ga=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=new uc(e.Tt,$u(e.Tt,this.ga));return new fc(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(fy);function Ty(e,t,n,r){var i=e.wa(1,t,n);Ry("Data must be an object, but it was:",i,r);var a=[],o=wu.empty();cs(r,(function(e,r){var s=My(t,e,n);r=ee(r);var u=i.ha(s);if(r instanceof wy)a.push(s);else{var c=Ny(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new bu(a);return new vy(o,s,i.fieldTransforms)}function Cy(e,t,n,r,i,a){var o=e.wa(1,t,n),s=[Oy(t,r,n)],u=[i];if(a.length%2!=0)throw new fo(lo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(Oy(t,a[c])),u.push(a[c+1]);for(var l=[],f=wu.empty(),h=s.length-1;h>=0;--h)if(!Fy(l,s[h])){var d=s[h],p=u[h];p=ee(p);var v=o.ha(d);if(p instanceof wy)l.push(d);else{var m=Ny(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new bu(l);return new vy(f,y,o.fieldTransforms)}function Ay(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ny(n,e.wa(r?4:3,t))}function Ny(e,t){if(Dy(e=ee(e)))return Ry("Unsupported field value:",t,e),Py(e,t);if(e instanceof fy)return function(e,t){if(!my(t.ra))throw t.fa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.fa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ca&&4!==t.ra)throw t.fa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=m(e);try{for(a.s();!(n=a.n()).done;){var o=Ny(n.value,t.la(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ee(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return $u(t.Tt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=To.fromDate(e);return{timestampValue:ol(t.Tt,n)}}if(e instanceof To){var r=new To(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ol(t.Tt,r)}}if(e instanceof hy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof cy)return{bytesValue:sl(t.Tt,e._byteString)};if(e instanceof Hm){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.fa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:ll(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.fa("Unsupported field value: ".concat(Fm(e)))}(e,t)}function Py(e,t){var n={};return ls(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):cs(e,(function(e,r){var i=Ny(r,t.ua(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Dy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof To||e instanceof hy||e instanceof cy||e instanceof Hm||e instanceof fy)}function Ry(e,t,n){if(!Dy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Fm(n);throw"an object"===r?t.fa(e+" a custom object"):t.fa(e+" "+r)}}function Oy(e,t,n){if((t=ee(t))instanceof ly)return t._internalPath;if("string"==typeof t)return My(e,t);throw jy("Field path arguments must be of type string or ",e,!1,void 0,n)}var Ly=new RegExp("[~\\*/\\[\\]]");function My(e,t,n){if(t.search(Ly)>=0)throw jy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return _(ly,re(t.split(".")))._internalPath}catch(r){throw jy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function jy(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new fo(lo.INVALID_ARGUMENT,s+e+u)}function Fy(e,t){return e.some((function(e){return e.isEqual(t)}))}var Uy=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return v(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Hm(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Vy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(By("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Vy=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(){return Kt(b(n.prototype),"data",this).call(this)}}]),n}(Uy);function By(e,t){return"string"==typeof t?My(e,t):t instanceof ly?t._internalPath:t._delegate._internalPath}function zy(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new fo(lo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var qy=v((function e(){d(this,e)})),Hy=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n)}(qy);function Gy(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof qy&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Wy})).length,n=e.filter((function(e){return e instanceof Ky})).length;if(t>1||t>0&&n>0)throw new fo(lo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=m(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}var Ky=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return v(n,[{key:"_apply",value:function(e){var t=this._parse(e);return ag(e._query,t),new Gm(e.firestore,e.converter,Bu(e._query,t))}},{key:"_parse",value:function(e){var t=ky(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new fo(lo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){ig(o,a);var u,c=[],l=m(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(rg(r,e,f))}}catch(h){l.e(h)}finally{l.f()}s={arrayValue:{values:c}}}else s=rg(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||ig(o,a),s=Ay(n,"where",o,"in"===a||"not-in"===a);return Qs.create(i,a,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Hy);var Wy=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return v(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Ys.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=m(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;ag(r,a),r=Bu(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Gm(e.firestore,e.converter,Bu(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(qy);var Qy=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return v(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new fo(lo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new fo(lo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new hu(t,n);return function(e,t){if(null===Mu(e)){var n=ju(e);null!==n&&og(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Gm(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Du(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Hy);var Yy=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return v(n,[{key:"_apply",value:function(e){return new Gm(e.firestore,e.converter,zu(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Hy);var Xy=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return v(n,[{key:"_apply",value:function(e){var t=ng(e,this.type,this._docOrFields,this._inclusive);return new Gm(e.firestore,e.converter,function(e,t){return new Du(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Hy);function Jy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Xy._create("startAt",t,!0)}function $y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Xy._create("startAfter",t,!1)}var Zy=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return v(n,[{key:"_apply",value:function(e){var t=ng(e,this.type,this._docOrFields,this._inclusive);return new Gm(e.firestore,e.converter,function(e,t){return new Du(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Hy);function eg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zy._create("endBefore",t,!1)}function tg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zy._create("endAt",t,!0)}function ng(e,t,n,r){if(n[0]=ee(n[0]),n[0]instanceof Uy)return function(e,t,n,r,i){if(!r)throw new fo(lo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=m(Uu(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(Ds(t,r.key));else{var c=r.data.field(u.field);if(bs(c))throw new fo(lo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new fo(lo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new Hs(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ky(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new fo(lo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new fo(lo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Fu(e)&&-1!==c.indexOf("/"))throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(No.fromString(c));if(!Ro.isDocumentKey(l))throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Ro(l);s.push(Ds(t,f))}else{var h=Ay(n,r,c);s.push(h)}}return new Hs(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function rg(e,t,n){if("string"==typeof(n=ee(n))){if(""===n)throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fu(t)&&-1!==n.indexOf("/"))throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(No.fromString(n));if(!Ro.isDocumentKey(r))throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ds(e,new Ro(r))}if(n instanceof Hm)return Ds(e,n._key);throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Fm(n),"."))}function ig(e,t){if(!Array.isArray(e)||0===e.length)throw new fo(lo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function ag(e,t){if(t.isInequality()){var n=ju(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new fo(lo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Mu(e);null!==i&&og(e,r,i)}var a=function(e,t){var n,r=m(e);try{for(r.s();!(n=r.n()).done;){var i,a=m(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new fo(lo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new fo(lo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function og(e,t,n){if(!n.isEqual(t))throw new fo(lo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var sg=function(){function e(){d(this,e)}return v(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw so()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return cs(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new hy(gs(e.latitude),gs(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=ws(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xs(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=ys(e);return new To(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=No.fromString(e);uo(Ol(n));var r=new ss(n.get(1),n.get(3)),i=new Ro(n.popFirst(5));return r.isEqual(t)||io("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function ug(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var cg=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new cy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hm(this.firestore,null,t)}}]),n}(sg);var lg=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return v(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),fg=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return v(n,[{key:"exists",value:function(){return Kt(b(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new hg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(By("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Uy),hg=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Kt(b(n.prototype),"data",this).call(this,e)}}]),n}(fg),dg=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new lg(i.hasPendingWrites,i.fromCache),this.query=r}return v(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new hg(n._firestore,n._userDataWriter,r.key,r,new lg(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new fo(lo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new hg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new hg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:pg(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function pg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return so()}}function vg(e,t){return e instanceof fg&&t instanceof fg?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof dg&&t instanceof dg&&e._firestore===t._firestore&&Xm(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var mg=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new cy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hm(this.firestore,null,t)}}]),n}(sg);function yg(e){e=Um(e,Hm);var t=Um(e.firestore,ey),n=ty(t),r=new mg(t);return function(e,t){var n=new ho;return e.asyncQueue.enqueueAndForget(ae(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=co(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new fo(lo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Vp(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Em(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new fg(t,r,e._key,n,new lg(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function gg(e){e=Um(e,Gm);var t=Um(e.firestore,ey),n=ty(t),r=new mg(t);return function(e,t){var n=new ho;return e.asyncQueue.enqueueAndForget(ae(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ae(te().mark((function e(t,n,r){var i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,md(t,n,!0);case 3:i=e.sent,a=new ov(n,i.Yi),o=a.Hu(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=Vp(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Em(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new dg(t,r,e,n)}))}function kg(e,t,n){e=Um(e,Hm);var r=Um(e.firestore,ey),i=ug(e.converter,t,n);return _g(r,[by(ky(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,dc.none())])}function bg(e,t,n){e=Um(e,Hm);for(var r=Um(e.firestore,ey),i=ky(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return _g(r,[("string"==typeof(t=ee(t))||t instanceof ly?Cy(i,"updateDoc",e._key,t,n,o):Ty(i,"updateDoc",e._key,t)).toMutation(e._key,dc.exists(!0))])}function wg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ee(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||$m(n[u])||(s=n[u],u++);var c,l,f,h={includeMetadataChanges:s.includeMetadataChanges};if($m(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Hm)l=Um(e.firestore,ey),f=Ou(e._key.path),c={next:function(t){n[u]&&n[u](Ig(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=Um(e,Gm);l=Um(p.firestore,ey),f=p._query;var v=new mg(l);c={next:function(e){n[u]&&n[u](new dg(l,v,p,e))},error:n[u+1],complete:n[u+2]},zy(e._query)}return function(e,t,n,r){var i=new fm(r),a=new Zp(t,i,n);return e.asyncQueue.enqueueAndForget(ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Kp,t.next=3,Am(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Qp,t.next=3,Am(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(ty(l),f,h,c)}function xg(e,t){return function(e,t){var n=new fm(t);return e.asyncQueue.enqueueAndForget(ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){co(e).vu.add(t),t.next()},t.next=3,Am(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){co(e).vu.delete(t)},t.next=3,Am(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(ty(e=Um(e,ey)),$m(t)?t:{next:t})}function _g(e,t){return function(e,t){var n=new ho;return e.asyncQueue.enqueueAndForget(ae(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=mv,r.next=3,Tm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(ty(e),t)}function Ig(e,t,n){var r=n.docs.get(t._key),i=new mg(e);return new fg(e,i,t._key,r,new lg(n.hasPendingWrites,n.fromCache),t.converter)}var Eg={maxAttempts:5},Sg=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ky(t)}return v(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Tg(e,this._firestore),i=ug(r.converter,t,n),a=by(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,dc.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Tg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=ee(t))||t instanceof ly?Cy(this._dataReader,"WriteBatch.update",i._key,t,n,o):Ty(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,dc.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Tg(e,this._firestore);return this._mutations=this._mutations.concat(new Cc(t._key,dc.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new fo(lo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Tg(e,t){if((e=ee(e)).firestore!==t)throw new fo(lo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Cg=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return v(n,[{key:"get",value:function(e){var t=this,r=Tg(e,this._firestore),i=new mg(this._firestore);return Kt(b(n.prototype),"get",this).call(this,e).then((function(e){return new fg(t._firestore,i,r._key,e._document,new lg(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=ky(t)}return v(e,[{key:"get",value:function(e){var t=this,n=Tg(e,this._firestore),r=new cg(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return so();var i=e[0];if(i.isFoundDocument())return new Uy(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Uy(t._firestore,r,n._key,null,n.converter);throw so()}))}},{key:"set",value:function(e,t,n){var r=Tg(e,this._firestore),i=ug(r.converter,t,n),a=by(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Tg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=ee(t))||t instanceof ly?Cy(this._dataReader,"Transaction.update",i._key,t,n,o):Ty(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Tg(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Ag(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Iy("arrayUnion",t)}function Ng(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ey("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){eo=e}(nt),Ye(new oe("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new ey(new yo(e.getProvider("auth-internal")),new wo(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new fo(lo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ss(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ut($a,"3.9.0",e),ut($a,"3.9.0","esm2017")}();var Pg="@firebase/firestore-compat",Dg="0.3.5";function Rg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new fo("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Og(){if("undefined"===typeof Uint8Array)throw new fo("unimplemented","Uint8Arrays are not available in this environment.")}function Lg(){if("undefined"==typeof atob)throw new fo("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Mg=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"toBase64",value:function(){return Lg(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Og(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Lg(),new e(cy.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Og(),new e(cy.fromUint8Array(t))}}]),e}();function jg(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=m(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Fg=function(){function e(){d(this,e)}return v(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){uy(e=Um(e,ey));var n=ty(e),r=e._freezeSettings(),i=new cm;return ry(n,i,new sm(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){uy(e=Um(e,ey));var t=ty(e),n=e._freezeSettings(),r=new cm;return ry(t,r,new um(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new fo(lo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new ho;return e._queue.enqueueAndForgetEvenWhileRestricted(ae(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yo.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Yo.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(td(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Ug=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof ss||(this._appCompat=t)}return v(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||ao("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};qm(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return iy(this._delegate)}},{key:"disableNetwork",value:function(){return ay(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Lm("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new ho;return e.asyncQueue.enqueueAndForget(ae(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Tv,n.next=3,Tm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(ty(e=Um(e,ey)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return xg(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new fo("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Zg(this,Wm(this._delegate,e))}catch(t){throw Gg(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Hg(this,Qm(this._delegate,e))}catch(t){throw Gg(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Xg(this,function(e,t){if(e=Um(e,zm),Om("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new fo(lo.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Gm(e,null,function(e){return new Du(No.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Gg(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=Um(e,ey);var r=Object.assign(Object.assign({},Eg),n);return function(e){if(e.maxAttempts<1)throw new fo(lo.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new ho;return e.asyncQueue.enqueueAndForget(ae(te().mark((function i(){var a;return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Cm(e);case 2:a=i.sent,new pm(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(ty(e),(function(n){return t(new Cg(e,n))}),r)}(this._delegate,(function(n){return e(new Bg(t,n))}))}},{key:"batch",value:function(){var e=this;return ty(this._delegate),new zg(new Sg(this._delegate,(function(t){return _g(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return oy(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return sy(this._delegate,e).then((function(e){return e?new Xg(t,e):null}))}}]),e}(),Vg=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new Mg(new cy(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Hg.forKey(t,this.firestore,null)}}]),n}(sg);var Bg=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Vg(t)}return v(e,[{key:"get",value:function(e){var t=this,n=ek(e);return this._delegate.get(n).then((function(e){return new Qg(t._firestore,new fg(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=ek(e);return n?(Rg("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=ek(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=ek(e);return this._delegate.delete(t),this}}]),e}(),zg=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"set",value:function(e,t,n){var r=ek(e);return n?(Rg("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=ek(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=ek(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),qg=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return v(e,[{key:"fromFirestore",value:function(e,t){var n=new hg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Yg(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Vg(t),n),i.set(n,a)),a}}]),e}();qg.INSTANCES=new WeakMap;var Hg=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Vg(t)}return v(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Zg(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Zg(this.firestore,Wm(this._delegate,e))}catch(t){throw Gg(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ee(e))instanceof Hm&&Ym(this._delegate,e)}},{key:"set",value:function(e,t){t=Rg("DocumentReference.set",t);try{return t?kg(this._delegate,e,t):kg(this._delegate,e)}catch(n){throw Gg(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?bg(this._delegate,e):bg.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw Gg(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return _g(Um(e.firestore,ey),[new Cc(e._key,dc.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Kg(n),a=Wg(n,(function(t){return new Qg(e.firestore,new fg(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return wg(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?yg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Um(e,Hm);var t=Um(e.firestore,ey);return Pm(ty(t),e._key,{source:"server"}).then((function(n){return Ig(t,e,n)}))}(this._delegate):function(e){e=Um(e,Hm);var t=Um(e.firestore,ey);return Pm(ty(t),e._key).then((function(n){return Ig(t,e,n)}))}(this._delegate),t.then((function(e){return new Qg(n.firestore,new fg(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(qg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new fo("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Hm(n._delegate,r,new Ro(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Hm(n._delegate,r,t))}}]),e}();function Gg(e,t,n){return e.message=e.message.replace(t,n),e}function Kg(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!jg(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Wg(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=jg(e[0])?e[0]:jg(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Qg=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"ref",get:function(){return new Hg(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return vg(this._delegate,e._delegate)}}]),e}(),Yg=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||so()}(void 0!==t),t}}]),n}(Qg),Xg=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Vg(t)}return v(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Gy(this._delegate,function(e,t,n){var r=t,i=By("where",e);return Ky._create(i,r,n)}(t,n,r)))}catch(i){throw Gg(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Gy(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=By("orderBy",e);return Qy._create(n,t)}(t,n)))}catch(r){throw Gg(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Gy(this._delegate,function(e){return Vm("limit",e),Yy._create("limit",e,"F")}(t)))}catch(n){throw Gg(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Gy(this._delegate,function(e){return Vm("limitToLast",e),Yy._create("limitToLast",e,"L")}(t)))}catch(n){throw Gg(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Gy(this._delegate,Jy.apply(void 0,arguments)))}catch(t){throw Gg(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Gy(this._delegate,$y.apply(void 0,arguments)))}catch(t){throw Gg(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Gy(this._delegate,eg.apply(void 0,arguments)))}catch(t){throw Gg(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Gy(this._delegate,tg.apply(void 0,arguments)))}catch(t){throw Gg(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Xm(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?gg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Um(e,Gm);var t=Um(e.firestore,ey),n=ty(t),r=new mg(t);return Dm(n,e._query,{source:"server"}).then((function(n){return new dg(t,r,e,n)}))}(this._delegate):function(e){e=Um(e,Gm);var t=Um(e.firestore,ey),n=ty(t),r=new mg(t);return zy(e._query),Dm(n,e._query).then((function(n){return new dg(t,r,e,n)}))}(this._delegate),t.then((function(e){return new $g(n.firestore,new dg(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Kg(n),a=Wg(n,(function(t){return new $g(e.firestore,new dg(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return wg(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(qg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Jg=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Yg(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),$g=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"query",get:function(){return new Xg(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Yg(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Jg(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Yg(n._firestore,r))}))}},{key:"isEqual",value:function(e){return vg(this._delegate,e._delegate)}}]),e}(),Zg=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return v(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Hg(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Hg(this.firestore,void 0===e?Qm(this._delegate):Qm(this._delegate,e))}catch(t){throw Gg(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Um(e.firestore,ey),r=Qm(e),i=ug(e.converter,t);return _g(n,[by(ky(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,dc.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Hg(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Ym(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(qg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Xg);function ek(e){return Um(e,Hm)}var tk,nk=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=_(ly,n)}return v(e,[{key:"isEqual",value:function(e){return(e=ee(e))instanceof ly&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Do.keyField().canonicalString())}}]),e}(),rk=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new _y("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new wy("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Ag.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Ng.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Sy("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),ik={Firestore:Ug,GeoPoint:hy,Timestamp:To,Blob:Mg,Transaction:Bg,WriteBatch:zg,DocumentReference:Hg,DocumentSnapshot:Qg,Query:Xg,QueryDocumentSnapshot:Yg,QuerySnapshot:$g,CollectionReference:Zg,FieldPath:nk,FieldValue:rk,setLogLevel:function(e){!function(e){to.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};function ak(e){return a(e)||ne(e)||s(e)||u()}(function(e,t){e.INTERNAL.registerComponent(new oe("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},ik)))})(tk=jt,(function(e,t){return new Ug(e,t,new Fg)})),tk.registerVersion(Pg,Dg);function ok(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var sk;Object.create;var uk={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ck={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function lk(){return h({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var fk=function(){var e;return h(e={},"admin-restricted-operation","This operation is restricted to administrators only."),h(e,"argument-error",""),h(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),h(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),h(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),h(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),h(e,"cordova-not-ready","Cordova framework is not ready."),h(e,"cors-unsupported","This browser is not supported."),h(e,"credential-already-in-use","This credential is already associated with a different user account."),h(e,"custom-token-mismatch","The custom token corresponds to a different audience."),h(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),h(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),h(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),h(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),h(e,"email-already-in-use","The email address is already in use by another account."),h(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),h(e,"expired-action-code","The action code has expired."),h(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),h(e,"internal-error","An internal AuthError has occurred."),h(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),h(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),h(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),h(e,"invalid-auth-event","An internal AuthError has occurred."),h(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),h(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),h(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),h(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),h(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),h(e,"invalid-email","The email address is badly formatted."),h(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),h(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),h(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),h(e,"invalid-credential","The supplied auth credential is malformed or has expired."),h(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),h(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),h(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),h(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),h(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),h(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),h(e,"wrong-password","The password is invalid or the user does not have a password."),h(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),h(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),h(e,"invalid-provider-id","The specified provider ID is invalid."),h(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),h(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),h(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),h(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),h(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),h(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),h(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),h(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),h(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),h(e,"missing-continue-uri","A continue URL must be provided in the request."),h(e,"missing-iframe-start","An internal AuthError has occurred."),h(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),h(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),h(e,"missing-multi-factor-info","No second factor identifier is provided."),h(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),h(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),h(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),h(e,"app-deleted","This instance of FirebaseApp has been deleted."),h(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),h(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),h(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),h(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),h(e,"no-auth-event","An internal AuthError has occurred."),h(e,"no-such-provider","User was not linked to an account with the given provider."),h(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),h(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),h(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),h(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),h(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),h(e,"provider-already-linked","User can only be linked to one identity for the given provider."),h(e,"quota-exceeded","The project's quota for this operation has been exceeded."),h(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),h(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),h(e,"rejected-credential","The request contains malformed or mismatching credentials."),h(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),h(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),h(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),h(e,"timeout","The operation has timed out."),h(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),h(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),h(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),h(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),h(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),h(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),h(e,"unverified-email","The operation requires a verified email."),h(e,"user-cancelled","The user did not grant your application the permissions it requested."),h(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),h(e,"user-disabled","The user account has been disabled by an administrator."),h(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),h(e,"user-signed-out",""),h(e,"weak-password","The password must be 6 characters long or more."),h(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),h(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},hk=lk,dk=new q("auth","Firebase",lk()),pk=new ye("@firebase/auth");function vk(e){if(pk.logLevel<=le.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];pk.error.apply(pk,["Auth (".concat(nt,"): ").concat(e)].concat(n))}}function mk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw bk.apply(void 0,[e].concat(n))}function yk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return bk.apply(void 0,[e].concat(n))}function gk(e,t,n){var r=Object.assign(Object.assign({},hk()),h({},t,n));return new q("auth","Firebase",r).create(t,{appName:e.name})}function kk(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&mk(e,"argument-error"),gk(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function bk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=re(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(re(o)))}return dk.create.apply(dk,[e].concat(n))}function wk(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw bk.apply(void 0,[t].concat(r))}}function xk(e){var t="INTERNAL ASSERTION FAILED: "+e;throw vk(t),new Error(t)}function _k(e,t){e||xk(t)}var Ik=new Map;function Ek(e){_k(e instanceof Function,"Expected a class definition");var t=Ik.get(e);return t?(_k(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ik.set(e,t),t)}function Sk(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Tk(){return"http:"===Ck()||"https:"===Ck()}function Ck(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Ak=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,_k(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(L())||F()}return v(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Tk()||j()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Nk(e,t){_k(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Pk=function(){function e(){d(this,e)}return v(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void xk("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void xk("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void xk("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Dk=(h(sk={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),h(sk,"MISSING_CUSTOM_TOKEN","internal-error"),h(sk,"INVALID_IDENTIFIER","invalid-email"),h(sk,"MISSING_CONTINUE_URI","internal-error"),h(sk,"INVALID_PASSWORD","wrong-password"),h(sk,"MISSING_PASSWORD","internal-error"),h(sk,"EMAIL_EXISTS","email-already-in-use"),h(sk,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),h(sk,"INVALID_IDP_RESPONSE","invalid-credential"),h(sk,"INVALID_PENDING_TOKEN","invalid-credential"),h(sk,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),h(sk,"MISSING_REQ_TYPE","internal-error"),h(sk,"EMAIL_NOT_FOUND","user-not-found"),h(sk,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),h(sk,"EXPIRED_OOB_CODE","expired-action-code"),h(sk,"INVALID_OOB_CODE","invalid-action-code"),h(sk,"MISSING_OOB_CODE","internal-error"),h(sk,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),h(sk,"INVALID_ID_TOKEN","invalid-user-token"),h(sk,"TOKEN_EXPIRED","user-token-expired"),h(sk,"USER_NOT_FOUND","user-token-expired"),h(sk,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),h(sk,"INVALID_CODE","invalid-verification-code"),h(sk,"INVALID_SESSION_INFO","invalid-verification-id"),h(sk,"INVALID_TEMPORARY_PROOF","invalid-credential"),h(sk,"MISSING_SESSION_INFO","missing-verification-id"),h(sk,"SESSION_EXPIRED","code-expired"),h(sk,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),h(sk,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),h(sk,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),h(sk,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),h(sk,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),h(sk,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),h(sk,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),h(sk,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),h(sk,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),h(sk,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),h(sk,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),sk),Rk=new Ak(3e4,6e4);function Ok(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Lk(e,t,n,r){return Mk.apply(this,arguments)}function Mk(){return Mk=ae(te().mark((function e(t,n,r,i){var a,o=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",jk(t,a,ae(te().mark((function e(){var a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=Q(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Pk.fetch()(Bk(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Mk.apply(this,arguments)}function jk(e,t,n){return Fk.apply(this,arguments)}function Fk(){return Fk=ae(te().mark((function e(t,n,r){var i,a,o,s,u,l,f,h,d,p;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Dk),n),e.prev=2,a=new zk(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw qk(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,l=u.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw qk(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw qk(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw qk(t,"user-disabled",s);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw gk(t,p,d);case 34:mk(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof z)){e.next=41;break}throw e.t0;case 41:mk(t,"internal-error",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Fk.apply(this,arguments)}function Uk(e,t,n,r){return Vk.apply(this,arguments)}function Vk(){return Vk=ae(te().mark((function e(t,n,r,i){var a,o,s=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Lk(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&mk(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Vk.apply(this,arguments)}function Bk(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Nk(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var zk=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(yk(n.auth,"network-request-failed"))}),Rk.get())}))}return v(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function qk(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=yk(e,t,r);return i.customData._tokenResponse=n,i}function Hk(e,t){return Gk.apply(this,arguments)}function Gk(){return(Gk=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lk(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kk(e,t){return Wk.apply(this,arguments)}function Wk(){return(Wk=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qk(e,t){return Yk.apply(this,arguments)}function Yk(){return(Yk=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lk(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xk(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Jk(){return Jk=ae(te().mark((function e(t){var n,r,i,a,o,s,u=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=ee(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,wk((a=Zk(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Xk($k(a.auth_time)),issuedAtTime:Xk($k(a.iat)),expirationTime:Xk($k(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Jk.apply(this,arguments)}function $k(e){return 1e3*Number(e)}function Zk(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return vk("JWT malformed, contained fewer than 3 sections"),null;try{var a=A(r);return a?JSON.parse(a):(vk("Failed to decode base64 JWT payload"),null)}catch(o){return vk("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function eb(e,t){return tb.apply(this,arguments)}function tb(){return tb=ae(te().mark((function e(t,n){var r=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof z&&nb(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),tb.apply(this,arguments)}function nb(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var rb=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return v(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ib=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return v(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Xk(this.lastLoginAt),this.creationTime=Xk(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ab(e){return ob.apply(this,arguments)}function ob(){return ob=ae(te().mark((function e(t){var n,r,i,a,o,s,u,c,l,f,h;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,eb(t,Qk(r,{idToken:i}));case 6:wk(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=ok(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=ub(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new ib(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),ob.apply(this,arguments)}function sb(){return(sb=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee(t),e.next=3,ab(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ub(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(re(n),re(t))}function cb(e,t){return lb.apply(this,arguments)}function lb(){return(lb=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jk(t,{},ae(te().mark((function e(){var r,i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Q({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Bk(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Pk.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fb=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return v(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){wk(e.idToken,"internal-error"),wk("undefined"!==typeof e.idToken,"internal-error"),wk("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Zk(e);return wk(t,"internal-error"),wk("undefined"!==typeof t.exp,"internal-error"),wk("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ae(te().mark((function e(t){var n,r=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],wk(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ae(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cb(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return xk("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(wk("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(wk("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(wk("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function hb(e,t){wk("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var db=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=ok(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?re(a.providerData):[],this.metadata=new ib(a.createdAt||void 0,a.lastLoginAt||void 0)}return v(e,[{key:"getIdToken",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eb(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(wk(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Jk.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return sb.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(wk(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){wk(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ae(te().mark((function e(t){var n,r,i=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ab(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,eb(this,Hk(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;wk(k&&_,t,"internal-error");var I=fb.fromJSON(this.name,_);wk("string"===typeof k,t,"internal-error"),hb(f,t.name),hb(h,t.name),wk("boolean"===typeof b,t,"internal-error"),wk("boolean"===typeof w,t,"internal-error"),hb(d,t.name),hb(p,t.name),hb(v,t.name),hb(m,t.name),hb(y,t.name),hb(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=ae(te().mark((function t(n,r){var i,a,o,s=arguments;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new fb).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ab(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),pb=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return v(e,[{key:"_isAvailable",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();pb.type="NONE";var vb=pb;function mb(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var yb=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=mb(this.userKey,a.apiKey,o),this.fullPersistenceKey=mb("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return v(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?db._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ae(te().mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,p,v=arguments;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Ek(vb),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Ek(vb),s=mb(i,n.config.apiKey,n.name),u=null,c=m(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return d=db._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function gb(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(xb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(kb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ib(t))return"Blackberry";if(Eb(t))return"Webos";if(bb(t))return"Safari";if((t.includes("chrome/")||wb(t))&&!t.includes("edge/"))return"Chrome";if(_b(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function kb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/firefox\//i.test(e)}function bb(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:L()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/crios\//i.test(e)}function xb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/iemobile/i.test(e)}function _b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/android/i.test(e)}function Ib(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/blackberry/i.test(e)}function Eb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/webos/i.test(e)}function Sb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Tb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return Sb(e)||_b(e)||Eb(e)||Ib(e)||/windows phone/i.test(e)||xb(e)}function Cb(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=gb(L());break;case"Worker":t="".concat(gb(L()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(nt,"/").concat(r)}var Ab=function(){function e(t){d(this,e),this.auth=t,this.queue=[]}return v(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=ae(te().mark((function e(t){var n,r,i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=m(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=m(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Nb=function(){function e(t,n,r){d(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Db(this),this.idTokenSubscription=new Db(this),this.beforeStateQueue=new Ab(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dk,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return v(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Ek(t)),this._initializationPromise=this.queue(ae(te().mark((function r(){var i,a;return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,yb.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ae(te().mark((function e(t){var n,r,i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return wk(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ab(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ee(t):null)&&wk(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ae(te().mark((function e(t){var n,r=this,i=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&wk(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ae(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Ek(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new q("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return wk(n=t&&Ek(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,yb.create(this,[Ek(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ae(te().mark((function e(t){var n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return wk(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return wk(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cb(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ae(te().mark((function e(){var t,n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Pb(e){return ee(e)}var Db=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=J((function(e){return n.observer=e}))}return v(e,[{key:"next",get:function(){return wk(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Rb(e,t,n){var r=Pb(e);wk(r._canInitEmulator,r,"emulator-config-failed"),wk(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Ob(t),o=function(e){var t=Ob(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Lb(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:Lb(o[1])}}(t),s=o.host,u=o.port,l=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ob(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Lb(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Mb=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return v(e,[{key:"toJSON",value:function(){return xk("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return xk("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return xk("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return xk("not implemented")}}]),e}();function jb(e,t){return Fb.apply(this,arguments)}function Fb(){return(Fb=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lk(t,"POST","/v1/accounts:resetPassword",Ok(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ub(e,t){return Vb.apply(this,arguments)}function Vb(){return(Vb=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bb(e,t){return zb.apply(this,arguments)}function zb(){return(zb=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lk(t,"POST","/v1/accounts:update",Ok(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qb(e,t){return Hb.apply(this,arguments)}function Hb(){return(Hb=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uk(t,"POST","/v1/accounts:signInWithPassword",Ok(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gb(e,t){return Kb.apply(this,arguments)}function Kb(){return(Kb=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lk(t,"POST","/v1/accounts:sendOobCode",Ok(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wb(e,t){return Qb.apply(this,arguments)}function Qb(){return(Qb=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gb(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yb(e,t){return Xb.apply(this,arguments)}function Xb(){return(Xb=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gb(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jb(e,t){return $b.apply(this,arguments)}function $b(){return($b=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gb(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zb(e,t){return ew.apply(this,arguments)}function ew(){return(ew=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gb(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tw(e,t){return nw.apply(this,arguments)}function nw(){return(nw=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uk(t,"POST","/v1/accounts:signInWithEmailLink",Ok(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rw(e,t){return iw.apply(this,arguments)}function iw(){return(iw=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uk(t,"POST","/v1/accounts:signInWithEmailLink",Ok(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var aw=function(e){k(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return v(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",qb(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",tw(t,{email:this._email,oobCode:this._password}));case 5:mk(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ub(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",rw(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:mk(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Mb);function ow(e,t){return sw.apply(this,arguments)}function sw(){return(sw=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uk(t,"POST","/v1/accounts:signInWithIdp",Ok(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var uw=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return v(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ow(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ow(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ow(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Q(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mk("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=ok(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Mb);function cw(e,t){return lw.apply(this,arguments)}function lw(){return(lw=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lk(t,"POST","/v1/accounts:sendVerificationCode",Ok(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fw(){return(fw=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uk(t,"POST","/v1/accounts:signInWithPhoneNumber",Ok(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hw(){return(hw=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uk(t,"POST","/v1/accounts:signInWithPhoneNumber",Ok(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw qk(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dw=h({},"USER_NOT_FOUND","user-not-found");function pw(){return(pw=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Uk(t,"POST","/v1/accounts:signInWithPhoneNumber",Ok(t,r),dw));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vw=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return v(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return fw.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return hw.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return pw.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Mb);var mw=function(){function e(t){var n,r,i,a,o,s;d(this,e);var u=Y(X(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);wk(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return v(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Y(X(e)).link,n=t?Y(X(t)).deep_link_id:null,r=Y(X(e)).deep_link_id;return(r?Y(X(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(lm){return null}}}]),e}();var yw=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return v(e,null,[{key:"credential",value:function(e,t){return aw._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=mw.parseLink(t);return wk(n,"argument-error"),aw._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();yw.PROVIDER_ID="password",yw.EMAIL_PASSWORD_SIGN_IN_METHOD="password",yw.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var gw=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return v(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),kw=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return v(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return re(this.scopes)}}]),n}(gw),bw=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return wk(e.idToken||e.accessToken,"argument-error"),uw._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return wk("providerId"in t&&"signInMethod"in t,"argument-error"),uw._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(kw),ww=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"facebook.com")}return v(n,null,[{key:"credential",value:function(e){return uw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(lm){return null}}}]),n}(kw);ww.FACEBOOK_SIGN_IN_METHOD="facebook.com",ww.PROVIDER_ID="facebook.com";var xw=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return v(n,null,[{key:"credential",value:function(e,t){return uw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(lm){return null}}}]),n}(kw);xw.GOOGLE_SIGN_IN_METHOD="google.com",xw.PROVIDER_ID="google.com";var _w=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"github.com")}return v(n,null,[{key:"credential",value:function(e){return uw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(lm){return null}}}]),n}(kw);_w.GITHUB_SIGN_IN_METHOD="github.com",_w.PROVIDER_ID="github.com";var Iw=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return v(n,[{key:"_getIdTokenResponse",value:function(e){return ow(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ow(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ow(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Mb),Ew="saml.",Sw=function(e){k(n,e);var t=x(n);function n(e){return d(this,n),wk(e.startsWith(Ew),"argument-error"),t.call(this,e)}return v(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Iw.fromJSON(e);return wk(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Iw._create(r,n)}catch(i){return null}}}]),n}(gw),Tw=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"twitter.com")}return v(n,null,[{key:"credential",value:function(e,t){return uw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(lm){return null}}}]),n}(kw);function Cw(e,t){return Aw.apply(this,arguments)}function Aw(){return(Aw=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uk(t,"POST","/v1/accounts:signUp",Ok(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Tw.TWITTER_SIGN_IN_METHOD="twitter.com",Tw.PROVIDER_ID="twitter.com";var Nw=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return v(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ae(te().mark((function t(n,r,i){var a,o,s,u,c=arguments;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,db._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=Pw(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ae(te().mark((function t(n,r,i){var a;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Pw(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Pw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Dw(){return Dw=ae(te().mark((function e(t){var n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pb(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Nw({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Cw(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Nw._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Dw.apply(this,arguments)}var Rw=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o,s;return d(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(y(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return v(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(z);function Ow(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Rw._fromErrorAndOperation(e,n,t,r);throw n}))}function Lw(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Mw(e,t){return jw.apply(this,arguments)}function jw(){return jw=ae(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,Vw(!0,r,n);case 3:return e.t0=Kk,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Lw(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),jw.apply(this,arguments)}function Fw(e,t){return Uw.apply(this,arguments)}function Uw(){return Uw=ae(te().mark((function e(t,n){var r,i,a=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=eb,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Nw._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Uw.apply(this,arguments)}function Vw(e,t,n){return Bw.apply(this,arguments)}function Bw(){return(Bw=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ab(n);case 2:i=Lw(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",wk(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zw(e,t){return qw.apply(this,arguments)}function qw(){return qw=ae(te().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,eb(t,Ow(i,a,n,t),r);case 6:return wk((o=e.sent).idToken,i,"internal-error"),wk(s=Zk(o.idToken),i,"internal-error"),u=s.sub,wk(t.uid===u,i,"user-mismatch"),e.abrupt("return",Nw._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&mk(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),qw.apply(this,arguments)}function Hw(e,t){return Gw.apply(this,arguments)}function Gw(){return Gw=ae(te().mark((function e(t,n){var r,i,a,o,s=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Ow(t,i,n);case 4:return a=e.sent,e.next=7,Nw._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Gw.apply(this,arguments)}function Kw(e,t){return Ww.apply(this,arguments)}function Ww(){return(Ww=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hw(Pb(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qw(e,t){return Yw.apply(this,arguments)}function Yw(){return(Yw=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,Vw(!1,r,n.providerId);case 3:return e.abrupt("return",Fw(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xw(e,t){return Jw.apply(this,arguments)}function Jw(){return(Jw=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zw(ee(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $w(e,t){return Zw.apply(this,arguments)}function Zw(){return(Zw=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uk(t,"POST","/v1/accounts:signInWithCustomToken",Ok(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ex(){return(ex=ae(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pb(t),e.next=3,$w(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Nw._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tx=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return v(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?nx._fromServerResponse(e,t):mk(e,"internal-error")}}]),e}(),nx=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return v(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(tx);function rx(e,t,n){var r;wk((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),wk("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(wk(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(wk(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function ix(){return(ix=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),a={requestType:"PASSWORD_RESET",email:n},r&&rx(i,a,r),e.next=5,Yb(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ax(){return(ax=ae(te().mark((function e(t,n,r){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jb(ee(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ox(){return(ox=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bb(ee(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sx(e,t){return ux.apply(this,arguments)}function ux(){return(ux=ae(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,jb(r,{oobCode:n});case 3:i=e.sent,wk(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return wk(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:wk(i.mfaInfo,r,"internal-error");case 13:wk(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=tx._fromServerResponse(Pb(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cx(){return(cx=ae(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sx(ee(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lx(e,t,n){return fx.apply(this,arguments)}function fx(){return(fx=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pb(t),e.next=3,Cw(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Nw._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hx(){return(hx=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),a={requestType:"EMAIL_SIGNIN",email:n},wk(r.handleCodeInApp,i,"argument-error"),r&&rx(i,a,r),e.next=6,Jb(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dx(){return(dx=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),wk((a=yw.credentialWithLink(n,r||Sk()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Kw(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function px(e,t){return vx.apply(this,arguments)}function vx(){return(vx=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lk(t,"POST","/v1/accounts:createAuthUri",Ok(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mx(){return(mx=ae(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tk()?Sk():"http://localhost",i={identifier:n,continueUri:r},e.next=4,px(ee(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yx(){return(yx=ae(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&rx(r.auth,a,n),e.next=8,Wb(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gx(){return(gx=ae(te().mark((function e(t,n,r){var i,a,o,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&rx(i.auth,o,r),e.next=8,Zb(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kx(e,t){return bx.apply(this,arguments)}function bx(){return(bx=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wx(){return(wx=ae(te().mark((function e(t,n){var r,i,a,o,s,u,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ee(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,eb(a,kx(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xx(e,t,n){return _x.apply(this,arguments)}function _x(){return(_x=ae(te().mark((function e(t,n,r){var i,a,o,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,eb(t,Ub(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ix=v((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Ex=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i)).username=a,o}return v(n)}(Ix),Sx=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return v(n)}(Ix),Tx=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return v(n)}(Ex),Cx=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return v(n)}(Ix),Ax=function(e){k(n,e);var t=x(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return v(n)}(Ex);function Nx(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Zk(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Ix(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Sx(a,i);case"github.com":return new Tx(a,i);case"google.com":return new Cx(a,i);case"twitter.com":return new Ax(a,i,e.screenName||null);case"custom":case"anonymous":return new Ix(a,null);default:return new Ix(a,r,i)}}(n)}var Px=function(){function e(t,n,r){d(this,e),this.type=t,this.credential=n,this.auth=r}return v(e,[{key:"toJSON",value:function(){return{multiFactorSession:h({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Dx=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return v(e,[{key:"resolveSignIn",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Pb(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return tx._fromServerResponse(r,e)}));wk(i.mfaPendingCredential,r,"internal-error");var o=Px._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=ae(te().mark((function e(t){var a,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Nw._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return wk(n.user,r,"internal-error"),e.abrupt("return",Nw._forOperation(n.user,n.operationType,s));case 17:mk(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Rx(e,t){return Lk(e,"POST","/v2/accounts/mfaEnrollment:start",Ok(e,t))}var Ox=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return tx._fromServerResponse(t.auth,e)})))}))}return v(e,[{key:"getSession",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Px,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=ae(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,eb(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=ae(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,eb(this.user,Lk(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Ok(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Lx=new WeakMap;var Mx="__sak",jx=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return v(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Mx,"1"),this.storage.removeItem(Mx),Promise.resolve(!0)):Promise.resolve(!1)}catch(lm){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Fx=10,Ux=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=L();return bb(e)||Sb(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Tb(),e._shouldAllowMigration=!0,e}return v(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);U()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Fx):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ae(te().mark((function e(t,r){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt(b(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ae(te().mark((function e(t){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt(b(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt(b(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(jx);Ux.type="LOCAL";var Vx=Ux,Bx=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return v(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(jx);Bx.type="SESSION";var zx=Bx;function qx(e){return Promise.all(e.map(function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Hx=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return v(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ae(te().mark((function e(t){var n,r,i,a,o,s,u,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,qx(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Gx(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Hx.receivers=[];var Kx=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return v(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ae(te().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Gx("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Wx(){return window}function Qx(){return"undefined"!==typeof Wx().WorkerGlobalScope&&"function"===typeof Wx().importScripts}function Yx(){return Xx.apply(this,arguments)}function Xx(){return(Xx=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Jx(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var $x="firebaseLocalStorageDb",Zx=1,e_="firebaseLocalStorage",t_="fbase_key",n_=function(){function e(t){d(this,e),this.request=t}return v(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function r_(e,t){return e.transaction([e_],t?"readwrite":"readonly").objectStore(e_)}function i_(){var e=indexedDB.deleteDatabase($x);return new n_(e).toPromise()}function a_(){var e=indexedDB.open($x,Zx);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(e_,{keyPath:t_})}catch(r){n(r)}})),e.addEventListener("success",ae(te().mark((function n(){var r;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(e_)){n.next=12;break}return r.close(),n.next=5,i_();case 5:return n.t0=t,n.next=8,a_();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function o_(e,t,n){return s_.apply(this,arguments)}function s_(){return s_=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r_(t,!0).put((h(i={},t_,n),h(i,"value",r),i)),e.abrupt("return",new n_(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),s_.apply(this,arguments)}function u_(e,t){return c_.apply(this,arguments)}function c_(){return c_=ae(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=r_(t,!1).get(n),e.next=3,new n_(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),c_.apply(this,arguments)}function l_(e,t){var n=r_(e,!0).delete(t);return new n_(n).toPromise()}var f_=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return v(e,[{key:"_openDb",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,a_();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qx()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ae(te().mark((function e(){var t=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Hx._getInstance(Qx()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ae(te().mark((function e(n,r){var i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ae(te().mark((function e(){var t,n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yx();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Kx(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Jx()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,a_();case 5:return t=e.sent,e.next=8,o_(t,Mx,"1");case 8:return e.next=10,l_(t,Mx);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ae(te().mark((function e(t,n){var r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return o_(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return u_(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ae(te().mark((function e(t){var n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return l_(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ae(te().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=r_(e,!1).getAll();return new n_(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=m(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();f_.type="LOCAL";var h_=f_;function d_(e,t){return Lk(e,"POST","/v2/accounts/mfaSignIn:start",Ok(e,t))}function p_(e){return v_.apply(this,arguments)}function v_(){return(v_=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lk(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m_(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=yk("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function y_(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var g_=1e12,k_=function(){function e(t){d(this,e),this.auth=t,this.counter=g_,this._widgets=new Map}return v(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new b_(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||g_;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||g_;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||g_,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),b_=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;wk(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return v(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var w_=y_("rcb"),x_=new Ak(3e4,6e4),__="https://www.google.com/recaptcha/api.js?",I_=function(){function e(){var t;d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Wx().grecaptcha)||void 0===t?void 0:t.render)}return v(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return wk(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Wx().grecaptcha):new Promise((function(r,i){var a=Wx().setTimeout((function(){i(yk(e,"network-request-failed"))}),x_.get());Wx()[w_]=function(){Wx().clearTimeout(a),delete Wx()[w_];var o=Wx().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(yk(e,"internal-error"))},m_("".concat(__,"?").concat(Q({onload:w_,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(yk(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Wx().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var E_=function(){function e(){d(this,e)}return v(e,[{key:"load",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new k_(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),S_="recaptcha",T_={theme:"light",type:"image"},C_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},T_),r=arguments.length>2?arguments[2]:void 0;d(this,e),this.parameters=n,this.type=S_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pb(r),this.isInvisible="invisible"===this.parameters.size,wk("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;wk(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new E_:new I_,this.validateStartingState()}return v(e,[{key:"verify",value:function(){var e=ae(te().mark((function e(){var t,n,r,i=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){wk(!this.parameters.sitekey,this.auth,"argument-error"),wk(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),wk("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Wx()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){wk(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=ae(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wk(Tk()&&!Qx(),this.auth,"internal-error"),e.next=3,A_();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,p_(this.auth);case 8:wk(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return wk(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function A_(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var N_=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return v(e,[{key:"confirm",value:function(e){var t=vw._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function P_(){return(P_=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pb(t),e.next=3,L_(i,n,ee(r));case 3:return a=e.sent,e.abrupt("return",new N_(a,(function(e){return Kw(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D_(e,t,n){return R_.apply(this,arguments)}function R_(){return(R_=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),e.next=3,Vw(!1,i,"phone");case 3:return e.next=5,L_(i.auth,n,ee(r));case 5:return a=e.sent,e.abrupt("return",new N_(a,(function(e){return Qw(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O_(){return(O_=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),e.next=3,L_(i.auth,n,ee(r));case 3:return a=e.sent,e.abrupt("return",new N_(a,(function(e){return Xw(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L_(e,t,n){return M_.apply(this,arguments)}function M_(){return M_=ae(te().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,wk("string"===typeof a,t,"argument-error"),wk(r.type===S_,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return wk("enroll"===s.type,t,"internal-error"),e.next=13,Rx(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return wk("signin"===s.type,t,"internal-error"),wk(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,d_(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,cw(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),M_.apply(this,arguments)}function j_(){return(j_=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fw(ee(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F_=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=Pb(t)}return v(e,[{key:"verifyPhoneNumber",value:function(e,t){return L_(this.auth,e,ee(t))}}],[{key:"credential",value:function(e,t){return vw._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?vw._fromTokenResponse(n,r):null}}]),e}();function U_(e,t){return t?Ek(t):(wk(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}F_.PROVIDER_ID="phone",F_.PHONE_SIGN_IN_METHOD="phone";var V_=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return v(n,[{key:"_getIdTokenResponse",value:function(e){return ow(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ow(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ow(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Mb);function B_(e){return Hw(e.auth,new V_(e),e.bypassAuthState)}function z_(e){var t=e.auth,n=e.user;return wk(n,t,"internal-error"),zw(n,new V_(e),e.bypassAuthState)}function q_(e){return H_.apply(this,arguments)}function H_(){return(H_=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,wk(r=t.user,n,"internal-error"),e.abrupt("return",Fw(r,new V_(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G_=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return v(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ae(te().mark((function t(n,r){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ae(te().mark((function e(t){var n,r,i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B_;case"linkViaPopup":case"linkViaRedirect":return q_;case"reauthViaPopup":case"reauthViaRedirect":return z_;default:mk(this.auth,"internal-error")}}},{key:"resolve",value:function(e){_k(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){_k(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),K_=new Ak(2e3,1e4);function W_(e,t,n){return Q_.apply(this,arguments)}function Q_(){return(Q_=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pb(t),kk(t,n,gw),a=U_(i,r),o=new $_(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y_(){return(Y_=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kk((i=ee(t)).auth,n,gw),a=U_(i.auth,r),o=new $_(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X_(e,t,n){return J_.apply(this,arguments)}function J_(){return(J_=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kk((i=ee(t)).auth,n,gw),a=U_(i.auth,r),o=new $_(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $_=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o){var s;return d(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=y(s),s}return v(n,[{key:"executeNotNull",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return wk(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ae(te().mark((function e(){var t,n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _k(1===this.filter.length,"Popup operations only handle one event"),t=Gx(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(yk(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(yk(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(yk(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,K_.get())}()}}]),n}(G_);$_.currentPopupAction=null;var Z_="pendingRedirect",eI=new Map,tI=function(e){k(n,e);var t=x(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return v(n,[{key:"execute",value:function(){var e=ae(te().mark((function e(){var t,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=eI.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,nI(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Kt(b(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:eI.set(this.auth._key(),t);case 21:return this.bypassAuthState||eI.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ae(te().mark((function e(t){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Kt(b(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Kt(b(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(G_);function nI(e,t){return rI.apply(this,arguments)}function rI(){return(rI=ae(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=uI(n),i=sI(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iI(e,t){return aI.apply(this,arguments)}function aI(){return(aI=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sI(t)._set(uI(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oI(e,t){eI.set(e._key(),t)}function sI(e){return Ek(e._redirectPersistence)}function uI(e){return mb(Z_,e.config.apiKey,e.name)}function cI(e,t,n){return function(e,t,n){return lI.apply(this,arguments)}(e,t,n)}function lI(){return(lI=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pb(t),kk(t,n,gw),e.next=4,i._initializationPromise;case 4:return a=U_(i,r),e.next=7,iI(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fI(e,t,n){return function(e,t,n){return hI.apply(this,arguments)}(e,t,n)}function hI(){return(hI=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kk((i=ee(t)).auth,n,gw),e.next=4,i.auth._initializationPromise;case 4:return a=U_(i.auth,r),e.next=7,iI(a,i.auth);case 7:return e.next=9,kI(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dI(e,t,n){return function(e,t,n){return pI.apply(this,arguments)}(e,t,n)}function pI(){return(pI=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kk((i=ee(t)).auth,n,gw),e.next=4,i.auth._initializationPromise;case 4:return a=U_(i.auth,r),e.next=7,Vw(!1,i,n.providerId);case 7:return e.next=9,iI(a,i.auth);case 9:return e.next=11,kI(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vI(e,t){return mI.apply(this,arguments)}function mI(){return(mI=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pb(t)._initializationPromise;case 2:return e.abrupt("return",yI(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yI(e,t){return gI.apply(this,arguments)}function gI(){return gI=ae(te().mark((function e(t,n){var r,i,a,o,s,u=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=Pb(t),a=U_(i,n),o=new tI(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),gI.apply(this,arguments)}function kI(e){return bI.apply(this,arguments)}function bI(){return(bI=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gx("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wI=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return v(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _I(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!_I(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(yk(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xI(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(xI(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function xI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function _I(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function II(e){return EI.apply(this,arguments)}function EI(){return EI=ae(te().mark((function e(t){var n,r=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Lk(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),EI.apply(this,arguments)}var SI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TI=/^https?/;function CI(){return(CI=ae(te().mark((function e(t){var n,r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,II(t);case 4:n=e.sent,r=n.authorizedDomains,i=m(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!AI(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:mk(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function AI(e){var t=Sk(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!TI.test(r))return!1;if(SI.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var NI=new Ak(3e4,6e4);function PI(){var e=Wx().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=re(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var DI=null;function RI(e){return DI=DI||function(e){return new Promise((function(t,n){var r,i,a;function o(){PI(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){PI(),n(yk(e,"network-request-failed"))},timeout:NI.get()})}if(null===(i=null===(r=Wx().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Wx().gapi)||void 0===a?void 0:a.load)){var s=y_("iframefcb");return Wx()[s]=function(){gapi.load?o():n(yk(e,"network-request-failed"))},m_("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw DI=null,e}))}(e),DI}var OI=new Ak(5e3,15e3),LI="__/auth/iframe",MI="emulator/auth/iframe",jI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UI(e){var t=e.config;wk(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Nk(t,MI):"https://".concat(e.config.authDomain,"/").concat(LI),r={apiKey:t.apiKey,appName:e.name,v:nt},i=FI.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Q(r).slice(1))}function VI(e){return BI.apply(this,arguments)}function BI(){return BI=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RI(t);case 2:return n=e.sent,wk(r=Wx().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:UI(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jI,dontclear:!0},(function(e){return new Promise(function(){var n=ae(te().mark((function n(r,i){var a,o,s;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Wx().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=yk(t,"network-request-failed"),o=Wx().setTimeout((function(){i(a)}),OI.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),BI.apply(this,arguments)}var zI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qI=500,HI=600,GI="_blank",KI="http://localhost",WI=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return v(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function QI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:qI,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:HI,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},zI),{width:r.toString(),height:i.toString(),top:a,left:o}),l=L().toLowerCase();n&&(s=wb(l)?GI:n),kb(l)&&(t=t||KI,u.scrollbars="yes");var f=Object.entries(u).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Sb(arguments.length>0&&void 0!==arguments[0]?arguments[0]:L())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new WI(null);var h=window.open(t||"",s,f);wk(h,e,"popup-blocked");try{h.focus()}catch(d){}return new WI(h)}var YI="__/auth/handler",XI="emulator/auth/handler";function JI(e,t,n,r,i,a){wk(e.config.authDomain,e,"auth-domain-config-required"),wk(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:nt,eventId:i};if(t instanceof gw){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var l=c(u[s],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof kw){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(YI);return Nk(t,XI)}(e),"?").concat(Q(p).slice(1))}var $I="webStorageSupport",ZI=function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zx,this._completeRedirectFn=yI,this._overrideRedirectResult=oI}return v(e,[{key:"_openPopup",value:function(){var e=ae(te().mark((function e(t,n,r,i){var a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _k(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=JI(t,n,r,Sk(),i),e.abrupt("return",QI(t,o,Gx()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ae(te().mark((function e(t,n,r,i){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=JI(t,n,r,Sk(),i),Wx().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(_k(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VI(t);case 2:return n=e.sent,r=new wI(t),n.register("authEvent",(function(e){return wk(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send($I,{type:$I},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[$I];void 0!==i&&t(!!i),mk(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return CI.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Tb()||bb()||Sb()}}]),e}(),eE=ZI,tE=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return v(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Lk(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ok(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Lk(e,"POST","/v2/accounts/mfaSignIn:finalize",Ok(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){d(this,e),this.factorId=t}return v(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return xk("unexpected MultiFactorSessionType")}}}]),e}()),nE=function(){function e(){d(this,e)}return v(e,null,[{key:"assertion",value:function(e){return tE._fromCredential(e)}}]),e}();nE.FACTOR_ID="phone";var rE="@firebase/auth",iE="0.21.5",aE=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return v(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){wk(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var oE;!function(e){var t;null===(t=D())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function sE(){return window}oE="Browser",Ye(new oe("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){wk(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),wk(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:oE,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cb(oE)},i=new Nb(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ek);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Ye(new oe("auth-internal",(function(e){return function(e){return new aE(e)}(Pb(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ut(rE,iE,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(oE)),ut(rE,iE,"esm2017");var uE=2e3;function cE(e,t,n){return lE.apply(this,arguments)}function lE(){return lE=ae(te().mark((function e(t,n,r){var i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=sE(),o=a.BuildInfo,_k(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,mE(n.sessionId);case 4:return s=e.sent,u={},Sb()?u.ibi=o.packageName:_b()?u.apn=o.packageName:mk(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",JI(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),lE.apply(this,arguments)}function fE(){return(fE=ae(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sE(),r=n.BuildInfo,i={},Sb()?i.iosBundleId=r.packageName:_b()?i.androidPackageName=r.packageName:mk(t,"operation-not-supported-in-this-environment"),e.next=5,II(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hE(e){var t=sE().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function dE(e,t,n){return pE.apply(this,arguments)}function pE(){return pE=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sE(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(yk(t,"redirect-cancelled-by-user"))}),uE))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),_b()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),pE.apply(this,arguments)}function vE(e){var t,n,r,i,a,o,s,u,c,l,f=sE();wk("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),wk("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),wk("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),wk("function"===typeof(null===(u=null===(s=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),wk("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function mE(e){return yE.apply(this,arguments)}function yE(){return(yE=ae(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gE(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gE(e){if(_k(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var kE=20,bE=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return v(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Kt(b(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(wI);function wE(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:SE(),postBody:null,tenantId:e.tenantId,error:yk(e,"no-auth-event")}}function xE(e,t){return TE()._set(CE(e),t)}function _E(e){return IE.apply(this,arguments)}function IE(){return(IE=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TE()._get(CE(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,TE()._remove(CE(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function EE(e,t){var n,r,i=function(e){var t=AE(e),n=t.link?decodeURIComponent(t.link):void 0,r=AE(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return AE(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=AE(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?yk(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function SE(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<kE;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function TE(){return Ek(Vx)}function CE(e){return mb("authEvent",e.config.apiKey,e.name)}function AE(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=ak(e.split("?"));t[0];return Y(t.slice(1).join("?"))}var NE=function(){function e(){d(this,e),this._redirectPersistence=zx,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=yI,this._overrideRedirectResult=oI}return v(e,[{key:"_initialize",value:function(){var e=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new bE(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){mk(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=ae(te().mark((function e(t,n,r,i){var a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vE(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),eI.clear(),e.next=10,this._originValidation(t);case 10:return o=wE(t,r,i),e.next=13,xE(t,o);case 13:return e.next=15,cE(t,o,n);case 15:return s=e.sent,e.next=18,hE(s);case 18:return u=e.sent,e.abrupt("return",dE(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return fE.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=sE(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(ae(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_E(e);case 2:t.onEvent(DE());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=ae(te().mark((function n(r){var i,a;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,_E(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=EE(i,r.url)),t.onEvent(a||DE());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");sE().handleOpenURL=function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),PE=NE;function DE(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:yk("no-auth-event")}}var RE="@firebase/auth-compat",OE="0.3.5",LE=1e3;function ME(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function jE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return!("file:"!==ME()&&"ionic:"!==ME()&&"capacitor:"!==ME()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function FE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return U()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/Edge\/\d+/.test(e)}(e)}function UE(){try{var e=self.localStorage,t=Gx();if(e)return e.setItem(t,"1"),e.removeItem(t),!FE()||V()}catch(n){return VE()&&V()}return!1}function VE(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function BE(){return("http:"===ME()||"https:"===ME()||j()||jE())&&!(F()||M())&&UE()&&!VE()}function zE(){return jE()&&"undefined"!==typeof document}function qE(){return HE.apply(this,arguments)}function HE(){return(HE=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zE()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),LE);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var GE={LOCAL:"local",NONE:"none",SESSION:"session"},KE=wk,WE="persistence";function QE(e,t){KE(Object.values(GE).includes(t),e,"invalid-persistence-type"),F()?KE(t!==GE.SESSION,e,"unsupported-persistence-type"):M()?KE(t===GE.NONE,e,"unsupported-persistence-type"):VE()?KE(t===GE.NONE||t===GE.LOCAL&&V(),e,"unsupported-persistence-type"):KE(t===GE.NONE||UE(),e,"unsupported-persistence-type")}function YE(e){return XE.apply(this,arguments)}function XE(){return(XE=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=JE(),r=mb(WE,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JE(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var $E=wk,ZE=function(){function e(){d(this,e),this.browserResolver=Ek(eE),this.cordovaResolver=Ek(PE),this.underlyingResolver=null,this._redirectPersistence=zx,this._completeRedirectFn=yI,this._overrideRedirectResult=oI}return v(e,[{key:"_initialize",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=ae(te().mark((function e(t,n,r,i){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ae(te().mark((function e(t,n,r,i){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return zE()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return $E(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,qE();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function eS(e){return e.unwrap()}function tS(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new oS(e,function(e,t){var n,r=ee(e),i=t;return wk(t.customData.operationType,r,"argument-error"),wk(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Dx._fromError(r,i)}(e,t));else if(r){var i=nS(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function nS(e){var t=(e instanceof z?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof z)&&"temporaryProof"in t&&"phoneNumber"in t)return F_.credentialFromResult(e);var n,r=t.providerId;if(!r||r===uk.PASSWORD)return null;switch(r){case uk.GOOGLE:n=xw;break;case uk.FACEBOOK:n=ww;break;case uk.GITHUB:n=_w;break;case uk.TWITTER:n=Tw;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?Iw._create(r,s):uw._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new bw(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof z?n.credentialFromError(e):n.credentialFromResult(e)}function rS(e,t){return t.catch((function(t){throw t instanceof z&&tS(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,nS(t)),additionalUserInfo:Nx(e),user:sS.getOrCreate(r)}}))}function iS(e,t){return aS.apply(this,arguments)}function aS(){return(aS=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return rS(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oS=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=t.wrapped()}return v(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return rS(eS(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),sS=function(){function e(t){d(this,e),this._delegate=t,this.multiFactor=function(e){var t=ee(e);return Lx.has(t)||Lx.set(t,Ox._fromUser(t)),Lx.get(t)}(t)}return v(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rS(this.auth,Qw(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",iS(this.auth,D_(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rS(this.auth,X_(this._delegate,t,ZE)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,YE(Pb(this.auth));case 2:return e.abrupt("return",dI(this._delegate,t,ZE));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rS(this.auth,Xw(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return iS(this.auth,function(e,t,n){return O_.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return rS(this.auth,function(e,t,n){return Y_.apply(this,arguments)}(this._delegate,e,ZE))}},{key:"reauthenticateWithRedirect",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,YE(Pb(this.auth));case 2:return e.abrupt("return",fI(this._delegate,t,ZE));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return yx.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mw(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return xx(ee(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return xx(ee(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return j_.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return wx.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return gx.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();sS.USER_MAP=new WeakMap;var uS=wk,cS=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;uS(r,"invalid-api-key",{appName:t.name}),uS(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?ZE:void 0;this._delegate=n.initialize({options:{persistence:fS(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(fk),this.linkUnderlyingAuth()}return v(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?sS.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Rb(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return ox.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return sx(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return ax.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rS(this._delegate,lx(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return mx.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=mw.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uS(BE(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,vI(this._delegate,ZE);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",rS(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Pb(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=lS(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=lS(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return hx.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return ix.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:QE(this._delegate,t),e.t0=t,e.next=e.t0===GE.SESSION?4:e.t0===GE.LOCAL?6:e.t0===GE.NONE?11:13;break;case 4:return n=zx,e.abrupt("break",14);case 6:return e.next=8,Ek(h_)._isAvailable();case 8:return r=e.sent,n=r?h_:Vx,e.abrupt("break",14);case 11:return n=vb,e.abrupt("break",14);case 13:return e.abrupt("return",mk("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return rS(this._delegate,function(e){return Dw.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return rS(this._delegate,Kw(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return rS(this._delegate,function(e,t){return ex.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return rS(this._delegate,function(e,t,n){return Kw(ee(e),yw.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return rS(this._delegate,function(e,t,n){return dx.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return iS(this._delegate,function(e,t,n){return P_.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uS(BE(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",rS(this._delegate,W_(this._delegate,t,ZE)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uS(BE(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,YE(this._delegate);case 3:return e.abrupt("return",cI(this._delegate,t,ZE));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return cx.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function lS(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&sS.getOrCreate(e))},error:t,complete:n}}function fS(e,t){var n=function(e,t){var n=JE();if(!n)return[];var r=mb(WE,e,t);switch(n.getItem(r)){case GE.NONE:return[vb];case GE.LOCAL:return[h_,zx];case GE.SESSION:return[zx];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(h_)||n.push(h_),"undefined"!==typeof window)for(var r=0,i=[Vx,zx];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(vb)||n.push(vb),n}cS.Persistence=GE;var hS=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new F_(eS(jt.auth()))}return v(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return F_.credential(e,t)}}]),e}();hS.PHONE_SIGN_IN_METHOD=F_.PHONE_SIGN_IN_METHOD,hS.PROVIDER_ID=F_.PROVIDER_ID;var dS,pS=wk,vS=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jt.app();d(this,e),pS(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new C_(t,n,i.auth()),this.type=this._delegate.type}return v(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}(),mS="auth-compat";function yS(){return yS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yS.apply(this,arguments)}!function(e){e.INTERNAL.registerComponent(new oe(mS,(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new cS(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ck.EMAIL_SIGNIN,PASSWORD_RESET:ck.PASSWORD_RESET,RECOVER_EMAIL:ck.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ck.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ck.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ck.VERIFY_EMAIL}},EmailAuthProvider:yw,FacebookAuthProvider:ww,GithubAuthProvider:_w,GoogleAuthProvider:xw,OAuthProvider:bw,SAMLAuthProvider:Sw,PhoneAuthProvider:hS,PhoneMultiFactorGenerator:nE,RecaptchaVerifier:vS,TwitterAuthProvider:Tw,Auth:cS,AuthCredential:Mb,Error:z}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion(RE,OE)}(jt),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(dS||(dS={}));var gS,kS="popstate";function bS(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function wS(e,t){return{usr:e.state,key:e.key,idx:t}}function xS(e,t,n,r){return void 0===n&&(n=null),yS({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?IS(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function _S(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function IS(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ES(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,u=void 0!==s&&s,c=o.history,l=dS.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=dS.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:m.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:_S(e);return bS(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(yS({},c.state,{idx:h}),""));var m={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(kS,p),f=e,function(){o.removeEventListener(kS,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=dS.Push;var r=xS(m.location,e,t);n&&n(r,e);var i=wS(r,h=d()+1),a=m.createHref(r);try{c.pushState(i,"",a)}catch(s){o.location.assign(a)}u&&f&&f({action:l,location:m.location,delta:1})},replace:function(e,t){l=dS.Replace;var r=xS(m.location,e,t);n&&n(r,e);var i=wS(r,h=d()),a=m.createHref(r);c.replaceState(i,"",a),u&&f&&f({action:l,location:m.location,delta:0})},go:function(e){return c.go(e)}};return m}function SS(e,t,n){void 0===n&&(n="/");var r=VS(("string"===typeof t?IS(t):t).pathname||"/",n);if(null==r)return null;var i=TS(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=jS(i[o],US(r));return a}function TS(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(bS(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=GS([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(bS(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),TS(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:MS(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=m(CS(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function CS(e){var t=e.split("/");if(0===t.length)return[];var n=ak(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var s=CS(i.join("/")),u=[];return u.push.apply(u,re(s.map((function(e){return""===e?o:[o,e].join("/")})))),a&&u.push.apply(u,re(s)),u.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(gS||(gS={}));var AS=/^:\w+$/,NS=3,PS=2,DS=1,RS=10,OS=-2,LS=function(e){return"*"===e};function MS(e,t){var n=e.split("/"),r=n.length;return n.some(LS)&&(r+=OS),t&&(r+=PS),n.filter((function(e){return!LS(e)})).reduce((function(e,t){return e+(AS.test(t)?NS:""===t?DS:RS)}),r)}function jS(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=FS({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var f=s.route;a.push({params:r,pathname:GS([i,l.pathname]),pathnameBase:KS(GS([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=GS([i,l.pathnameBase]))}return a}function FS(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);BS("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return BS(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l[n]||"",t),e}),{}),pathname:s,pathnameBase:u,pattern:e}}function US(e){try{return decodeURI(e)}catch(t){return BS(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function VS(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function BS(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function zS(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function qS(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function HS(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=IS(e):(bS(!(i=yS({},e)).pathname||!i.pathname.includes("?"),zS("?","pathname","search",i)),bS(!i.pathname||!i.pathname.includes("#"),zS("#","pathname","hash",i)),bS(!i.search||!i.search.includes("#"),zS("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;i.pathname=c.join("/")}a=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?IS(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:WS(a),hash:QS(s)}}(i,a),f=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var GS=function(e){return e.join("/").replace(/\/\/+/g,"/")},KS=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},WS=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},QS=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},YS=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n)}(I(Error));function XS(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var JS=["post","put","patch","delete"],$S=(new Set(JS),["get"].concat(JS));new Set($S),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function ZS(){return ZS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZS.apply(this,arguments)}var eT="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},tT=t.useState,nT=t.useEffect,rT=t.useLayoutEffect,iT=t.useDebugValue;function aT(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!eT(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,r.useSyncExternalStore;var oT=t.createContext(null);var sT=t.createContext(null);var uT=t.createContext(null);var cT=t.createContext(null);var lT=t.createContext(null);var fT=t.createContext({outlet:null,matches:[]});var hT=t.createContext(null);function dT(){return null!=t.useContext(lT)}function pT(){return dT()||bS(!1),t.useContext(lT).location}function vT(){dT()||bS(!1);var e=t.useContext(cT),n=e.basename,r=e.navigator,i=t.useContext(fT).matches,a=pT().pathname,o=JSON.stringify(qS(i).map((function(e){return e.pathnameBase}))),s=t.useRef(!1);t.useEffect((function(){s.current=!0}));var u=t.useCallback((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=HS(e,JSON.parse(o),a,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:GS([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,o,a]);return u}function mT(e,n){var r=(void 0===n?{}:n).relative,i=t.useContext(fT).matches,a=pT().pathname,o=JSON.stringify(qS(i).map((function(e){return e.pathnameBase})));return t.useMemo((function(){return HS(e,JSON.parse(o),a,"path"===r)}),[e,o,a,r])}function yT(){var e=function(){var e,n=t.useContext(hT),r=_T(kT.UseRouteError),i=IT(kT.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=XS(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var gT,kT,bT=function(e){k(r,e);var n=x(r);function r(e){var t;return d(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return v(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(fT.Provider,{value:this.props.routeContext},t.createElement(hT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(t.Component);function wT(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(oT);return a&&a.static&&a.staticContext&&r.route.errorElement&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(fT.Provider,{value:n},i)}function xT(e,n,r){if(void 0===n&&(n=[]),null==e){if(null==r||!r.errors)return null;e=r.matches}var i=e,a=null==r?void 0:r.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||bS(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,s){var u=o.route.id?null==a?void 0:a[o.route.id]:null,c=r?o.route.errorElement||t.createElement(yT,null):null,l=n.concat(i.slice(0,s+1)),f=function(){return t.createElement(wT,{match:o,routeContext:{outlet:e,matches:l}},u?c:void 0!==o.route.element?o.route.element:e)};return r&&(o.route.errorElement||0===s)?t.createElement(bT,{location:r.location,component:c,error:u,children:f(),routeContext:{outlet:null,matches:l}}):f()}),null)}function _T(e){var n=t.useContext(sT);return n||bS(!1),n}function IT(e){var n=function(e){var n=t.useContext(fT);return n||bS(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||bS(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(gT||(gT={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(kT||(kT={}));var ET;function ST(e){var n=e.to,r=e.replace,i=e.state,a=e.relative;dT()||bS(!1);var o=t.useContext(sT),s=vT();return t.useEffect((function(){o&&"idle"!==o.navigation.state||s(n,{replace:r,state:i,relative:a})})),null}function TT(e){bS(!1)}function CT(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,s=e.navigationType,u=void 0===s?dS.Pop:s,c=e.navigator,l=e.static,f=void 0!==l&&l;dT()&&bS(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=IS(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,b=void 0===k?"":k,w=p.state,x=void 0===w?null:w,_=p.key,I=void 0===_?"default":_,E=t.useMemo((function(){var e=VS(m,h);return null==e?null:{pathname:e,search:g,hash:b,state:x,key:I}}),[h,m,g,b,x,I]);return null==E?null:t.createElement(cT.Provider,{value:d},t.createElement(lT.Provider,{children:a,value:{location:E,navigationType:u}}))}function AT(e){var n=e.children,r=e.location,i=t.useContext(oT);return function(e,n){dT()||bS(!1);var r,i=t.useContext(cT).navigator,a=t.useContext(sT),o=t.useContext(fT).matches,s=o[o.length-1],u=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),l=(s&&s.route,pT());if(n){var f,h="string"===typeof n?IS(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||bS(!1),r=h}else r=l;var d=r.pathname||"/",p=SS(e,{pathname:"/"===c?d:d.slice(c.length)||"/"}),v=xT(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:GS([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:GS([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,a||void 0);return n&&v?t.createElement(lT.Provider,{value:{location:ZS({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:dS.Pop}},v):v}(i&&!n?i.router.routes:PT(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(ET||(ET={}));var NT=new Promise((function(){}));t.Component;function PT(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e))if(e.type!==t.Fragment){e.type!==TT&&bS(!1),e.props.index&&e.props.children&&bS(!1);var a=[].concat(re(n),[i]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=PT(e.props.children,a)),r.push(o)}else r.push.apply(r,PT(e.props.children,n))})),r}function DT(){return DT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DT.apply(this,arguments)}function RT(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var OT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function LT(e){var n,r=e.basename,i=e.children,a=e.window,o=t.useRef();null==o.current&&(o.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),ES((function(e,t){var n=e.location;return xS("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:_S(t)}),null,n)));var s=o.current,u=c(t.useState({action:s.action,location:s.location}),2),l=u[0],f=u[1];return t.useLayoutEffect((function(){return s.listen(f)}),[s]),t.createElement(CT,{basename:r,children:i,location:l.location,navigationType:l.action,navigator:s})}var MT="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,jT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FT=t.forwardRef((function(e,n){var r,i=e.onClick,a=e.relative,o=e.reloadDocument,s=e.replace,u=e.state,c=e.target,l=e.to,f=e.preventScrollReset,h=RT(e,OT),d=t.useContext(cT).basename,p=!1;if("string"===typeof l&&jT.test(l)&&(r=l,MT)){var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),y=VS(m.pathname,d);m.origin===v.origin&&null!=y?l=y+m.search+m.hash:p=!0}var g=function(e,n){var r=(void 0===n?{}:n).relative;dT()||bS(!1);var i=t.useContext(cT),a=i.basename,o=i.navigator,s=mT(e,{relative:r}),u=s.hash,c=s.pathname,l=s.search,f=c;return"/"!==a&&(f="/"===c?a:GS([a,c])),o.createHref({pathname:f,search:l,hash:u})}(l,{relative:a}),k=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=r.preventScrollReset,u=r.relative,c=vT(),l=pT(),f=mT(e,{relative:u});return t.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:_S(l)===_S(f);c(e,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[l,c,f,a,o,i,e,s,u])}(l,{replace:s,state:u,target:c,preventScrollReset:f,relative:a});return t.createElement("a",DT({},h,{href:r||g,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:n,target:c}))}));var UT,VT;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(UT||(UT={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(VT||(VT={}));var BT={mainDiv:"Subir_mainDiv__u9Y11",dragArea:"Subir_dragArea__FUH23",active:"Subir_active__3a8hK",icon:"Subir_icon__eGdMy",listaSinOrden:"Subir_listaSinOrden__9njDH",submit:"Subir_submit__Yqrpv",visible:"Subir_visible__DkV8q",disabled:"Subir_disabled__vYQin",form:"Subir_form__hTPjz",archivoCargado:"Subir_archivoCargado__iJl2k",formAndList:"Subir_formAndList__lQnX-",titulo:"Subir_titulo__e3Fip",descripcion:"Subir_descripcion__Y0fQe",descripcionTiny:"Subir_descripcionTiny__fOvTy",spinner:"Subir_spinner__NfA7x",rotate:"Subir_rotate__nZCXi",conversor:"Subir_conversor__o5ofj",linkContainer:"Subir_linkContainer__qxSNV",compresorContainer:"Subir_compresorContainer__XIOqO"},zT=function(e,t,n,r){var i=e.file.files[0],a=new FileReader;a.readAsArrayBuffer(i),a.onload=function(a){var o=Ft,s=new URLSearchParams({filename:e.filename.value||i.name,tipo:e.elements.tipo.value,materia:e.materias.value,anio:e.elements.anio.value,cuatri:"",mimeType:i.type,mail:n.currentUser.email,userName:r});fetch("".concat(o,"?").concat(s),{method:"POST",body:JSON.stringify(re(new Int8Array(a.target.result)))}).then((function(e){return e.json()})).then((function(e){e?t("succes",e):t("error")})).catch((function(e){return t(e)}))}},qT=function(e,t,n,r){var i=Ft,a=new URLSearchParams({fileRow:e,fileUrl:t,fileName:n});fetch("".concat(i,"?").concat(a),{method:"POST",mode:"no-cors"}).then((function(e){200===e.status||0===e.status?r("succes"):r("ResponseError")})).catch((function(e){r(e)}))},HT=n(184);function GT(e){var t=e.children;return(0,HT.jsx)("div",{style:{position:"fixed",top:"0",left:"50%",transform:"translate(-50%,0)",zIndex:"10"},children:t})}var KT={alert:"Alert_alert__Dtm05",apareciendo:"Alert_apareciendo__g+EPR",closebtn:"Alert_closebtn__uBQj7",unloadBar:"Alert_unloadBar__H4Y5H",unload:"Alert_unload__V8JEy"};function WT(e){var n=e.tipo,r=e.texto,i=e.onAlertShow,a=e.onAlertClose,o=e.setShowAlert,s=c((0,t.useState)(null),2),u=s[0],l=s[1],f=c((0,t.useState)("red"),2),h=f[0],d=f[1],p=c((0,t.useState)(null),2),v=p[0],m=p[1],y=c((0,t.useState)(!1),2),g=y[0],k=y[1],b=c((0,t.useState)(!1),2),w=b[0],x=b[1];(0,t.useEffect)((function(){g&&v&&(v(),k(!1))}),[g]);var _=function(){u.style.display="none",a&&a()};return(0,t.useEffect)((function(){"buena"===n?d("green"):"mala"===n?d("red"):"intermedia"===n?d("rgb(215,173,3)"):"neutral"===n&&d("gray")}),[]),(0,t.useEffect)((function(){if(o&&u){var e,t=function(){if("block"===u.style.display)return u.style.display="none",x((function(e){return!e})),void setTimeout((function(){k(!0)}),200);e=setTimeout((function(){_()}),3e3),u.style.display="block",i&&i()};return o((function(e){return t})),m((function(e){return t})),function(){e&&clearTimeout(e)}}}),[u,w]),(0,HT.jsxs)("div",{className:KT.alert,style:{backgroundColor:h},ref:function(e){return l(e)},children:[(0,HT.jsx)("span",{className:KT.closebtn,onClick:_,children:"\xd7"}),r,(0,HT.jsx)("div",{className:KT.unloadBar})]})}var QT={container:"LoadingBar_container__W7TGv",bar:"LoadingBar_bar__eke0j"};function YT(e){var t=e.width;return(0,HT.jsx)("div",{className:QT.container,children:(0,HT.jsx)("div",{className:QT.bar,style:{width:t+"%"}})})}var XT={modalWrapper:"MateriasModal_modalWrapper__IPCzp",modal:"MateriasModal_modal__4Inw9",modalHeader:"MateriasModal_modalHeader__hv2jb",titulo:"MateriasModal_titulo__v7gvH",inputMateria:"MateriasModal_inputMateria__guHDb",filterWrap:"MateriasModal_filterWrap__oQCBC",recientesHeader:"MateriasModal_recientesHeader__T2Vvo",clearRecientes:"MateriasModal_clearRecientes__1XXha",materiasList:"MateriasModal_materiasList__3Iu1H",hiddenRadio:"MateriasModal_hiddenRadio__V+eer",labelRadio:"MateriasModal_labelRadio__3L7mQ",closeButton:"MateriasModal_closeButton__Bommc",deselectOption:"MateriasModal_deselectOption__4Kgnx",deselectText:"MateriasModal_deselectText__ki5hG"};function JT(e){return Gt.filter((function(t){return-1===e.indexOf(t)}))}function $T(e){var n=e.isOpen,r=e.setIsOpen,i=e.materiaElegida,a=e.changeMateriaElegida,o=e.closeMateriaOnClick,s=function(){var e=localStorage.getItem("recientes");return e?JSON.parse(e):[]}(),u=c((0,t.useState)(JT(s)),2),l=u[0],f=u[1],h=function(){r(!1),document.documentElement.style.overflow="unset",document.getElementById("materias-input").value="",d()},d=function(){var e=document.getElementById("materias-input").value,t=["4","3","2","1"],n=["iv","iii","ii","i"];0!==(e=e.toLowerCase().split(" ")).length&&""!==e[0]?f(Gt.filter((function(r){var i,a=r.split(" "),o=m(e);try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=!1,l=t.indexOf(u),f=-1!==l?n[l]:null,h=m(a);try{for(h.s();!(s=h.n()).done;){var d=s.value;if(f&&d.toLowerCase()===f){c=!0;break}if(d.toLowerCase().includes(u)){c=!0;break}}}catch(p){h.e(p)}finally{h.f()}if(!c)return!1}}catch(p){o.e(p)}finally{o.f()}return!0}))):f(JT(s))},p=function(e,t){if("function"!==typeof e||"number"!==typeof t)throw new TypeError("Arguments should be of type (function, number)");var n;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];clearTimeout(n),n=setTimeout((function(){e.apply(void 0,i)}),t)}}(d,300);(0,t.useEffect)((function(){i&&"Materia"!==i&&(document.getElementById(i+"radio").checked=!0)}),[i]);var v=function(e){"materias-modal-wrap"!==e.target.id?e.bubbles=!1:e.bubbles&&h()},y=function(e){s.length>=7&&s.pop(),-1!==s.indexOf(e.target.value)&&s.splice(s.indexOf(e.target.value),1),s.unshift(e.target.value),localStorage.setItem("recientes",JSON.stringify(s)),a(e),setTimeout((function(){h()}),150)},g=function(){var e=document.getElementById("materias-input");return!e||""===e.value};return(0,HT.jsx)("div",{className:XT.modalWrapper,id:"materias-modal-wrap",style:{display:n?"flex":"none"},onClick:v,children:(0,HT.jsxs)("div",{className:XT.modal,onClick:v,children:[(0,HT.jsxs)("div",{className:XT.modalHeader,children:[(0,HT.jsx)("h1",{className:XT.titulo,children:"Materias"}),(0,HT.jsx)("button",{className:XT.closeButton,onClick:h,title:"Cerrar",children:(0,HT.jsx)("ion-icon",{name:"close-outline"})})]}),(0,HT.jsx)("div",{className:XT.filterWrap,children:(0,HT.jsx)("input",{type:"text",onChange:p,className:XT.inputMateria,id:"materias-input",placeholder:"Buscar materia"})}),(0,HT.jsxs)("div",{className:XT.materiasList,children:[i&&"Materia"!==i&&(0,HT.jsx)("div",{className:XT.deselectOption,children:(0,HT.jsxs)("label",{className:XT.labelRadio,children:[(0,HT.jsx)("input",{className:XT.hiddenRadio,onChange:function(){o(),h()},type:"radio",id:"ninguna-radio",name:"materias-radio",value:"",checked:!1}),(0,HT.jsx)("span",{className:XT.deselectText,children:"Quitar filtro"}),(0,HT.jsx)("i",{})]})}),s.length>0&&g()?(0,HT.jsxs)("div",{className:XT.recientesHeader,children:[(0,HT.jsx)("p",{children:"Recientes"}),(0,HT.jsx)("button",{onClick:function(){localStorage.removeItem("recientes"),f(JT(s=[]))},className:XT.clearRecientes,title:"Limpiar recientes",children:(0,HT.jsx)("ion-icon",{name:"trash-outline"})})]}):"",g()?s.map((function(e){return(0,HT.jsx)("div",{children:(0,HT.jsxs)("label",{className:XT.labelRadio,children:[(0,HT.jsx)("input",{className:XT.hiddenRadio,onChange:y,type:"radio",id:e+"radio",name:"materias-radio",value:e,checked:e===i}),e,(0,HT.jsx)("i",{})]})},e+"filter")})):"",s.length>0&&g()?(0,HT.jsx)("p",{children:"Otras"}):"",l.length>0?l.map((function(e){return(0,HT.jsx)("div",{children:(0,HT.jsxs)("label",{className:XT.labelRadio,children:[(0,HT.jsx)("input",{className:XT.hiddenRadio,onChange:y,type:"radio",id:e+"radio",name:"materias-radio",value:e,checked:e===i}),e,(0,HT.jsx)("i",{})]})},e+"filter")})):(0,HT.jsx)("p",{children:"No se encontraron materias"})]})]})})}function ZT(e){var n=e.auth,r=e.user,i=e.setArchivosSubidos;document.title="Comunidad Fiuba - Subir";var a=c((0,t.useState)(!1),2),o=a[0],s=a[1],u=c((0,t.useState)(null),2),l=u[0],f=u[1],h=c((0,t.useState)(0),2),d=h[0],p=h[1],v=c((0,t.useState)(null),2),m=v[0],y=v[1],g=c((0,t.useState)(null),2),k=g[0],b=g[1],w=c((0,t.useState)(null),2),x=w[0],_=w[1],I=c((0,t.useState)(null),2),E=I[0],S=I[1],T=c((0,t.useState)(!1),2),C=T[0],A=T[1],N=c((0,t.useState)(!1),2),P=N[0],D=N[1],R=c((0,t.useState)("Materia"),2),O=R[0],L=R[1],M=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};(0,t.useEffect)((function(){document.getElementById("materias-btn-subir").value="Materia"}),[]);var j=function(e){var t=(e.size/1048576).toFixed(2),n=document.createElement("li");n.innerHTML=e.name+" ("+t+" MB)",document.getElementById("fileList").appendChild(n),document.getElementById("submitFile").classList.add(BT.visible),document.getElementById("dragArea").style.display="none",document.getElementById("formAndList").style.display="flex"},F=function(e){e.preventDefault(),A(!0)},U=function(e){A(!1)},V=function(e){e.preventDefault();var t=e.dataTransfer.files[0];return document.getElementById("fileList").innerHTML="",(t.size/1048576).toFixed(2)>12?(alert("Tama\xf1o maximo 12mb, si quer\xe9s subir un archivo pesado utiliza un compresor (se encuentran en la parte inferior de la pagina) o dividi el pdf"),void A(!1)):t.type&&Ut.join(",").includes(t.type)?(document.getElementById("archivoCargado").files=e.dataTransfer.files,void j(t)):(alert("tipo de archivo incorrecto"),void A(!1))};return(0,HT.jsxs)("div",{className:BT.mainDiv,children:[(0,HT.jsxs)(GT,{children:[(0,HT.jsx)(WT,{tipo:"buena",texto:"Contenido subido correctamente.",setShowAlert:b}),(0,HT.jsx)(WT,{tipo:"mala",texto:"Error al subir el archivo",setShowAlert:_}),(0,HT.jsx)(WT,{tipo:"mala",texto:"Selecciona una materia de la lista",setShowAlert:S})]}),(0,HT.jsx)($T,{isOpen:P,setIsOpen:D,materiaElegida:O,changeMateriaElegida:function(e){var t=e.target.value;document.getElementById("materias-btn-subir").value=t,D(!1)},closeMateriaOnClick:function(){document.getElementById("materias-btn-subir").value="Materia",L("Materia")}}),C?(0,HT.jsxs)("div",{className:BT.dragArea,id:"dragArea",onDragOver:F,onDragLeave:U,onDrop:V,children:[(0,HT.jsx)("div",{className:BT.icon,children:(0,HT.jsx)("ion-icon",{name:"cloud-upload",style:{UserSelect:"none"}})}),(0,HT.jsx)("header",{style:{pointerEvents:"none"},children:"Suelta para subir un archivo"})]}):(0,HT.jsxs)("div",{className:BT.dragArea,id:"dragArea",onDragOver:F,onDragLeave:U,onDrop:V,children:[(0,HT.jsx)("div",{className:BT.icon,children:(0,HT.jsx)("ion-icon",{name:"cloud-upload",style:{UserSelect:"none"}})}),(0,HT.jsx)("header",{style:{pointerEvents:"none"},children:"Arrastra y suelta para subir un archivo"}),(0,HT.jsx)("p",{style:{pointerEvents:"none"},children:"O"}),(0,HT.jsx)("button",{id:"buscarArchivo",onClick:function(){l.click()},children:"Buscar Contenido"}),(0,HT.jsx)("p",{style:{margin:"0",fontSize:"1rem",marginBottom:"10px"},children:"Pdf o imagen"}),(0,HT.jsxs)("div",{className:BT.linkContainer,children:[(0,HT.jsxs)("div",{className:BT.compresorContainer,children:[(0,HT.jsx)("p",{style:{margin:"0",fontSize:"1rem",textAlign:"center",padding:"0.2em 0",width:"100%"},children:"Convertir"}),(0,HT.jsx)("a",{style:{flexGrow:"1"},href:"https://www.ilovepdf.com/es/jpg_a_pdf",target:"_blank",className:BT.conversor,children:"Img a Pdf"}),(0,HT.jsx)("a",{style:{flexGrow:"1"},href:"https://www.ilovepdf.com/es/dividir_pdf",target:"_blank",className:BT.conversor,children:"Dividir Pdf"})]}),(0,HT.jsxs)("div",{className:BT.compresorContainer,children:[(0,HT.jsx)("p",{style:{margin:"0",fontSize:"1rem",textAlign:"center",padding:"0.2em 0",width:"100%"},children:"Comprimir"}),(0,HT.jsx)("a",{style:{flexGrow:"1"},href:"https://www.ilovepdf.com/es/comprimir_pdf",target:"_blank",className:BT.conversor,children:"Pdf"}),(0,HT.jsx)("a",{style:{flexGrow:"1"},href:"https://www.iloveimg.com/es/comprimir-imagen",target:"_blank",className:BT.conversor,children:"Img"})]})]})]}),(0,HT.jsxs)("section",{className:BT.formAndList,id:"formAndList",children:[(0,HT.jsx)("p",{className:BT.titulo,children:"\xa1Ya casi est\xe1!"}),(0,HT.jsx)("p",{className:BT.descripcionTiny,children:"Rellen\xe1 bien las categorias para llegar a m\xe1s personas"}),(0,HT.jsx)("ul",{className:BT.listaSinOrden,id:"fileList"}),(0,HT.jsxs)("form",{className:BT.form,onSubmit:function(e){e.preventDefault();var t=e.target;if(Gt.includes(t.children[2].value)){!function(){s(!0);var e=document.getElementById("submitFile");e.classList.remove(BT.visible),e.classList.add(BT.disabled),function e(){var t=setTimeout((function(){p((function(t){return t<90?(e(),clearTimeout(m),t+M(0,6)):(clearTimeout(m),t)}))}),100*M(2,6));y(t)}()}();zT(t,(function(e,n){if("succes"===e){k();var a=t.file.files[0],o=n.fileUrl;o.includes("view?usp=drivesdk")&&(o=o.replace("view?usp=drivesdk","preview"));var u={materia:t.materias.value,tipo:t.elements.tipo.value,titulo:t.filename.value||a.name,uid:r.uid,token:r.token,url:o,usuario:r.name,year:Number(t.elements.anio.value)};fetch("https://cofi.saludturnos.com/post",{method:"POST",body:JSON.stringify(u)}).then((function(e){return e.json().then((function(e){e.error?alert(e.error):i((function(t){return t.push(e),t}))}))})).catch((function(e){return alert(e)}))}else x(),console.log(e);p(100),setTimeout((function(){s(!1);var e=document.getElementById("submitFile");e.classList.remove(BT.disabled),e.classList.add(BT.visible),p(0),clearTimeout(m)}),200),document.getElementById("archivoCargado").value=null,document.getElementById("fileList").innerHTML=""}),n,r.name)}else E()},id:"formArchivo",children:[(0,HT.jsx)("input",{name:"file",type:"file",style:{color:"white"},accept:Ut.join(", "),id:"archivoCargado",onChange:function(e){document.getElementById("fileList").innerHTML="";var t=e.target.files[0];return(t.size/1048576).toFixed(2)>12?(alert("Tama\xf1o maximo 12mb, si quer\xe9s subir un archivo pesado utiliza un compresor (se encuentran en la parte inferior de la pagina) o dividi el pdf"),void(e.target.value=null)):t.type&&Ut.join(",").includes(t.type)?void j(t):(alert("tipo de archivo incorrecto"),void(e.target.value=null))},ref:function(e){return f(e)},required:!0}),(0,HT.jsx)("input",{name:"filename",id:"filename",type:"text",placeholder:"Titulo",maxLength:71,required:!0}),(0,HT.jsx)("input",{type:"button",name:"materias",onChange:function(e){L(e.target.value)},onClick:function(){D(!0),document.documentElement.style.overflow="hidden"},id:"materias-btn-subir"}),(0,HT.jsx)("select",{style:{width:"100%"},id:"a\xf1o",name:"anio",required:!0,children:function(){for(var e=[],t=(new Date).getFullYear();t>2017;t--)e.push(t);return e}().map((function(e){return(0,HT.jsx)("option",{value:e,children:e},e)}))}),(0,HT.jsxs)("select",{id:"tipo",name:"tipo",title:"tipo",form:"formArchivo",required:!0,children:[(0,HT.jsx)("option",{value:"Resumen",children:"Resumen"}),(0,HT.jsx)("option",{value:"Final",children:"Final"}),(0,HT.jsx)("option",{value:"Final Resuelto",children:"Final Resuelto"}),(0,HT.jsx)("option",{value:"Parcial",children:"Parcial"}),(0,HT.jsx)("option",{value:"Parcial Resuelto",children:"Parcial Resuelto"}),(0,HT.jsx)("option",{value:"Ejercicios",children:"Ejercicios"})]}),(0,HT.jsxs)("div",{children:[o?(0,HT.jsxs)("p",{style:{position:"relative",width:"100%",textAlign:"center",padding:"0",marginTop:"-10px",color:"rgb(169,169,169)"},children:[d,"%"]}):"",(0,HT.jsx)("button",{type:"submit",disabled:o,id:"submitFile",className:BT.submit,children:o?(0,HT.jsx)(YT,{width:d}):"Subir"})]})]})]}),(0,HT.jsx)(FT,{to:"/",children:(0,HT.jsx)("ion-icon",{name:"arrow-back-outline",style:{position:"absolute",color:"white",left:"10px",top:"10px",fontSize:"2em",cursor:"pointer"}})})]})}var eC={container:"Home_container__gPz4h",fiubaImagen:"Home_fiubaImagen__VruFB",headerDescripcion:"Home_headerDescripcion__IqtbI",izq:"Home_izq__r0YTw",der:"Home_der__VkQgW",linkContainer:"Home_linkContainer__qywtZ",subir:"Home_subir__p+FBZ",publicar:"Home_publicar__Sni9L",publicarLineaIzq:"Home_publicarLineaIzq__SYGI0",publicarLineaDer:"Home_publicarLineaDer__l9mNI",arriba:"Home_arriba__R6yFd",subrrayado:"Home_subrrayado__nHzfp",mainTitulo:"Home_mainTitulo__wJisl",filterWrapper:"Home_filterWrapper__Usj1W",filterInput:"Home_filterInput__OZ2VE",materiasButton:"Home_materiasButton__4fSZN",oneLine:"Home_oneLine__uNXJ8",icono:"Home_icono__fubid",borrarIcono:"Home_borrarIcono__8pFZh",selectContainer:"Home_selectContainer__D2fyL",buscador:"Home_buscador__smr77",materiaElegida:"Home_materiaElegida__jl2cu",c1C2:"Home_c1C2__C9Adq",buttonText:"Home_buttonText__XW4Oy",sortButtonsContainer:"Home_sortButtonsContainer__J7hp3",sortButton:"Home_sortButton__Jjpcl",active:"Home_active__AHMPo",selectedButton:"Home_selectedButton__QZcOr",closeMateria:"Home_closeMateria__3WiLm",content:"Home_content__Z1XJ0",topSection:"Home_topSection__BBOsF",topSectionHeader:"Home_topSectionHeader__9IklN",topList:"Home_topList__bGew-",footer:"Home_footer__yKaOb",spinner:"Home_spinner__9te8F",rotate:"Home_rotate__Om6FR",filtroVacio:"Home_filtroVacio__1efmK",likeTop:"Home_likeTop__NPk+M",pizarraLogo:"Home_pizarraLogo__hf89s"},tC={contentWrap:"Archivos_contentWrap__8R8Ue",destacado:"Archivos_destacado__xejwK",textoDestacado:"Archivos_textoDestacado__qgOvh",anioContainer:"Archivos_anioContainer__yJYcE",archivosContainer:"Archivos_archivosContainer__Ezift",archivo:"Archivos_archivo__oMyu9",iframeBottom:"Archivos_iframeBottom__NU1eT",displayTitle:"Archivos_displayTitle__nDqF5",der:"Archivos_der__S25Uq",izq:"Archivos_izq__wrBYH",like:"Archivos_like__fzMfS",toLike:"Archivos_toLike__hkptf",liked:"Archivos_liked__L-WMt",pagination:"Archivos_pagination__RNwRn",paginationPage:"Archivos_paginationPage__NFL1e",fastMove:"Archivos_fastMove__2xAfQ",activePage:"Archivos_activePage__dBX6D",confirmationBox:"Archivos_confirmationBox__IvFdJ",cancelButton:"Archivos_cancelButton__G3h9K",confirmationButton:"Archivos_confirmationButton__jORBJ",loadingRow:"Archivos_loadingRow__b1LwU",loadBackground:"Archivos_loadBackground__p3MUm",loadRow:"Archivos_loadRow__3SDhs"},nC=n(48),rC=n.n(nC),iC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},aC=t.createContext&&t.createContext(iC),oC=function(){return oC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},oC.apply(this,arguments)},sC=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function uC(e){return e&&e.map((function(e,n){return t.createElement(e.tag,oC({key:n},e.attr),uC(e.child))}))}function cC(e){return function(n){return t.createElement(lC,oC({attr:oC({},e.attr)},n),uC(e.child))}}function lC(e){var n=function(n){var r,i=e.attr,a=e.size,o=e.title,s=sC(e,["attr","size","title"]),u=a||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",oC({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,s,{className:r,style:oC(oC({color:e.color||n.color},n.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==aC?t.createElement(aC.Consumer,null,(function(e){return n(e)})):n(iC)}function fC(e){return cC({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m12 16 4-5h-3V4h-2v7H8z"}},{tag:"path",attr:{d:"M20 18H4v-7H2v7c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2v-7h-2v7z"}}]})(e)}function hC(e){return cC({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 4.595a5.904 5.904 0 0 0-3.996-1.558 5.942 5.942 0 0 0-4.213 1.758c-2.353 2.363-2.352 6.059.002 8.412l7.332 7.332c.17.299.498.492.875.492a.99.99 0 0 0 .792-.409l7.415-7.415c2.354-2.354 2.354-6.049-.002-8.416a5.938 5.938 0 0 0-4.209-1.754A5.906 5.906 0 0 0 12 4.595zm6.791 1.61c1.563 1.571 1.564 4.025.002 5.588L12 18.586l-6.793-6.793c-1.562-1.563-1.561-4.017-.002-5.584.76-.756 1.754-1.172 2.799-1.172s2.035.416 2.789 1.17l.5.5a.999.999 0 0 0 1.414 0l.5-.5c1.512-1.509 4.074-1.505 5.584-.002z"}}]})(e)}function dC(e){return cC({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"}},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"}},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"}}]})(e)}function pC(e){var n=e.archivo,r=e.disabledButton,i=e.setDisabledButton,a=e.showAlert,o=e.postsLikes,s=e.setPostsLikes,u=e.userData,l=vT(),f=c((0,t.useState)(1.25),2),h=f[0],d=f[1],p=c((0,t.useState)(1),2),v=p[0],m=p[1],y=c((0,t.useState)(.75),2),g=y[0],k=y[1],b=n.title,w=(n.url,n.materia),x=n.year,_=n.likes,I=n.id,E=n.username,S=n.slug;(0,t.useEffect)((function(){h>.25&&(document.getElementById("title"+I).scrollHeight>31&&d((function(e){return e-.05})));if(v>.2){var e=document.getElementById("materia"+I);(e?e.scrollHeight:"")>30&&m((function(e){return e-.05}))}if(g>.2){var t=document.getElementById("nombre"+I);(t?t.scrollHeight:"")>18&&k((function(e){return e-.05}))}}),[h,v,g]);return(0,HT.jsx)("div",{children:(0,HT.jsx)("div",{className:"".concat(tC.contentWrap," ").concat(Vt.includes(I)?tC.destacado:""),style:{marginTop:"1rem"},children:(0,HT.jsxs)("div",{id:"iframeBottom"+I,className:tC.iframeBottom,children:[(0,HT.jsx)(FT,{to:"/post/"+S,style:{textDecoration:"none",width:"100%",lineHeight:"31px"},children:(0,HT.jsx)("p",{id:"title"+I,rel:"noreferrer",style:{fontSize:h+"rem",minHeight:"31px"},className:tC.displayTitle,children:b})}),(0,HT.jsxs)("div",{className:tC.izq,children:[(0,HT.jsx)("p",{id:"materia"+I,style:{fontSize:v+"rem"},children:w}),(0,HT.jsxs)("p",{id:"nombre"+I,style:{fontSize:g+"rem"},children:["por ",(0,HT.jsx)("b",{children:E})]}),(0,HT.jsxs)("div",{className:tC.anioContainer,children:[(0,HT.jsx)("span",{children:x})," ",Vt.includes(I)?(0,HT.jsx)("span",{className:tC.textoDestacado,children:"Destacado"}):""]})]}),(0,HT.jsxs)("div",{className:tC.der,children:[(0,HT.jsx)("button",{disabled:r,className:tC.like,onClick:function(){return function(e){u?(i(!0),fetch("https://cofi.saludturnos.com/like",{method:"POST",body:JSON.stringify({token:u.token,uid:u.uid,postId:e})}).then((function(t){return t.json().then((function(t){"Usuario invalido"===t.error?alert("Error Usuario invalido,Intenta reiniciar la pagina o contactar a un administrador"):"dislike"===t.action?(s((function(t){var n=t.indexOf(e);return t.splice(n,1),t})),n.likes=t.likes):"like"===t.action?(s((function(t){return t.push(e),t})),n.likes=t.likes):alert("Error desconocido,Intenta reiniciar la pagina o contactar a un administrador"),setTimeout((function(){i(!1)}),500)})).catch((function(e){return alert(e)}))})).catch((function(e){return alert(e)}))):l("/login")}(I)},children:o.indexOf(I)>-1?(0,HT.jsx)(hC,{className:tC.liked,style:{color:r?"rgb(100,100,220)":"rgb(255,60,60)"},size:22}):(0,HT.jsx)(hC,{className:tC.toLike,size:22,style:{color:r?"rgb(100,100,220)":"white"}})}),(0,HT.jsx)("button",{className:tC.like,children:(0,HT.jsx)(dC,{style:{color:"white"},size:20,onClick:function(){navigator.clipboard.writeText(window.location.host+"/post/"+S).then((function(e){return a()})).catch((function(e){return console.log(e)}))}})}),(0,HT.jsx)("p",{style:{position:"relative",margin:"2px 0 0 0",width:"100%",textAlign:"center",color:"white",fontSize:"0.8rem"},children:_})]})]})})})}function vC(e){var n=e.archivosSubidos,r=e.showAlert,i=e.postsLikes,a=e.setPostsLikes,o=e.userData,s=c((0,t.useState)(!1),2),u=s[0],l=s[1],f=vT(),h=new URLSearchParams(pT().search),d=Math.ceil(n.length/16),p=h.get("page")&&Number(h.get("page"))>0&&Number(h.get("page"))<=d?Number(h.get("page")):1;if(0!==n.length){var v=16*p,m=n.slice(v-16,v);return(0,HT.jsxs)("div",{children:[(0,HT.jsx)("div",{className:tC.archivosContainer,children:m&&function(e){for(var t in Vt)y(e,Vt[t]);return e.map((function(e){return(0,HT.jsx)(pC,{showAlert:r,setPostsLikes:a,userData:o,archivo:e,disabledButton:u,setDisabledButton:l,postsLikes:i},e.id+"file")}))}(m)}),(0,HT.jsx)(rC(),{className:tC.pagination,previousLabel:"<",nextLabel:">",breakLabel:"...",pageClassName:tC.paginationPage,breakClassName:tC.paginationPage,previousClassName:tC.fastMove,nextClassName:tC.fastMove,onPageChange:function(e){var t=16*e.selected%n.length;h.set("page",(t/16+1).toString()),f("/?"+h)},activeClassName:tC.activePage,pageRangeDisplayed:3,marginPagesDisplayed:1,pageCount:d,renderOnZeroPageCount:null,forcePage:p-1,onClick:function(e){e.nextSelectedPage&&(h.set("page",(e.nextSelectedPage+1).toString()),f("/?"+h))}}),(0,HT.jsxs)("p",{style:{textAlign:"center",padding:"0 20px"},children:[(0,HT.jsx)("b",{children:"No te quedes afuera"}),", sum\xe1te a la Comunidad compartiendo tus examenes y resumenes."]})]})}function y(e,t){var n=e.findIndex((function(e){return e.id===t}));-1!==n&&e.splice(0,0,e.splice(n,1)[0])}}function mC(e){return cC({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 002 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}}]})(e)}function yC(e){return cC({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24m0 24H0"}},{tag:"path",attr:{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39A.998.998 0 0018.95 4H5.04c-.83 0-1.3.95-.79 1.61z"}},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}}]})(e)}function gC(e){return cC({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}}]})(e)}function kC(e){return cC({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"}}]})(e)}function bC(e){return cC({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r\n\tc0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r\n\tc0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}},{tag:"path",attr:{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r\n\tC34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}},{tag:"path",attr:{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r\n\tc-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}},{tag:"path",attr:{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r\n\tc0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"}}]})(e)}function wC(e){return cC({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#F44336",d:"M34,9c-4.2,0-7.9,2.1-10,5.4C21.9,11.1,18.2,9,14,9C7.4,9,2,14.4,2,21c0,11.9,22,24,22,24s22-12,22-24 C46,14.4,40.6,9,34,9z"}}]})(e)}function xC(e){var n=e.archivos,r=c((0,t.useState)(null),2),i=r[0],a=r[1];if((0,t.useEffect)((function(){if(!i&&n&&0!==n.length){for(var e=new Map,t=0;t<n.length;t++){var r=n[t].username,o=n[t].likes,s=n[t].userslug;if(!(!r.length>0))if(e.get(s)){var u=e.get(s);e.set(s,{user:r,likes:u.likes+o})}else e.set(s,{user:r,likes:o})}var c=new Map(re(e.entries()).sort((function(e,t){return t[1].likes-e[1].likes})));a(c)}}),[n]),i){var o=re(i);return(0,HT.jsxs)("section",{className:eC.topSection,style:{userSelect:"none"},children:[(0,HT.jsx)("div",{className:eC.topSectionHeader,children:(0,HT.jsx)("h2",{children:"M\xe1s valorados"})}),(0,HT.jsxs)("ol",{className:eC.topList,children:[(0,HT.jsxs)("li",{children:[(0,HT.jsx)("ion-icon",{name:"trophy-outline",style:{color:"gold"}}),(0,HT.jsxs)("span",{children:[o[0][1].user," ",(0,HT.jsx)(wC,{size:16})," ",o[0][1].likes]})]}),(0,HT.jsxs)("li",{children:[(0,HT.jsx)("ion-icon",{name:"trophy-outline",style:{color:"silver"}}),o.length>1?(0,HT.jsxs)("span",{children:[o[1][1].user," ",(0,HT.jsx)(wC,{size:16})," ",o[1][1].likes]}):(0,HT.jsx)("span",{children:"---"})]}),(0,HT.jsxs)("li",{children:[(0,HT.jsx)("ion-icon",{name:"trophy-outline",style:{color:"rgb(205, 127, 50)"}}),o.length>2?(0,HT.jsxs)("span",{children:[o[2][1].user," ",(0,HT.jsx)(wC,{size:16})," ",o[2][1].likes]}):(0,HT.jsx)("span",{children:"---"})]}),(0,HT.jsxs)("li",{children:[(0,HT.jsx)("ion-icon",{name:"ribbon-outline",style:{color:"lightblue"}}),o.length>3?(0,HT.jsxs)("span",{children:[o[3][1].user," ",(0,HT.jsx)(wC,{size:16})," ",o[3][1].likes]}):(0,HT.jsx)("span",{children:"---"})]}),(0,HT.jsxs)("li",{children:[(0,HT.jsx)("ion-icon",{name:"ribbon-outline",style:{color:"lightblue"}}),o.length>4?(0,HT.jsxs)("span",{children:[o[4][1].user," ",(0,HT.jsx)(wC,{size:16})," ",o[4][1].likes]}):(0,HT.jsx)("span",{children:"---"})]})]})]})}return(0,HT.jsxs)("section",{className:eC.topSection,children:[(0,HT.jsx)("div",{className:eC.topSectionHeader,children:(0,HT.jsx)("h2",{children:"Top creadores"})}),(0,HT.jsxs)("ol",{className:eC.topList,children:[(0,HT.jsxs)("li",{children:[(0,HT.jsx)("ion-icon",{name:"trophy-outline",style:{color:"gold"}}),(0,HT.jsx)("span",{children:"---"})]}),(0,HT.jsxs)("li",{children:[(0,HT.jsx)("ion-icon",{name:"trophy-outline",style:{color:"silver"}}),(0,HT.jsx)("span",{children:"---"})]}),(0,HT.jsxs)("li",{children:[(0,HT.jsx)("ion-icon",{name:"trophy-outline",style:{color:"rgb(205, 127, 50)"}}),(0,HT.jsx)("span",{children:"---"})]}),(0,HT.jsxs)("li",{children:[(0,HT.jsx)("ion-icon",{name:"ribbon-outline",style:{color:"lightblue"}}),(0,HT.jsx)("span",{children:"---"})]}),(0,HT.jsxs)("li",{children:[(0,HT.jsx)("ion-icon",{name:"ribbon-outline",style:{color:"lightblue"}}),(0,HT.jsx)("span",{children:"---"})]})]})]})}function _C(e,n){var r=c((0,t.useState)(e),2),i=r[0],a=r[1];return(0,t.useEffect)((function(){var t=setTimeout((function(){a(e)}),n);return function(){clearTimeout(t)}}),[e,n]),i}function IC(e){var t=e.index;return(0,HT.jsx)("div",{children:(0,HT.jsx)("div",{className:"".concat(tC.contentWrap),style:{marginTop:"1rem"},children:(0,HT.jsxs)("div",{id:"iframeBottomCarga"+t,className:tC.iframeBottom,children:[(0,HT.jsx)("div",{style:{borderBottom:"1px solid gray",width:"100%",height:"31px",display:"flex",alignItems:"center"},children:(0,HT.jsx)("div",{className:tC.loadingRow,style:{width:"100%",height:"9px",borderRadius:"100px",overflow:"hidden"},children:(0,HT.jsx)("div",{className:tC.loadBackground})})}),(0,HT.jsxs)("div",{className:tC.izq,children:[(0,HT.jsx)("div",{style:{width:"100%",height:"20px",display:"flex",alignItems:"center"},children:(0,HT.jsx)("div",{className:tC.loadingRow,style:{width:"100%",height:"8px",borderRadius:"100px",overflow:"hidden"},children:(0,HT.jsx)("div",{className:tC.loadBackground})})}),(0,HT.jsx)("div",{style:{width:"75%",height:"20px",display:"flex",alignItems:"center"},children:(0,HT.jsx)("div",{className:tC.loadingRow,style:{width:"100%",height:"6px",borderRadius:"100px",overflow:"hidden"},children:(0,HT.jsx)("div",{className:tC.loadBackground})})}),(0,HT.jsx)("div",{style:{width:"50%",height:"20px",display:"flex",alignItems:"center"},children:(0,HT.jsx)("div",{className:tC.loadingRow,style:{width:"100%",height:"5px",borderRadius:"100px",overflow:"hidden"},children:(0,HT.jsx)("div",{className:tC.loadBackground})})})]}),(0,HT.jsxs)("div",{className:tC.der,children:[(0,HT.jsx)("button",{className:tC.like,children:(0,HT.jsx)(hC,{className:tC.liked,style:{color:"gray"},size:22})}),(0,HT.jsx)("button",{className:tC.like,children:(0,HT.jsx)(dC,{style:{color:"gray"},size:20})}),(0,HT.jsx)("div",{style:{width:"40%",height:"20px",display:"flex",alignItems:"center",margin:"auto"},children:(0,HT.jsx)("div",{className:tC.loadingRow,style:{width:"100%",height:"5px",borderRadius:"100px",overflow:"hidden"}})})]})]})})})}function EC(e){var t=e.preview?12:16;return(0,HT.jsxs)("div",{children:[(0,HT.jsx)("div",{className:tC.archivosContainer,children:Array.apply(null,Array(t)).map((function(){})).map((function(e,t){return(0,HT.jsx)(IC,{index:t},t+"fileCarga")}))}),(0,HT.jsx)("div",{style:{height:"60px",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:"Es probable que los archivos tarden un poco en aparecer, por favor espere."})]})}var SC={cofiContainer:"Cofi_cofiContainer__-JqZ6",cofi:"Cofi_cofi__8vTks",cofi2:"Cofi_cofi2__AHlQj",animated:"Cofi_animated__Hc6zr",animateNow:"Cofi_animateNow__IgXCj",animate:"Cofi_animate__uKjHr",cofiText:"Cofi_cofiText__3g0-6",comunidadFiuba:"Cofi_comunidadFiuba__UKzV0",appear:"Cofi_appear__n2IPn",comunidad:"Cofi_comunidad__AI4E+",co:"Cofi_co__tAyrF",expand:"Cofi_expand__nVbN3",fiuba:"Cofi_fiuba__HVRkH",fi:"Cofi_fi__w3IDa",expand2:"Cofi_expand2__sO7A0",hiddenText:"Cofi_hiddenText__M0DGk"};function TC(){var e=(0,t.useRef)(null);return(0,HT.jsxs)("div",{children:[(0,HT.jsxs)("div",{className:SC.cofiContainer,children:[(0,HT.jsx)("img",{onClick:function(){e.current.classList.contains(SC.animateNow)?e.current.classList.remove(SC.animateNow):(e.current.classList.add(SC.animateNow),setTimeout((function(){e.current.classList.remove(SC.animateNow)}),6800))},className:SC.cofi,src:"./cofi_sleep2.png",alt:"cofi"}),(0,HT.jsx)("img",{className:SC.cofi2,src:"./cofi_wake.png",alt:"cofi"})]}),(0,HT.jsxs)("div",{ref:e,className:SC.animated,children:[(0,HT.jsxs)("h2",{className:SC.comunidadFiuba,children:[(0,HT.jsx)("span",{className:SC.hiddenText,children:"Co"}),"munidad ",(0,HT.jsx)("span",{className:SC.hiddenText,children:"Fi"}),"uba"]}),(0,HT.jsxs)("h2",{className:"".concat(SC.cofiText),children:[(0,HT.jsxs)("span",{className:SC.comunidad,children:[(0,HT.jsx)("span",{className:SC.co,children:"Co"}),(0,HT.jsx)("span",{className:SC.hiddenText,children:"munidad"})]})," ",(0,HT.jsxs)("span",{className:SC.fiuba,children:[(0,HT.jsx)("span",{className:SC.fi,children:"Fi"}),(0,HT.jsx)("span",{className:SC.hiddenText,children:"uba"})]})]})]})]})}function CC(e){var n=e.archivosSubidos,r=e.postsLikes,i=e.isLoading,a=e.auth,o=e.userData,s=e.setPostsLikes,u=e.caughtError,l=new URLSearchParams(pT().search),f=vT(),h=c((0,t.useState)(null),2),d=h[0],p=h[1],v=c((0,t.useState)([]),2),m=v[0],y=v[1],g=c((0,t.useState)(l.get("tipo")),2),k=g[0],b=g[1],w=c((0,t.useState)(""),2),x=w[0],_=w[1],I=c((0,t.useState)(l.get("a\xf1o")),2),E=I[0],S=I[1],T=c((0,t.useState)(""),2),C=T[0],A=T[1],N=c((0,t.useState)(!1),2),P=N[0],D=N[1],R=c((0,t.useState)(n),2),O=R[0],L=R[1],M=c((0,t.useState)(!1),2),j=M[0],F=M[1],U=c((0,t.useState)("likes"),2),V=U[0],B=U[1],z=c((0,t.useState)("desc"),2),q=z[0],H=z[1],G=_C(x,400),K=_C(C,400);document.title="Comunidad Fiuba",l.get("materia")&&x!==l.get("materia")&&_(l.get("materia")),l.get("titulo")&&C!==l.get("titulo")&&A(l.get("titulo")),(0,t.useEffect)((function(){L(n.sort((function(e,t){return t.likes-e.likes})))}),[n]),(0,t.useEffect)((function(){D(!0)}),[G,n,K]),(0,t.useEffect)((function(){document.getElementById("tipo").value=k?k.charAt(0).toUpperCase()+k.slice(1):"",document.getElementById("materia").innerHTML=x?x.charAt(0).toUpperCase()+x.slice(1):"Materia",document.getElementById("anio").value=E||"",document.getElementById("search").value=C||""}),[]);var W=function(e){var t=document.getElementById("materia");t.innerHTML="Materia",l.delete("materia"),_(t.value),f("/?"+l)};(0,t.useEffect)((function(){P&&(y((function(e){e=[];for(var t=0;t<O.length;t++)n=O[t],k&&n.tipo.toLowerCase()!==k.toLowerCase()||G&&n.materia.toLowerCase()!==G.toLowerCase()||E&&n.year!==E||K&&!n.title.toLowerCase().includes(K.toLowerCase())||e.push(O[t]);var n;return e})),D(!1))}),[P]);var Q=function(){a.signOut().then((function(e){return f("/login")}))};return(0,HT.jsxs)("div",{className:eC.container,children:[(0,HT.jsx)(GT,{children:(0,HT.jsx)(WT,{tipo:"neutral",texto:"Link del post copiado",setShowAlert:p})}),(0,HT.jsx)($T,{isOpen:j,setIsOpen:F,materiaElegida:x,changeMateriaElegida:function(e){var t=e.target.value,n=Bt.indexOf(t);-1!==n&&(t=zt[n]),t?l.set("materia",t):l.delete("materia"),_(t),f("/?"+l)},closeMateriaOnClick:W}),(0,HT.jsxs)("nav",{children:[(0,HT.jsxs)("div",{className:eC.izq,children:[(0,HT.jsx)("a",{href:"#inicio",children:"Inicio"}),(0,HT.jsx)("a",{href:"#contenido",children:"Explorar"}),(0,HT.jsx)("a",{href:"#top",children:"Top"}),(0,HT.jsx)("a",{href:"#recomendados",children:"Clases"})]}),(0,HT.jsxs)("div",{className:eC.der,children:[(0,HT.jsxs)(FT,{to:"/perfil",className:eC.linkContainer,children:[(0,HT.jsx)("ion-icon",{name:"person-outline"}),(0,HT.jsx)("p",{children:"Perfil"})]}),a.currentUser?(0,HT.jsxs)(FT,{to:"/login",className:eC.linkContainer,onClick:Q,children:[(0,HT.jsx)("ion-icon",{name:"log-out-outline"}),(0,HT.jsx)("p",{children:"Salir"})]}):(0,HT.jsxs)(FT,{to:"/login",className:eC.linkContainer,onClick:Q,children:[(0,HT.jsx)("ion-icon",{name:"log-in-outline"}),(0,HT.jsx)("p",{children:"Entrar"})]})]})]}),(0,HT.jsx)("a",{href:"#inicio",className:eC.arriba,children:(0,HT.jsx)("ion-icon",{name:"chevron-up-outline"})}),(0,HT.jsxs)("div",{className:eC.fiubaImagen,id:"inicio",children:[(0,HT.jsx)("h1",{className:eC.mainTitulo,onClick:function(e){f("/"),window.location.reload()},children:"Comunidad Fiuba"}),(0,HT.jsxs)("h3",{style:{position:"relative",fontWeight:"lighter",margin:"0px",textAlign:"center"},children:["Sumate a ",(0,HT.jsx)("b",{children:"compartir"})," para ser parte de la comunidad. P\xe1gina FIUBA ",(0,HT.jsx)("b",{children:"no oficial"}),"."]}),(0,HT.jsx)("div",{className:eC.subrrayado}),(0,HT.jsxs)("div",{className:eC.publicar,children:[(0,HT.jsx)("div",{className:eC.publicarLineaIzq}),(0,HT.jsx)(FT,{to:"/subir",className:eC.subir,children:(0,HT.jsx)("p",{children:"PUBLICAR"})}),(0,HT.jsx)("div",{className:eC.publicarLineaDer})]})]}),(0,HT.jsxs)("div",{className:eC.filterWrapper,id:"contenido",children:[(0,HT.jsxs)("div",{className:eC.selectContainer,children:[x?(0,HT.jsx)("div",{className:eC.closeMateria,onClick:W,children:(0,HT.jsx)("ion-icon",{name:"close-outline"})}):(0,HT.jsx)("ion-icon",{name:"chevron-down-outline"}),(0,HT.jsx)("button",{onClick:function(){F(!0),document.documentElement.style.overflow="hidden"},disabled:i,className:eC.materiasButton,style:x?{background:"rgb(0,139,130)"}:{},children:(0,HT.jsx)("span",{id:"materia",className:eC.oneLine,children:x||"Materia"})})]}),(0,HT.jsxs)("div",{className:eC.selectContainer,children:[(0,HT.jsx)("ion-icon",{name:"chevron-down-outline"}),(0,HT.jsxs)("select",{disabled:i,id:"tipo",name:"tipo",title:"tipo",form:"formArchivo",onChange:function(e){e.target.value?l.set("tipo",e.target.value):l.delete("tipo"),b(e.target.value),D(!0),f("/?"+l)},className:eC.filterInput,style:k?{background:"rgb(0,139,130)"}:{},children:[(0,HT.jsx)("option",{value:"",children:"Tipo"}),(0,HT.jsx)("option",{value:"Resumen",children:"Resumen"}),(0,HT.jsx)("option",{value:"Final",children:"Final"}),(0,HT.jsx)("option",{value:"Final Resuelto",children:"Final Resuelto"}),(0,HT.jsx)("option",{value:"Parcial",children:"Parcial"}),(0,HT.jsx)("option",{value:"Parcial Resuelto",children:"Parcial Resuelto"}),(0,HT.jsx)("option",{value:"Ejercicios",children:"Ejercicios"})]})]}),(0,HT.jsxs)("div",{className:eC.selectContainer,children:[(0,HT.jsx)("ion-icon",{name:"chevron-down-outline"}),(0,HT.jsxs)("select",{disabled:i,id:"anio",onChange:function(e){e.target.value?l.set("a\xf1o",e.target.value):l.delete("a\xf1o"),S(e.target.value),D(!0),f("/?"+l)},className:eC.filterInput,style:E?{background:"rgb(0,139,130)"}:{},children:[(0,HT.jsx)("option",{value:"",children:"A\xf1o"}),function(){for(var e=[],t=(new Date).getFullYear();t>2017;t--)e.push(t);return e}().map((function(e){return(0,HT.jsx)("option",{value:e,children:e},e)}))]})]}),(0,HT.jsxs)("div",{className:eC.sortButtonsContainer,children:[(0,HT.jsxs)("button",{disabled:i,onClick:function(e){var t="likes"===V&&"desc"===q?"asc":"desc",n=re(O).sort((function(e,n){return"desc"===t?n.likes-e.likes:e.likes-n.likes}));L(n),B("likes"),H(t),D(!0)},className:"".concat(eC.sortButton," ").concat("likes"===V?eC.active:""),title:"Ordenar por likes (m\xe1s populares primero)",children:[(0,HT.jsx)(wC,{size:16}),"Likes ","likes"===V&&("asc"===q?"\u2191":"\u2193")]}),(0,HT.jsxs)("button",{disabled:i,onClick:function(e){var t="date"===V&&"desc"===q?"asc":"desc",n=re(O).sort((function(e,n){return"desc"===t?n.id-e.id:e.id-n.id}));L(n),B("date"),H(t),D(!0)},className:"".concat(eC.sortButton," ").concat("date"===V?eC.active:""),title:"Ordenar por fecha (m\xe1s recientes primero)",children:[(0,HT.jsx)(mC,{size:16}),"Fecha ","date"===V&&("asc"===q?"\u2191":"\u2193")]})]}),(0,HT.jsxs)("div",{className:eC.buscador,children:[(0,HT.jsx)("ion-icon",{name:"search-outline"}),(0,HT.jsx)("input",{disabled:i,type:"text",id:"search",onChange:function(e){e.target.value?l.set("titulo",e.target.value):l.delete("titulo"),A(e.target.value),f("/?"+l)},placeholder:"Buscar por titulo..."})]})]}),(0,HT.jsx)("div",{children:i?(0,HT.jsx)(EC,{size:60}):m.length>0?(0,HT.jsx)(vC,{archivosSubidos:m,setPostsLikes:s,userData:o,showAlert:d,auth:a,postsLikes:r}):(0,HT.jsxs)("div",{children:[(0,HT.jsx)(yC,{className:eC.filtroVacio,size:35}),(0,HT.jsx)("p",{style:{textAlign:"center"},children:u?"Hubo un error!, intent\xe1 reiniciando la p\xe1gina o contactanos.":"No hay resultados!, intent\xe1 reajustar los filtros"})]})}),(0,HT.jsx)(xC,{archivos:n}),(0,HT.jsx)(TC,{}),(0,HT.jsxs)("footer",{id:"top",className:eC.footer,children:[(0,HT.jsx)("p",{style:{width:"50%",textAlign:"center"},children:"\xa9 2023. Todos los derechos reservados."}),(0,HT.jsxs)("p",{style:{width:"50%",textAlign:"center"},children:["Creado por Andres Melnik y Alen Monti ",(0,HT.jsx)("i",{className:"fas fa-laptop-code"})]}),(0,HT.jsx)("p",{style:{width:"50%",textAlign:"center",userSelect:"all",overflow:"hidden"},children:"andres.d.melnik@gmail.com"}),(0,HT.jsx)("p",{style:{width:"50%",textAlign:"center",userSelect:"all"},children:"montialen@gmail.com"})]}),(0,HT.jsxs)("div",{id:"recomendados",style:{width:"95%",display:"flex",flexWrap:"wrap",marginLeft:"5%",alignItems:"center"},children:[(0,HT.jsx)("p",{style:{display:"inline"},children:"Clases con:"}),(0,HT.jsx)("a",{href:"https://linktr.ee/lapizarraonline",target:"_blank",className:eC.pizarraLogo}),(0,HT.jsx)("div",{style:{width:"90%",height:"1px",backgroundColor:"white"}}),(0,HT.jsxs)("p",{style:{width:"90%",fontSize:"0.75em"},children:["Comunidad Fiuba es una p\xe1gina web dise\xf1ada y manejada por alumnos de la facultad de ingenieria de la universidad de Buenos Aires , con el proposito de mejorar la cursada de todos los alumnos. En Comunidad Fiuba se pueden encontrar resumenes, examenes resueltos, parciales resueltos, finales resueltos y mas, de las materias analisis matematico 2, algebra 2, fisica 1, fisica 2, quimica y mas, el material didactico es util para todas las carreras de la facultad, ingenieria informatica, licenciatura en sistemas, ingenieria civil, ingenieria eletronica y mas. Pod\xe9s compartir Comunidad Fiuba por los grupos de whatsapp FIUBA y cualquier otro medio. No se comparten archivos o material didactico del CBC o UBA XXI. Se puede subir contenido perteneciente al Campus Fiuba o Campusgrado Fiuba, siempre que el autor del contenido permita compartirlo. Otras herramientas recomendadas son el ",(0,HT.jsx)("a",{style:{color:"white"},href:"https://fede.dm/FIUBA-Map/",children:"FIUBA Map"}),", ",(0,HT.jsx)("a",{style:{color:"white"},href:"https://fede.dm/FIUBA-Plan/",children:"FIUBA Plan"})," y ",(0,HT.jsx)("a",{style:{color:"white"},href:"https://dollyfiuba.com/",children:"Dolly Fiuba"}),"."]})]})]})}var AC={mainDiv:"PerfilAlen_mainDiv__sb-Rl",pagina:"PerfilAlen_pagina__0VPwG",contenedor:"PerfilAlen_contenedor__tmGWf",usuarioDato:"PerfilAlen_usuarioDato__A5gLJ",bigIcon:"PerfilAlen_bigIcon__VElHh",heartIcon:"PerfilAlen_heartIcon__9nguV",icono:"PerfilAlen_icono__QlwNE",volver:"PerfilAlen_volver__Y9+Fd",listaMisArchivos:"PerfilAlen_listaMisArchivos__Td7vN",fileInfo:"PerfilAlen_fileInfo__eRp6w",fileMetadata:"PerfilAlen_fileMetadata__g7DxK",spinner:"PerfilAlen_spinner__5fNkB",rotate:"PerfilAlen_rotate__dg1V6",deleteButton:"PerfilAlen_deleteButton__w5Twz",linkCambiarUsername:"PerfilAlen_linkCambiarUsername__fWD8l",filterControls:"PerfilAlen_filterControls__x4ZSK",filterSlideIn:"PerfilAlen_filterSlideIn__utALd",searchContainer:"PerfilAlen_searchContainer__0welB",loading:"PerfilAlen_loading__g4YeF",spin:"PerfilAlen_spin__saA2T",searchInput:"PerfilAlen_searchInput__XB+nt",filterRow:"PerfilAlen_filterRow__dDioe",filterSection:"PerfilAlen_filterSection__XvzDu",filterLabel:"PerfilAlen_filterLabel__hMV73",materiaSelect:"PerfilAlen_materiaSelect__1p1pc",sortButtonsContainer:"PerfilAlen_sortButtonsContainer__cVfo5",sortButton:"PerfilAlen_sortButton__ups6I",active:"PerfilAlen_active__aXMmL",resultsCount:"PerfilAlen_resultsCount__5pRER",updated:"PerfilAlen_updated__hnnOq",pulse:"PerfilAlen_pulse__O-6N6",confirmacionBackdrop:"PerfilAlen_confirmacionBackdrop__qkPC8",backdropFadeIn:"PerfilAlen_backdropFadeIn__YYfwH",confirmacion:"PerfilAlen_confirmacion__9nLLD",modalSlideIn:"PerfilAlen_modalSlideIn__mTKBz",cancelarButton:"PerfilAlen_cancelarButton__bNFrb",confirmacionButton:"PerfilAlen_confirmacionButton__9Og5v",confirmacionButtons:"PerfilAlen_confirmacionButtons__AOI+m"};function NC(e){return cC({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"}}]})(e)}function PC(e){return cC({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"}}]})(e)}function DC(e){return cC({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"}}]})(e)}function RC(e){return cC({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z"}}]})(e)}function OC(e){return cC({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 16c-2.137 0-4.146-0.832-5.657-2.343s-2.343-3.52-2.343-5.657c0-1.513 0.425-2.986 1.228-4.261 0.781-1.239 1.885-2.24 3.193-2.895l0.672 1.341c-1.063 0.533-1.961 1.347-2.596 2.354-0.652 1.034-0.997 2.231-0.997 3.461 0 3.584 2.916 6.5 6.5 6.5s6.5-2.916 6.5-6.5c0-1.23-0.345-2.426-0.997-3.461-0.635-1.008-1.533-1.822-2.596-2.354l0.672-1.341c1.308 0.655 2.412 1.656 3.193 2.895 0.803 1.274 1.228 2.748 1.228 4.261 0 2.137-0.832 4.146-2.343 5.657s-3.52 2.343-5.657 2.343z"}}]})(e)}function LC(e){return cC({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}}]})(e)}function MC(e){var n=e.archivosSubidos,r=e.isLoading,i=e.userData,a=e.setArchivosSubidos,o=c((0,t.useState)([]),2),s=o[0],u=o[1],l=c((0,t.useState)([]),2),f=l[0],h=l[1],d=c((0,t.useState)(null),2),p=(d[0],d[1]),v=c((0,t.useState)(null),2),m=(v[0],v[1]),y=c((0,t.useState)(null),2),g=y[0],k=y[1],b=c((0,t.useState)(0),2),w=b[0],x=b[1],_=c((0,t.useState)(""),2),I=_[0],E=_[1],S=c((0,t.useState)("date"),2),T=S[0],C=S[1],A=c((0,t.useState)("desc"),2),N=A[0],P=A[1],D=c((0,t.useState)("all"),2),R=D[0],O=D[1],L=c((0,t.useState)([]),2),M=L[0],j=L[1],F=_C(I,300);document.title="Comunidad Fiuba - Perfil",i=i||{},(0,t.useEffect)((function(){for(var e=[],t=0,r=new Set,a=i.slug,o=0;o<n.length;o++){var s=n[o].username,c=n[o].likes,l=n[o].url,f=n[o].id,h=n[o].userslug,d=n[o].title,p=n[o].materia,v=n[o].fecha||n[o].date;!s.length>0||h===a&&(e.push({titulo:d,likes:c,url:l,id:f,materia:p,fecha:v}),t+=c,p&&r.add(p))}u(e),x(t),j(Array.from(r).sort())}),[r,n]),(0,t.useEffect)((function(){var e=re(s);F&&(e=e.filter((function(e){return e.titulo.toLowerCase().includes(F.toLowerCase())||e.materia&&e.materia.toLowerCase().includes(F.toLowerCase())}))),"all"!==R&&(e=e.filter((function(e){return e.materia===R}))),e.sort((function(e,t){var n=0;switch(T){case"likes":n=t.likes-e.likes;break;case"title":n=(e.titulo||"").localeCompare(t.titulo||"");break;default:n=e.fecha&&t.fecha?new Date(t.fecha)-new Date(e.fecha):String(t.id||"").localeCompare(String(e.id||""))}return"asc"===N?-n:n})),h(e)}),[s,F,R,T,N]);var U=function(){document.getElementById("confirmacionBox").style.display="none",document.getElementById("confirmacionBackdrop").style.display="none",k(null)},V=function(e){T===e?P("asc"===N?"desc":"asc"):(C(e),P("desc"))};return(0,HT.jsxs)("div",{className:AC.mainDiv,children:[(0,HT.jsxs)(GT,{children:[(0,HT.jsx)(WT,{tipo:"buena",texto:"Contenido borrado correctamente.",setShowAlert:p}),(0,HT.jsx)(WT,{tipo:"mala",texto:"Error al borrar el archivo",setShowAlert:m})]}),(0,HT.jsx)(FT,{to:"/",children:(0,HT.jsx)("ion-icon",{name:"arrow-back-outline",style:{position:"absolute",color:"white",left:"10px",top:"10px",fontSize:"2em",cursor:"pointer"}})}),(0,HT.jsx)("div",{id:"confirmacionBackdrop",className:AC.confirmacionBackdrop,onClick:U,style:{display:"none"},children:(0,HT.jsxs)("div",{id:"confirmacionBox",className:AC.confirmacion,children:[(0,HT.jsx)("p",{children:"\xbfSeguro quer\xe9s borrar el archivo?"}),(0,HT.jsxs)("div",{className:AC.confirmacionButtons,children:[(0,HT.jsx)("button",{className:AC.confirmacionButton,onClick:function(e){return function(){var e=g.id,t=g.url,n=g.titulo;fetch("https://cofi.saludturnos.com/postDelete",{method:"POST",body:JSON.stringify({token:i.token,uid:i.uid,id:e})}).then((function(t){t.json().then((function(t){a((function(t){return t.filter((function(t){return t.id!==e}))}))})).catch((function(e){return alert(e)}))})).catch((function(e){return alert(e)}));var r=t.replace("preview","view?usp=drivesdk");qT(e,r,n,(function(e){"succes"===e?p(!0):m(!0),U()}))}()},children:"Borrar"}),(0,HT.jsx)("button",{className:AC.cancelarButton,onClick:function(e){return U()},children:"Cancelar"})]})]})}),(0,HT.jsxs)("div",{className:AC.pagina,children:[(0,HT.jsxs)("div",{className:AC.contenedor,children:[(0,HT.jsx)(RC,{className:AC.bigIcon}),(0,HT.jsx)("h2",{className:AC.usuarioNombre,children:i.name}),(0,HT.jsxs)("div",{className:AC.usuarioDato,children:[(0,HT.jsx)(wC,{size:20,className:AC.heartIcon}),(0,HT.jsxs)("span",{children:[(0,HT.jsx)("b",{className:AC.likes,children:w})," Likes"]})]}),(0,HT.jsx)("div",{className:AC.usuarioDato,children:(0,HT.jsxs)("span",{children:[(0,HT.jsx)("b",{className:AC.likes,children:s.length})," Archivos"]})}),(0,HT.jsx)(FT,{to:"/changeUser",className:AC.linkCambiarUsername,children:(0,HT.jsx)("p",{children:"Cambiar Nombre"})})]}),(0,HT.jsxs)("div",{className:AC.contenedor,children:[(0,HT.jsx)("h2",{style:{margin:"-10px 0 10px 0"},children:"Mis archivos"}),(0,HT.jsxs)("div",{className:AC.filterControls,children:[(0,HT.jsxs)("div",{className:AC.searchContainer,children:[(0,HT.jsx)(gC,{size:20,style:{color:"white"}}),(0,HT.jsx)("input",{type:"text",placeholder:"Buscar archivos...",value:I,onChange:function(e){return E(e.target.value)},className:AC.searchInput})]}),(0,HT.jsxs)("div",{className:AC.filterRow,children:[(0,HT.jsxs)("select",{value:R,onChange:function(e){return O(e.target.value)},className:AC.materiaSelect,children:[(0,HT.jsx)("option",{value:"all",children:"Todas las materias"}),M.map((function(e){return(0,HT.jsx)("option",{value:e,children:e},e)}))]}),(0,HT.jsxs)("div",{className:AC.sortButtonsContainer,children:[(0,HT.jsxs)("button",{onClick:function(){return V("title")},className:"".concat(AC.sortButton," ").concat("title"===T?AC.active:""),children:[(0,HT.jsx)(kC,{size:16}),"T\xedtulo ","title"===T&&("asc"===N?"\u2191":"\u2193")]}),(0,HT.jsxs)("button",{onClick:function(){return V("likes")},className:"".concat(AC.sortButton," ").concat("likes"===T?AC.active:""),children:[(0,HT.jsx)(hC,{size:16}),"Likes ","likes"===T&&("asc"===N?"\u2191":"\u2193")]}),(0,HT.jsxs)("button",{onClick:function(){return V("date")},className:"".concat(AC.sortButton," ").concat("date"===T?AC.active:""),children:["Fecha ","date"===T&&("asc"===N?"\u2191":"\u2193")]})]})]})]}),(0,HT.jsx)("ul",{id:"misArchivosLista",className:AC.listaMisArchivos,children:r?(0,HT.jsx)(OC,{size:24,className:AC.spinner}):f.map((function(e){return(0,HT.jsxs)("li",{id:e.id+"miArchivo",children:[(0,HT.jsxs)("div",{className:AC.fileInfo,children:[(0,HT.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.titulo}),(0,HT.jsx)("div",{className:AC.fileMetadata,children:(0,HT.jsxs)("span",{children:[e.materia&&"".concat(e.materia," \u2022 "),e.likes,(0,HT.jsx)(hC,{style:{transform:"translate(2px,10%)"}})]})})]}),(0,HT.jsx)("button",{className:AC.deleteButton,onClick:function(){return function(e){document.getElementById("confirmacionBox").style.display="flex",document.getElementById("confirmacionBackdrop").style.display="flex",k(e)}(e)},children:(0,HT.jsx)(LC,{style:{marginRight:"4px"},size:18})})]},e.id+"miArchivo")}))})]})]})]})}var jC={pagina:"CambiarUsername_pagina__IhVI2",contenedor:"CambiarUsername_contenedor__HK3PY",mainDiv:"CambiarUsername_mainDiv__K0UO2",icono:"CambiarUsername_icono__vpXso",submit:"CambiarUsername_submit__Hgjpy",submitDisabled:"CambiarUsername_submitDisabled__HsqyH",form:"CambiarUsername_form__vmzN-"};function FC(e){var n=e.userData,r=e.setUserData,i=c((0,t.useState)(!1),2),a=i[0],o=i[1],s=c((0,t.useState)(null),2),u=s[0],l=s[1],f=c((0,t.useState)(null),2),h=f[0],d=f[1],p=c((0,t.useState)(null),2),v=p[0],m=p[1],y=c((0,t.useState)(null),2),g=y[0],k=y[1];return(0,HT.jsxs)("div",{className:jC.mainDiv,children:[(0,HT.jsxs)(GT,{children:[(0,HT.jsx)(WT,{tipo:"mala",texto:"Error: Los nombres no coinciden",setShowAlert:l}),(0,HT.jsx)(WT,{tipo:"intermedia",texto:"Ese es tu nombre actual",setShowAlert:m}),(0,HT.jsx)(WT,{tipo:"buena",texto:"Nombre cambiado con \xe9xito",setShowAlert:d}),(0,HT.jsx)(WT,{tipo:"neutral",texto:"No hay mas cambios de nombre",setShowAlert:k})]}),(0,HT.jsx)(FT,{to:"/perfil",children:(0,HT.jsx)("ion-icon",{name:"arrow-back-outline",style:{position:"absolute",color:"white",left:"10px",top:"10px",fontSize:"2em",cursor:"pointer"}})}),(0,HT.jsx)("div",{className:jC.pagina,children:(0,HT.jsxs)("div",{className:jC.contenedor,children:[(0,HT.jsx)("h2",{children:"Usuario"}),(0,HT.jsxs)("form",{action:"",className:jC.form,onSubmit:a?function(){return window.location.reload()}:function(e){e.preventDefault();var t=document.getElementById("newUserName").value,i=document.getElementById("userNameVerification").value;n.changes<=0?g():t!==n.name?t===i?fetch("https://cofi.saludturnos.com/username",{method:"POST",body:JSON.stringify({token:n.token,uid:n.uid,newName:t})}).then((function(e){o(!0),h();var n=document.getElementById("submitPass");n.classList.remove(jC.submit),n.classList.add(jC.submitDisabled),r((function(e){return e.name=t,e.changes=e.changes-1,e}))})).catch((function(e){return alert(e)})):u():v()},children:[(0,HT.jsxs)("fieldset",{children:[(0,HT.jsx)(RC,{className:jC.icono}),(0,HT.jsx)("input",{type:"text",id:"newUserName",placeholder:"Nuevo Nombre",required:!0,minLength:5})]}),(0,HT.jsxs)("fieldset",{children:[(0,HT.jsx)(RC,{className:jC.icono}),(0,HT.jsx)("input",{type:"text",id:"userNameVerification",placeholder:"Confirmar Nombre",required:!0,minLength:5})]}),a?(0,HT.jsx)("input",{type:"submit",id:"submitPass",value:"Recargar",className:jC.submitDisabled}):(0,HT.jsx)("input",{type:"submit",id:"submitPass",value:"Aplicar Cambios",className:jC.submit}),(0,HT.jsxs)("p",{style:{color:"white"},children:["Cambios disponibles: ",n.changes]})]})]})})]})}var UC={archivo:"DetallesArchivo_archivo__0uVRp",mainDiv:"DetallesArchivo_mainDiv__hT0Fc",navBar:"DetallesArchivo_navBar__4LeCD",boton:"DetallesArchivo_boton__FhqX3",botonIcon:"DetallesArchivo_botonIcon__QLqK7",contentWrap:"DetallesArchivo_contentWrap__5kOll",spinner:"DetallesArchivo_spinner__r-Ay8",rotate:"DetallesArchivo_rotate__Kk1Nc",download:"DetallesArchivo_download__DNSNr",colapsable:"DetallesArchivo_colapsable__nNh+c"};function VC(e){var n,r=e.archivosSubidos,i=e.isLoading,a=e.postsLikes,o=e.userData,s=e.setPostsLikes,u=e.caughtError,l=function(){var e=t.useContext(fT).matches,n=e[e.length-1];return n?n.params:{}}().postSlug,f=vT(),h=null===(n=r.find((function(e){return e.slug===l})))||void 0===n?void 0:n.id,d=c((0,t.useState)(null),2),p=d[0],v=d[1],m=c((0,t.useState)(!1),2),y=m[0],g=m[1],k=null===p||void 0===p?void 0:p.title,b=null===p||void 0===p?void 0:p.url,w=null===p||void 0===p?void 0:p.likes,x=null===p||void 0===p?void 0:p.url.split("/")[5],_="https://drive.usercontent.google.com/u/0/uc?id=".concat(x,"&export=download");document.title="".concat((l.charAt(0).toUpperCase()+l.slice(1)).replace(/-/g," ")," - Comunidad Fiuba");return(0,t.useEffect)((function(){if(!i)for(var e=0;e<r.length;e++)if(r[e].id===h)return void v(r[e])}),[i]),0===r.length?u?(0,HT.jsx)("div",{children:"ERROR INESPERADO, REINICIAR LA PAGINA"}):(0,HT.jsx)("div",{children:(0,HT.jsx)(OC,{size:60,className:UC.spinner})}):p?(0,HT.jsxs)("div",{className:UC.mainDiv,children:[(0,HT.jsxs)("div",{className:UC.navBar,children:[(0,HT.jsx)("div",{style:{width:"25%",display:"flex",justifyContent:"center"},children:(0,HT.jsx)(FT,{to:"/",style:{textDecoration:"none",overflow:"hidden"},children:(0,HT.jsx)("p",{style:{color:"white",margin:"0",cursor:"pointer",fontSize:"1.25em",left:"0px",width:"fit-content"},children:"Comunidad Fiuba"})})}),(0,HT.jsx)("span",{style:{overflow:"hidden",width:"50%"},children:k}),(0,HT.jsxs)("div",{style:{color:"white",width:"25%",overflow:"hidden",display:"flex"},children:[(0,HT.jsx)("span",{className:UC.colapsable,style:{display:"flex",alignItems:"center"},children:w}),(0,HT.jsx)("button",{className:UC.boton,disabled:y,onClick:function(){return function(e){o?(g(!0),fetch("https://cofi.saludturnos.com/like",{method:"POST",body:JSON.stringify({token:o.token,uid:o.uid,postId:e})}).then((function(t){return t.json().then((function(t){"Usuario invalido"===t.error?alert("Error Usuario invalido,Intenta reiniciar la pagina o contactar a un administrador"):"dislike"===t.action?(s((function(t){var n=t.indexOf(e);return t.splice(n,1),t})),p.likes=t.likes):"like"===t.action?(s((function(t){return t.push(e),t})),p.likes=t.likes):alert("Error desconocido,Intenta reiniciar la pagina o contactar a un administrador"),setTimeout((function(){g(!1)}),300)})).catch((function(e){return alert("Error desconocido,Intenta reiniciar la pagina o contactar a un administrador")}))})).catch((function(e){return alert("Error desconocido,Intenta reiniciar la pagina o contactar a un administrador")}))):f("/login")}(h)},children:(0,HT.jsx)(hC,{className:UC.botonIcon,style:{color:y?"lightblue":a.indexOf(h)>-1?"rgb(255,60,60)":"white",transform:"translate(0,10%)"}})}),(0,HT.jsx)(FT,{className:UC.download,to:_,children:(0,HT.jsx)(fC,{style:{transform:"translate(0,-5%)"}})})]})]}),(0,HT.jsx)("embed",{id:k+"embed",className:UC.archivo,src:b})]}):(0,HT.jsx)("div",{children:"No existe el archivo"})}var BC={mainContainer:"Login_mainContainer__LmGGK",columna:"Login_columna__RTupU",botonWrap:"Login_botonWrap__GNbwB",flecha:"Login_flecha__GI8Po",clickmeRight:"Login_clickmeRight__Q-3-f","clickme-r":"Login_clickme-r__wz9pM",clickmeLeft:"Login_clickmeLeft__IqHYV","clickme-l":"Login_clickme-l__25HBR",tituloLogIn:"Login_tituloLogIn__Oh4By",texto:"Login_texto__fu4gE",subTitulo:"Login_subTitulo__FLMuz",animated:"Login_animated__xeNfO",scaleme:"Login_scaleme__4sSR4",arrowDown:"Login_arrowDown__e2OWB",goDown:"Login_goDown__hpOtA",arrowDownContainer:"Login_arrowDownContainer__oS3C8"};function zC(e){var n=e.auth,r=vT(),i=(0,t.useRef)(),a=(0,t.useRef)(),o=(0,t.useRef)(),s=Ht[Math.floor(Math.random()*Ht.length)]||"Solo faltabas vos",u=qt[Math.floor(Math.random()*qt.length)]||"\xa1Bienvenido!";document.title="Comunidad Fiuba - Login",(0,t.useEffect)((function(){sessionStorage.mailError&&(alert("Solo aceptamos correos de @fi.uba.ar"),delete sessionStorage.mailError),n.currentUser&&r("/")}),[]);var c=function(){var e=window.screen.height||window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;window.scrollTo({top:e,behavior:"smooth"}),a.current.classList.remove(BC.clickmeLeft),i.current.classList.remove(BC.clickmeRight),o.current.classList.remove(BC.animated),setTimeout((function(){o.current.classList.add(BC.animated)}),100),setTimeout((function(){a.current.classList.add(BC.clickmeLeft),i.current.classList.add(BC.clickmeRight)}),100)};return(0,HT.jsxs)("div",{className:BC.mainContainer,children:[(0,HT.jsxs)("div",{className:BC.columna,children:[(0,HT.jsx)("h1",{children:"Comunidad Fiuba"}),(0,HT.jsx)("h3",{children:"Un lugar, todo el material necesario"}),(0,HT.jsx)("h2",{onClick:c,className:BC.subTitulo,children:"Sumate a compartir"})]}),(0,HT.jsxs)("div",{className:BC.columna,children:[(0,HT.jsxs)("div",{children:[(0,HT.jsx)("h2",{className:BC.tituloLogIn,children:u}),(0,HT.jsx)("h2",{children:s})]}),(0,HT.jsxs)("div",{children:[(0,HT.jsxs)("p",{className:BC.texto,children:["Admitimos emails de dominio ",(0,HT.jsx)("strong",{children:"fi.uba.ar"}),(0,HT.jsx)("br",{}),"esta comunidad es exclusiva para fiubenses"]}),(0,HT.jsxs)("div",{className:BC.botonWrap,children:[(0,HT.jsx)("div",{className:"".concat(BC.flecha," ").concat(BC.disabled),ref:i,children:(0,HT.jsx)(DC,{size:24})}),(0,HT.jsxs)("button",{onClick:function(){var e=new jt.auth.GoogleAuthProvider;e.setCustomParameters({hd:"fi.uba.ar",prompt:"select_account"}),n.signInWithPopup(e).then((function(e){e.additionalUserInfo.profile.email.includes("@fi.uba.ar")?r("/"):(sessionStorage.mailError=!0,n.signOut())}))},ref:o,children:[(0,HT.jsx)(bC,{size:48}),(0,HT.jsx)("p",{children:"Iniciar Sesi\xf3n"})]}),(0,HT.jsx)("div",{className:"".concat(BC.flecha," ").concat(BC.disabled),ref:a,children:(0,HT.jsx)(PC,{size:24})})]})]})]}),(0,HT.jsx)("div",{className:BC.arrowDownContainer,children:(0,HT.jsx)("div",{onClick:c,className:BC.arrowDown,children:(0,HT.jsx)(NC,{size:70})})})]})}function qC(e){var n=e.auth,r=c((0,t.useState)((function(){var e=sessionStorage.getItem("archivosSubidos");return e?JSON.parse(e):[]})),2),i=r[0],a=r[1],o=c((0,t.useState)(null),2),s=o[0],u=o[1],l=c((0,t.useState)(!0),2),f=l[0],h=l[1],d=c((0,t.useState)([]),2),p=d[0],v=d[1],m=c((0,t.useState)(null),2),y=m[0],g=m[1],k=function(){var e=sessionStorage.getItem("archivosSubidos_timestamp");return!!e&&Date.now()-parseInt(e)<18e5},b=function(e){a(e),sessionStorage.setItem("archivosSubidos",JSON.stringify(e)),sessionStorage.setItem("archivosSubidos_timestamp",Date.now().toString())},w=function(e){for(var t in e){var n=Bt.indexOf(e[t].materia);-1!==n&&(e[t].materia=zt[n])}return e};return(0,t.useEffect)((function(){var e=function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i.length>0&&k())){e.next=3;break}return h(!1),e.abrupt("return");case 3:return e.next=5,fetch("https://cofi.saludturnos.com/posts",{method:"GET"}).then((function(e){return e.json().then((function(e){var t=w(e);b(t)})).catch((function(e){g(e)}))})).catch((function(e){g(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().then((function(e){return h(!1)}))}),[]),(0,t.useEffect)((function(){var e=function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.currentUser){e.next=5;break}return e.next=3,fetch("https://cofi.saludturnos.com/userData/"+n.currentUser.uid,{method:"GET"}).then((function(e){return e.json().then((function(e){e.error?"Usuario no encontrado"===e.error?fetch("https://cofi.saludturnos.com/user",{method:"POST",body:JSON.stringify({userName:n.currentUser.displayName,uid:n.currentUser.uid})}).then((function(e){return e.json().then((function(e){u(e)})).catch((function(e){return g(e)}))})).catch((function(e){return g(e)})):g(null===e||void 0===e?void 0:e.error):(u(e),v(e.likes))})).catch((function(e){return g(e)}))})).catch((function(e){return g(e)}));case 3:e.next=7;break;case 5:u(null),v([]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().then((function(e){}))}),[n.currentUser]),(0,HT.jsx)(LT,{children:(0,HT.jsx)("main",{children:(0,HT.jsxs)(AT,{children:[(0,HT.jsx)(TT,{path:"/subir",element:n.currentUser?(0,HT.jsx)(ZT,{user:s,setArchivosSubidos:b,auth:n}):(0,HT.jsx)(ST,{replace:!0,to:"/login"})}),(0,HT.jsx)(TT,{path:"/perfil",element:n.currentUser?(0,HT.jsx)(MC,{archivosSubidos:i,setArchivosSubidos:a,auth:n,userData:s,isLoading:f}):(0,HT.jsx)(ST,{replace:!0,to:"/login"})}),(0,HT.jsx)(TT,{path:"/changeUser",element:n.currentUser?(0,HT.jsx)(FC,{userData:s,setUserData:u,auth:n}):(0,HT.jsx)(ST,{replace:!0,to:"/login"})}),(0,HT.jsx)(TT,{exact:!0,path:"/post/:postSlug",element:(0,HT.jsx)(VC,{isLoading:f,archivosSubidos:i,postsLikes:p,userData:s,setPostsLikes:v,caughtError:y})}),(0,HT.jsx)(TT,{path:"/login",element:(0,HT.jsx)(zC,{auth:n})}),(0,HT.jsx)(TT,{path:"/",element:(0,HT.jsx)(CC,{archivosSubidos:i,isLoading:f,postsLikes:p,auth:n,setPostsLikes:v,userData:s,caughtError:y})}),(0,HT.jsx)(TT,{path:"*",element:(0,HT.jsx)(ST,{replace:!0,to:"/"})})]})})})}function HC(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function GC(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var KC=function(){return KC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},KC.apply(this,arguments)},WC=function(e){return{loading:void 0===e||null===e,value:e}},QC=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return KC(KC({},e),{error:t.error,loading:!1,value:void 0});case"reset":return WC(t.defaultValue);case"value":return KC(KC({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),WC(n)),i=r[0],a=r[1],o=(0,t.useCallback)((function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})}),[e]),s=(0,t.useCallback)((function(e){a({type:"error",error:e})}),[]),u=(0,t.useCallback)((function(e){a({type:"value",value:e})}),[]);return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:s,setValue:u,value:i.value}}),[i.error,i.loading,o,s,u,i.value])},YC=function(e,n){var r=QC((function(){return e.currentUser})),i=r.error,a=r.loading,o=r.setError,s=r.setValue,u=r.value;return(0,t.useEffect)((function(){var t=function(e,t,n,r){return ee(e).onAuthStateChanged(t,n,r)}(e,(function(e){return HC(void 0,void 0,void 0,(function(){var t;return GC(this,(function(r){switch(r.label){case 0:if(!(null===n||void 0===n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return s(e),[2]}}))}))}),o);return function(){t()}}),[e]),[u,a,i]},XC={fondoCarga:"LoadingPage_fondoCarga__aygz6",mainTitulo:"LoadingPage_mainTitulo__250O7",expand:"LoadingPage_expand__KyEMy"};function JC(){return(0,HT.jsx)("div",{className:XC.fondoCarga,children:(0,HT.jsx)("div",{children:(0,HT.jsx)("h1",{className:XC.mainTitulo,children:"Comunidad Fiuba"})})})}function $C(){var e=jt.auth(),t=c(YC(e),3),n=t[0],r=t[1];t[2];return n&&!n.email.includes("@fi.uba.ar")&&e.signOut(),r?(0,HT.jsx)(JC,{}):(0,HT.jsx)(qC,{auth:e})}jt.initializeApp({apiKey:"AIzaSyDimftwPf8BJQKgRPs8kpYYol_ul59K3WA",authDomain:"comunidad-fiuba-3077f.firebaseapp.com",projectId:"comunidad-fiuba-3077f",storageBucket:"comunidad-fiuba-3077f.appspot.com",messagingSenderId:"86678440306",appId:"1:86678440306:web:210a097b576ed1be95b5eb",measurementId:"G-N76NBTSNCZ"}),i.createRoot(document.getElementById("root")).render((0,HT.jsx)($C,{}))}()}();
//# sourceMappingURL=main.f46dd8a1.js.map